<!DOCTYPE html><html lang="ja"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="manifest" href="/manifest.json"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" href="/favicon.ico"/><title>JAVAで組み合わせ | NISHIDEMASAMI.GITHUB.IO</title><meta name="description" content="Ruby では組み合わせを作成することができるArray#combinationが用意されています。これを使えば、例えば下記のように…"/><meta name="author" content="NISHIDE, Masami"/><meta property="og:title" content="JAVAで組み合わせ | NISHIDEMASAMI.GITHUB.IO"/><meta property="og:description" content="Ruby では組み合わせを作成することができるArray#combinationが用意されています。これを使えば、例えば下記のように…"/><meta property="og:locale" content="ja"/><meta property="og:site_name" content="NISHIDEMASAMI.GITHUB.IO"/><meta property="og:type" content="article"/><meta property="og:image" content="https://nishidemasami.github.ionull"/><meta name="twitter:card" content="summary_large_image"/><meta property="article:published_time" content="2016-11-26T00:04:03.000Z"/><script type="application/ld+json">
{
	"description": "Ruby では組み合わせを作成することができるArray#combinationが用意されています。これを使えば、例えば下記のように…",
	"author": {
		"@type": "Person",
		"name": "NISHIDE, Masami"
	},
	"@type": "BlogPosting",
	"url": "https://nishidemasami.github.io/posts/java-combination/",
	"publisher": {
		"@type": "Organization",
		"logo": {
			"@type": "ImageObject",
			"url": "https://nishidemasami.github.io/assets/images/logo.png"
		},
		"name": "NISHIDE, Masami"
	},
	"headline": "JAVAで組み合わせ | NISHIDEMASAMI.GITHUB.IO",
	"image": ["https://nishidemasami.github.ionull"],
	"datePublished": "2016-11-26T00:04:03.000Z",
	"dateModified": "null",
	"mainEntityOfPage": {
		"@type": "WebPage",
		"@id": "https://nishidemasami.github.io/posts/java-combination/"
	},
	"@context": "http://schema.org"
}</script><meta name="next-head-count" content="19"/><link rel="preload" href="/_next/static/css/1b189968687b44b0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1b189968687b44b0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f28f31ca8cbfdb81.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-d218629095830fc9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-231e4d384f15f548.js" defer=""></script><script src="/_next/static/chunks/481-bf3b8f1484a67a16.js" defer=""></script><script src="/_next/static/chunks/167-dc4bcc2fb801564d.js" defer=""></script><script src="/_next/static/chunks/764-6bb8d362f1ce50c2.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-01d5c162d549b639.js" defer=""></script><script src="/_next/static/lYCGLW7qHJv6NY91XbHKV/_buildManifest.js" defer=""></script><script src="/_next/static/lYCGLW7qHJv6NY91XbHKV/_ssgManifest.js" defer=""></script><style id="__jsx-3174553153">.navbar.jsx-3174553153 a{--tw-text-opacity:1;color:rgb(74 85 104/var(--tw-text-opacity));}.navbar.jsx-3174553153 a:hover{--tw-text-opacity:1;color:rgb(26 32 44/var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none;}</style><style id="__jsx-2181521509">.content.jsx-2181521509 *{overflow-wrap:break-word;}.content.jsx-2181521509 p{margin-bottom:1.5rem;margin-top:1.5rem;}.content.jsx-2181521509 ul{margin-bottom:1.5rem;margin-top:1.5rem;}.content.jsx-2181521509 h1{--tw-text-opacity:1;color:rgb(74 85 104/var(--tw-text-opacity));font-size:1.875rem;font-weight:600;margin-bottom:1rem;margin-top:1rem;}.content.jsx-2181521509 h2{--tw-text-opacity:1;color:rgb(74 85 104/var(--tw-text-opacity));font-size:1.5rem;font-weight:600;margin-bottom:1rem;margin-top:1rem;}.content.jsx-2181521509 h3{--tw-text-opacity:1;color:rgb(74 85 104/var(--tw-text-opacity));font-size:1.25rem;font-weight:600;margin-bottom:1rem;margin-top:1rem;}.content.jsx-2181521509 li{list-style:circle;}.content.jsx-2181521509 ul{-webkit-padding-start:40px;padding-inline-start:40px;}.content.jsx-2181521509 blockquote{font-size:smaller;font-style:italic;padding:0;text-align:center;}.content.jsx-2181521509 p code{background-color:#fdf6e3;color:#657b83;}</style></head><body><div id="__next"><div class="antialiased w-full text-gray-700 md:px-0 sm:flex min-h-screen"><div class="mx-auto float-left px-3 w-full max-sm sm:w-3/4 bg-slate-100 min-h-screen"><div class="border-b border-gray-300 break-all text-center text-zinc-900 font-semibold block sm:hidden"><div class="pt-16 pb-8"><div class="font-semibold text-2xl text-gray-900"><a href="/">NISHIDEMASAMI.GITHUB.IO</a></div><div class="text-sm">個人のブログです。有益なことや無益なことなどいろいろ書いています。</div></div><div><ul class="jsx-3174553153 navbar flex flex-wrap text-xl"><li class="mr-6"><a href="/">Home</a></li><li class="mr-6"><a href="/about/">About</a></li></ul></div></div><div class="text-base py-5"><h1 class="text-center font-bold text-3xl text-gray-900">JAVAで組み合わせ</h1><div class="text-center text-sm mb-8">November 26, 2016</div><div class="jsx-2181521509 content p-4 m-2 rounded-lg overflow-hidden shadow-lg border border-gray-400 bg-white"><div><p>Ruby では組み合わせを作成することができる<a href="https://docs.ruby-lang.org/ja/latest/method/Array/i/combination.html">Array#combination</a>が用意されています。<br>
これを使えば、例えば下記のように</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'json'</span></span>

jsonstr <span class="token operator">=</span> <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&#x3C;&#x3C;</span><span class="token symbol">JSON</span></span><span class="token string">
[
  {
    "price": 432,
    "name": "hoge"
  },
  {
    "price": 531,
    "name": "fuga"
  },
  {
    "price": 568,
    "name": "piyo"
  }
]
</span><span class="token delimiter"><span class="token symbol">JSON</span></span></span>

p <span class="token constant">JSON</span><span class="token punctuation">.</span>load<span class="token punctuation">(</span>jsonstr<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>combination<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>to_a
    <span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token operator">-</span><span class="token operator">></span>x<span class="token punctuation">{</span>x<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token operator">-</span><span class="token operator">></span>x<span class="token punctuation">,</span>y<span class="token punctuation">{</span>x<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"price"</span></span><span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"price"</span></span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>こうすれば、JSON の商品リストから price の合計が 1000 になるもの(hoge と piyo)を抜き出してくれます。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-literal"><span class="token string">"price"</span></span><span class="token operator">=></span><span class="token number">432</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"name"</span></span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"hoge"</span></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-literal"><span class="token string">"price"</span></span><span class="token operator">=></span><span class="token number">568</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"name"</span></span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"piyo"</span></span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre>
<p>非常にイージー。</p>
<p>ところが、combination は Java には無いんですよね。<br>
これを Java で書きたい時、どうすればいいのか悩みました。<br>
今回は再帰的なやりかたでやってみました。</p>
<pre class="language-java"><code class="language-java"> <span class="token operator">*</span> 組み合わせを返す
 <span class="token operator">*</span>
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> parameter 組み合わせを作成するリスト
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> combinationCount 組み合わせの個数
 <span class="token operator">*</span> <span class="token annotation punctuation">@return</span> 組み合わせのリスト
 <span class="token operator">*</span><span class="token operator">/</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">combination</span><span class="token punctuation">(</span>
  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> parameter<span class="token punctuation">,</span>
  <span class="token keyword">final</span> <span class="token keyword">long</span> combinationCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">final</span> <span class="token keyword">int</span> parameterSize <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterSize <span class="token operator">&#x3C;</span> combinationCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"リストの要素数が組み合わせ個数より少ないです。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>combinationCount <span class="token operator">&#x3C;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"組み合わせ個数が不正です。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>combinationCount <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    parameter<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x <span class="token operator">-></span> <span class="token punctuation">{</span>
      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> resultWork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      resultWork<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
      result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>resultWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> parameterSize <span class="token operator">-</span> combinationCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span><span class="token punctuation">></span></span> resultWork <span class="token operator">=</span> <span class="token function">combination</span><span class="token punctuation">(</span>
        parameter<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> parameterSize<span class="token punctuation">)</span><span class="token punctuation">,</span>
        combinationCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> resultWorkForEach <span class="token operator">:</span> resultWork<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        resultWorkForEach<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> parameter<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      result<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>resultWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>LinkedList を使っているのは先頭追加があるためです。<br>
ちょっと見た目がヘビーですが、使えます。<br>
こんな感じです。</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Item</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token keyword">int</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">int</span> price<span class="token punctuation">;</span>
  <span class="token class-name">String</span> name<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> price <span class="token operator">+</span> <span class="token string">"円"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> itemList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
      <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token number">432</span><span class="token punctuation">,</span> <span class="token string">"hoge"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token number">531</span><span class="token punctuation">,</span> <span class="token string">"fuga"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token number">568</span><span class="token punctuation">,</span> <span class="token string">"piyo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">,</span> <span class="token string">"meta"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">combination</span><span class="token punctuation">(</span>itemList<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x<span class="token operator">-></span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>こうなります。</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>hoge<span class="token operator">:</span><span class="token number">432</span>円<span class="token punctuation">,</span> fuga<span class="token operator">:</span><span class="token number">531</span>円<span class="token punctuation">,</span> piyo<span class="token operator">:</span><span class="token number">568</span>円<span class="token punctuation">]</span>
<span class="token punctuation">[</span>hoge<span class="token operator">:</span><span class="token number">432</span>円<span class="token punctuation">,</span> fuga<span class="token operator">:</span><span class="token number">531</span>円<span class="token punctuation">,</span> meta<span class="token operator">:</span><span class="token number">999</span>円<span class="token punctuation">]</span>
<span class="token punctuation">[</span>hoge<span class="token operator">:</span><span class="token number">432</span>円<span class="token punctuation">,</span> piyo<span class="token operator">:</span><span class="token number">568</span>円<span class="token punctuation">,</span> meta<span class="token operator">:</span><span class="token number">999</span>円<span class="token punctuation">]</span>
<span class="token punctuation">[</span>fuga<span class="token operator">:</span><span class="token number">531</span>円<span class="token punctuation">,</span> piyo<span class="token operator">:</span><span class="token number">568</span>円<span class="token punctuation">,</span> meta<span class="token operator">:</span><span class="token number">999</span>円<span class="token punctuation">]</span>
</code></pre>
<p>Ruby の例題と同じようにこうすると、</p>
<pre class="language-java"><code class="language-java"><span class="token function">combination</span><span class="token punctuation">(</span>itemList<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x<span class="token operator">-></span> x<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>y <span class="token operator">-></span> y<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token operator">-></span> y <span class="token operator">+</span> z<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x<span class="token operator">-></span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>こうなります。</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">[</span>hoge<span class="token operator">:</span><span class="token number">432</span>円<span class="token punctuation">,</span> piyo<span class="token operator">:</span><span class="token number">568</span>円<span class="token punctuation">]</span>
</code></pre>
<p>java8 の stream なのに遅延評価が役に立たないのは、Ruby も combination を<a href="https://docs.ruby-lang.org/ja/latest/class/Enumerator=3a=3aLazy.html">Enumerator::Lazy</a>で使えないのと一緒ですね。<br>
java8 は遅延評価がデフォルトとなっているので、気軽に limit(1)などで一瞬で返ってくるつもりでいたら combination 部分が延々返ってこない…なんてことが発生しないようになのかもしれません。</p>
<p>Ruby で使えた combination が無くて困った話でした。</p></div></div><div class="text-sm flex justify-between"><div>← 新しい投稿<br/><a href="/posts/vim-crypt/">Vimで暗号化</a></div><div class="text-right ml-auto">過去の投稿 →<br/><a href="/posts/hello-world/">はじめまして</a></div></div></div></div><div class="w-full sm:w-1/4 float-right sm:sticky shadow-[-2px_0px_3px_0px_rgba(0,0,0,0.12)] sm:h-full sm:flex sm:top-auto sm:self-end sm:bottom-0 min-h-screen"><div class="relative p-4"><a class="break-all" href="/">NISHIDEMASAMI.GITHUB.IO</a><div><p class="text-zinc-800 text-xs my-2">個人のブログです。有益なことや無益なことなどいろいろ書いています。</p><a href="/about/"><img src="/assets/images/author.jpg" class="inline-block m-0 rounded-full bg-clip-padding object-cover" width="75" height="75" alt="NISHIDE, Masami"/></a></div><nav class="my-6"><ul class="list-none p-0 m-0 "><li class="p-0 mx-0 my-2"><a href="/about/">このサイトについて</a></li><li class="p-0 mx-0 my-2"><a href="https://nishidemasami.github.io/sicp-jp-gitbook/">計算機プログラムの構造と解釈</a></li></ul></nav><nav class="my-6 border-t border-t-slate-200 relative">最新の投稿<ul class="m-0 p-0 border-0 list-[circle] ml-5"><li class="m-0 text-sm"><a href="/posts/google-colab-github/">Google ColaboratoryでGitHubのファイルを開く</a></li><li class="m-0 text-sm"><a href="/posts/nextjs-latex/">Next.jsで数式を書く</a></li><li class="m-0 text-sm"><a href="/posts/check_github_repository_size%20copy/">ED25519の鍵を生成する</a></li><li class="m-0 text-sm"><a href="/posts/check_github_repository_size/">GitHubのレポジトリサイズを確認する</a></li><li class="m-0 text-sm"><a href="/posts/css-svg-rotate-text/">SVGで文字をクルクル回す</a></li><li class="m-0 text-sm"><a href="/articles/react-sound-test/">Reactでホワイトノイズを鳴らす</a></li><li class="m-0 text-sm"><a href="/articles/blog-remake-with-gatsby/">Gatsbyでブログをリニューアルしてみました</a></li><li class="m-0 text-sm"><a href="/posts/network-specialist-examination/">ネットワークスペシャリスト合格体験記</a></li><li class="m-0 text-sm"><a href="/posts/hexo-themes-error/">hexoのテーマを変更した時に、テーマだけデプロイされない</a></li><li class="m-0 text-sm"><a href="/posts/vim-crypt/">Vimで暗号化</a></li></ul></nav><nav class="my-6 border-t border-t-slate-200 relative">タグ<ul class="m-0 p-0 border-0 list-[circle] ml-5"><li class="m-0 text-sm"><a href="/tag/SSH/">SSH<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/AWS/">AWS<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/GitHub/">GitHub<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/CSS/">CSS<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/SVG/">SVG<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/hexo/">hexo<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Java/">Java<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Ruby/">Ruby<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93/">情報処理技術者試験<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%B9%E3%83%9A%E3%82%B7%E3%83%A3%E3%83%AA%E3%82%B9%E3%83%88/">ネットワークスペシャリスト<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Vim/">Vim<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/OpenSSL/">OpenSSL<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/JavaScript/">JavaScript<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/TypeScript/">TypeScript<!-- -->(<!-- -->2<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/React/">React<!-- -->(<!-- -->2<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Gatsby/">Gatsby<!-- -->(<!-- -->1<!-- -->)</a></li></ul></nav><div class="border-t border-[#dedede]"><ul class="flex flex-row flex-wrap grow-0 shrink-0 list-none p-0 mx-[-3px] my-2 justify-start"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="mailto:nishidemasami@gmail.com" rel="noopener noreferrer" target="_blank"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 28 28"><title>email</title><path d="M26 23.5v-12c-0.328 0.375-0.688 0.719-1.078 1.031-2.234 1.719-4.484 3.469-6.656 5.281-1.172 0.984-2.625 2.188-4.25 2.188h-0.031c-1.625 0-3.078-1.203-4.25-2.188-2.172-1.813-4.422-3.563-6.656-5.281-0.391-0.313-0.75-0.656-1.078-1.031v12c0 0.266 0.234 0.5 0.5 0.5h23c0.266 0 0.5-0.234 0.5-0.5zM26 7.078c0-0.391 0.094-1.078-0.5-1.078h-23c-0.266 0-0.5 0.234-0.5 0.5 0 1.781 0.891 3.328 2.297 4.438 2.094 1.641 4.188 3.297 6.266 4.953 0.828 0.672 2.328 2.109 3.422 2.109h0.031c1.094 0 2.594-1.437 3.422-2.109 2.078-1.656 4.172-3.313 6.266-4.953 1.016-0.797 2.297-2.531 2.297-3.859zM28 6.5v17c0 1.375-1.125 2.5-2.5 2.5h-23c-1.375 0-2.5-1.125-2.5-2.5v-17c0-1.375 1.125-2.5 2.5-2.5h23c1.375 0 2.5 1.125 2.5 2.5z"></path></svg></li></a><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.facebook.com/masaminish" rel="noopener noreferrer" target="_blank"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 16 28"><title>facebook</title><path d="M14.984 0.187v4.125h-2.453c-1.922 0-2.281 0.922-2.281 2.25v2.953h4.578l-0.609 4.625h-3.969v11.859h-4.781v-11.859h-3.984v-4.625h3.984v-3.406c0-3.953 2.422-6.109 5.953-6.109 1.687 0 3.141 0.125 3.563 0.187z"></path></svg></li></a><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.twitter.com/nishidemasami" rel="noopener noreferrer" target="_blank"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 26 28"><title>twitter</title><path d="M25.312 6.375c-0.688 1-1.547 1.891-2.531 2.609 0.016 0.219 0.016 0.438 0.016 0.656 0 6.672-5.078 14.359-14.359 14.359-2.859 0-5.516-0.828-7.75-2.266 0.406 0.047 0.797 0.063 1.219 0.063 2.359 0 4.531-0.797 6.266-2.156-2.219-0.047-4.078-1.5-4.719-3.5 0.313 0.047 0.625 0.078 0.953 0.078 0.453 0 0.906-0.063 1.328-0.172-2.312-0.469-4.047-2.5-4.047-4.953v-0.063c0.672 0.375 1.453 0.609 2.281 0.641-1.359-0.906-2.25-2.453-2.25-4.203 0-0.938 0.25-1.797 0.688-2.547 2.484 3.062 6.219 5.063 10.406 5.281-0.078-0.375-0.125-0.766-0.125-1.156 0-2.781 2.25-5.047 5.047-5.047 1.453 0 2.766 0.609 3.687 1.594 1.141-0.219 2.234-0.641 3.203-1.219-0.375 1.172-1.172 2.156-2.219 2.781 1.016-0.109 2-0.391 2.906-0.781z"></path></svg></li></a><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://github.com/nishidemasami" rel="noopener noreferrer" target="_blank"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 26 28"><title>github</title><path d="M10 19c0 1.141-0.594 3-2 3s-2-1.859-2-3 0.594-3 2-3 2 1.859 2 3zM20 19c0 1.141-0.594 3-2 3s-2-1.859-2-3 0.594-3 2-3 2 1.859 2 3zM22.5 19c0-2.391-1.453-4.5-4-4.5-1.031 0-2.016 0.187-3.047 0.328-0.812 0.125-1.625 0.172-2.453 0.172s-1.641-0.047-2.453-0.172c-1.016-0.141-2.016-0.328-3.047-0.328-2.547 0-4 2.109-4 4.5 0 4.781 4.375 5.516 8.188 5.516h2.625c3.813 0 8.188-0.734 8.188-5.516zM26 16.25c0 1.734-0.172 3.578-0.953 5.172-2.063 4.172-7.734 4.578-11.797 4.578-4.125 0-10.141-0.359-12.281-4.578-0.797-1.578-0.969-3.437-0.969-5.172 0-2.281 0.625-4.438 2.125-6.188-0.281-0.859-0.422-1.766-0.422-2.656 0-1.172 0.266-2.344 0.797-3.406 2.469 0 4.047 1.078 5.922 2.547 1.578-0.375 3.203-0.547 4.828-0.547 1.469 0 2.953 0.156 4.375 0.5 1.859-1.453 3.437-2.5 5.875-2.5 0.531 1.062 0.797 2.234 0.797 3.406 0 0.891-0.141 1.781-0.422 2.625 1.5 1.766 2.125 3.938 2.125 6.219z"></path></svg></li></a><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.linkedin.com/in/masami-nishide-66820bb2" rel="noopener noreferrer" target="_blank"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 24 24"><title>linkedin</title><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></li></a><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.instagram.com/nishidemasami" rel="noopener noreferrer" target="_blank"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 24 24"><title>instagram</title><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></li></a></ul></div><div class="text-xs text-[#b6b6b6]">© All rights reserved.</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"JAVAで組み合わせ","description":"Ruby では組み合わせを作成することができるArray#combinationが用意されています。これを使えば、例えば下記のように…","date":"2016-11-26T09:04:03+0900","modified_date":null,"image":null,"content":"\u003cp\u003eRuby では組み合わせを作成することができる\u003ca href=\"https://docs.ruby-lang.org/ja/latest/method/Array/i/combination.html\"\u003eArray#combination\u003c/a\u003eが用意されています。\u003cbr\u003e\nこれを使えば、例えば下記のように\u003c/p\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby\"\u003e\u003cspan class=\"token keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e'json'\u003c/span\u003e\u003c/span\u003e\r\n\r\njsonstr \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string-literal heredoc-string\"\u003e\u003cspan class=\"token delimiter\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token symbol\"\u003eJSON\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\r\n[\r\n  {\r\n    \"price\": 432,\r\n    \"name\": \"hoge\"\r\n  },\r\n  {\r\n    \"price\": 531,\r\n    \"name\": \"fuga\"\r\n  },\r\n  {\r\n    \"price\": 568,\r\n    \"name\": \"piyo\"\r\n  }\r\n]\r\n\u003c/span\u003e\u003cspan class=\"token delimiter\"\u003e\u003cspan class=\"token symbol\"\u003eJSON\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\r\n\r\np \u003cspan class=\"token constant\"\u003eJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eload\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ejsonstr\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecombination\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eto_a\r\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eselect\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereduce\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"price\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"price\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこうすれば、JSON の商品リストから price の合計が 1000 になるもの(hoge と piyo)を抜き出してくれます。\u003c/p\u003e\n\u003cpre class=\"language-ruby\"\u003e\u003ccode class=\"language-ruby\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"price\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\u003cspan class=\"token number\"\u003e432\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"hoge\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"price\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\u003cspan class=\"token number\"\u003e568\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\u003cspan class=\"token string-literal\"\u003e\u003cspan class=\"token string\"\u003e\"piyo\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e非常にイージー。\u003c/p\u003e\n\u003cp\u003eところが、combination は Java には無いんですよね。\u003cbr\u003e\nこれを Java で書きたい時、どうすればいいのか悩みました。\u003cbr\u003e\n今回は再帰的なやりかたでやってみました。\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e 組み合わせを返す\r\n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\r\n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token annotation punctuation\"\u003e@param\u003c/span\u003e parameter 組み合わせを作成するリスト\r\n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token annotation punctuation\"\u003e@param\u003c/span\u003e combinationCount 組み合わせの個数\r\n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token annotation punctuation\"\u003e@return\u003c/span\u003e 組み合わせのリスト\r\n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\r\n\u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003ecombination\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\r\n  \u003cspan class=\"token keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e parameter\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\r\n  \u003cspan class=\"token keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elong\u003c/span\u003e combinationCount\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\r\n  \u003cspan class=\"token keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e parameterSize \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e parameter\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\r\n  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparameterSize \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e combinationCount\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eIllegalArgumentException\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"リストの要素数が組み合わせ個数より少ないです。\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecombinationCount \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eIllegalArgumentException\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"組み合わせ個数が不正です。\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecombinationCount \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e result \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eLinkedList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n    parameter\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eforEach\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n      \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e resultWork \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eLinkedList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n      resultWork\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n      result\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresultWork\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e result \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eLinkedList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e parameterSize \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e combinationCount \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n      \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e resultWork \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecombination\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\r\n        parameter\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esubList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e parameterSize\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\r\n        combinationCount \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n      \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e resultWorkForEach \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e resultWork\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n        resultWorkForEach\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e parameter\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n      result\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eaddAll\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresultWork\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLinkedList を使っているのは先頭追加があるためです。\u003cbr\u003e\nちょっと見た目がヘビーですが、使えます。\u003cbr\u003e\nこんな感じです。\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n  \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e price\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eprice \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e price\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n  \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e price\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\r\n  \u003cspan class=\"token annotation punctuation\"\u003e@Override\u003c/span\u003e\r\n  \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e \u003cspan class=\"token function\"\u003etoString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e name \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\":\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e price \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"円\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\r\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMain\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n  \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"token function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e args\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n    \u003cspan class=\"token class-name\"\u003eList\u003c/span\u003e\u003cspan class=\"token generics\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e itemList \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eArrays\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003easList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n      \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e432\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"hoge\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\r\n      \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e531\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"fuga\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\r\n      \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e568\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"piyo\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\r\n      \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e999\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"meta\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\r\n    \u003cspan class=\"token function\"\u003ecombination\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eitemList\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eforEach\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eout\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprintln\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eArrays\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etoString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etoArray\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこうなります。\u003c/p\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ehoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e432\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fuga\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e531\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e piyo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e568\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\r\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ehoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e432\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fuga\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e531\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e meta\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e999\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\r\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ehoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e432\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e piyo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e568\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e meta\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e999\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\r\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003efuga\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e531\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e piyo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e568\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e meta\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e999\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRuby の例題と同じようにこうすると、\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token function\"\u003ecombination\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eitemList\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efilter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estream\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eprice\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereduce\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e y \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eforEach\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token operator\"\u003e-\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eout\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprintln\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eArrays\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etoString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etoArray\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこうなります。\u003c/p\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ehoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e432\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e piyo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e568\u003c/span\u003e円\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ejava8 の stream なのに遅延評価が役に立たないのは、Ruby も combination を\u003ca href=\"https://docs.ruby-lang.org/ja/latest/class/Enumerator=3a=3aLazy.html\"\u003eEnumerator::Lazy\u003c/a\u003eで使えないのと一緒ですね。\u003cbr\u003e\njava8 は遅延評価がデフォルトとなっているので、気軽に limit(1)などで一瞬で返ってくるつもりでいたら combination 部分が延々返ってこない…なんてことが発生しないようになのかもしれません。\u003c/p\u003e\n\u003cp\u003eRuby で使えた combination が無くて困った話でした。\u003c/p\u003e","recents":[{"slug":"posts/google-colab-github","date":"2022-12-04T05:58:43+0900","draft":false,"title":"Google ColaboratoryでGitHubのファイルを開く","description":"Google ColaboratoryでGitHubのファイルを開く","content":"\r\nGoogle ColaboratoryでGitHubのファイルを開いてみたいと思って書いてみました。\r\n\r\nと言っても簡単で、GitHubでパブリックのリポジトリにファイルをコミットするだけです。\r\n\r\n\u003chttps://github.com/nishidemasami/google-colab-tutorial/blob/main/ubuntu-command/useful_tools.ipynb\u003e\r\n\r\nこのようなパスにコミットしたとしたら、\r\n\r\n\u003chttps://colab.research.google.com/github/nishidemasami/google-colab-tutorial/blob/main/ubuntu-command/useful_tools.ipynb\u003e\r\n\r\nこうやってGoogle Colaboratoryで開くことができます。\r\n\r\n簡単！\r\n","tags":null,"category":"blog"},{"slug":"posts/nextjs-latex","date":"2022-12-04T04:58:43+0900","draft":false,"title":"Next.jsで数式を書く","description":"Next.jsで数式を書く","content":"\r\nNext.jsで数式を書いてみたいと思って書いてみました。\r\n$\\LaTeX$をウェブブラウザで表示するためのライブラリである$\\KaTeX$をNext.jsで使ってみたいと思います。\r\n\r\nJavaScriptで動的にブラウザ上で数式を描画するのがよく見る$\\KaTeX$の使い方ですが、Next.jsでSSGする時にはビルド時に既に数式が描画されているという挙動になるので少し仕組みが違います。\r\n\r\nまず、必要なパッケージをインストールします。\r\n\r\n```bash\r\nnpm install remark-math rehype-katex\r\n```\r\n\r\nこのウェブサイトではMarkdownを読み込むのに _unified_ を使用しているので、 _remark-math_ と _rehype-katex_ を追加で _use_ します。\r\n\r\n```typescript\r\nimport rehypePrism from '@mapbox/rehype-prism';\r\nimport rehypeKatex from 'rehype-katex';\r\nimport rehypeStringify from 'rehype-stringify';\r\nimport remarkGfm from 'remark-gfm';\r\nimport remarkMath from 'remark-math';\r\nimport remarkParse from 'remark-parse';\r\nimport remarkRehype from 'remark-rehype';\r\nimport { unified } from 'unified';\r\n\r\nexport const markdownToHtml = async (markdown: string) =\u003e\r\n  (\r\n    await unified()\r\n      .use(remarkParse)\r\n      .use(remarkMath)\r\n      .use(remarkGfm)\r\n      .use(remarkRehype, { allowDangerousHtml: true })\r\n      .use(rehypePrism)\r\n      .use(rehypeKatex)\r\n      .use(rehypeStringify, { allowDangerousHtml: true })\r\n      .process(markdown)\r\n  )\r\n    .toString();\r\n```\r\n\r\nあとは$\\KaTeX$のCSSをCDNなどから読み込めば完成です。\r\n\r\n```html\r\n\u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css\" crossOrigin=\"anonymous\" /\u003e\r\n```\r\n\r\nでは、実際に書いてみることにします。  \r\nまずは任意の$x$と$y$の最大公約数を求める$gcd$関数の定義です。\r\n\r\n```latex\r\n\\gcd(x, y) =\r\n\\begin{cases}\r\n  y \u0026 (x = 0)\\\\\r\n  x \u0026 (y = 0)\\\\\r\n  \\gcd(y, x \\bmod y)\u0026(\\text{otherwize})\r\n\\end{cases}\r\n```\r\n\r\n$$\r\n\\gcd(x, y) =\r\n\\begin{cases}\r\n  y \u0026 (x = 0)\\\\\r\n  x \u0026 (y = 0)\\\\\r\n  \\gcd(y, x \\bmod y) \u0026 (\\text{otherwize})\r\n\\end{cases}\r\n$$\r\n\r\nいい感じですね！\r\n\r\n2次方程式の解の公式も書いてみます。\r\n\r\n```latex\r\nx = \\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}\r\n```\r\n\r\n$$\r\nx = \\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}\r\n$$\r\n\r\n学生時代を思い出す公式も上手に書けました。\r\n","tags":null,"category":"blog"},{"slug":"posts/check_github_repository_size copy","date":"2022-12-02T23:02:43+0900","draft":false,"title":"ED25519の鍵を生成する","description":"ED25519の鍵を生成する","content":"\r\nもう1年以上前にAWSでED25519の鍵が使えるようになっていた。  \r\n当然のようにGitHubでも使える。  \r\nどんどんED25519を使えない環境もかなり減ってきていて、ED25519の鍵を作る機会も増えてきた。\r\n\r\nなのに、ED25519の鍵の作り方をいつもググって調べるので自分用にメモ。\r\n\r\n`ssh-keygen -t ed25519`  \r\nで作成できる。  \r\n\r\n```bash\r\n$ ssh -V\r\nOpenSSH_8.9p1 Ubuntu-3, OpenSSL 3.0.2 15 Mar 2022\r\n$ ssh-keygen -t ed25519\r\nGenerating public/private ed25519 key pair.\r\nEnter file in which to save the key (/home/nishidemasami/.ssh/id_ed25519):\r\nEnter passphrase (empty for no passphrase):\r\nEnter same passphrase again:\r\nYour identification has been saved in /home/nishidemasami/.ssh/id_ed25519\r\nYour public key has been saved in /home/nishidemasami/.ssh/id_ed25519.pub\r\nThe key fingerprint is:\r\nSHA256:mObF7QvcCUg1/JQb9aF6hc2R6GCuu7UpYipZ03J6Xtw nishidemasami@desktop-nishidemasami\r\nThe key's randomart image is:\r\n+--[ED25519 256]--+\r\n|       .o  o..o. |\r\n|       ...* .*.o |\r\n|      .  = =o =  |\r\n|     . = .+...   |\r\n|     .= S.o .    |\r\n|    +oo+.= o     |\r\n|   o =. =.E      |\r\n|  o . +.oo +     |\r\n|   ..=...o+      |\r\n+----[SHA256]-----+\r\n```\r\n\r\n参考\r\n\u003chttps://aws.amazon.com/jp/about-aws/whats-new/2021/08/amazon-ec2-customers-ed25519-keys-authentication/\u003e","tags":["SSH","AWS"],"category":"blog"},{"slug":"posts/check_github_repository_size","date":"2022-12-01T23:02:43+0900","draft":false,"title":"GitHubのレポジトリサイズを確認する","description":"GitHubのレポジトリサイズを確認する","content":"\r\nリポジトリのサイズがいつも気になるので自分用にメモ。\r\n\r\n`https://api.github.com/repos/アカウント名/リポジトリ名`  \r\nにアクセスするとjsonで詳細が取得できる。  \r\nその`size`にKB単位でサイズが入っている。\r\n\r\nたとえば`github.com:nishidemasami/nishidemasami.github.io.git`の場合、  \r\n\u003chttps://api.github.com/repos/nishidemasami/nishidemasami.github.io\u003e  \r\nこのURLで取得できる。\r\n","tags":["GitHub"],"category":"blog"},{"slug":"posts/css-svg-rotate-text","date":"2021-03-17T01:04:03+0900","draft":false,"title":"SVGで文字をクルクル回す","description":"SVGで文字をクルクル回す","content":"\r\nSVGとCSSだけで文字をクルクル回したかったので自分用にメモ。\r\n\r\n\u003csvg style=\"animation: spin 5s linear infinite; width:100%\" viewBox=\"0 0 100 100\"\u003e\r\n    \u003cdefs\u003e\r\n        \u003cpath id=\"Circle\"\r\n                d=\"M 25, 50\r\n            a 25,25 0 1,1 50,0\r\n            a 25,25 0 1,1 -50,0\" /\u003e\r\n    \u003c/defs\u003e\r\n    \u003ctext\u003e\r\n        \u003ctextPath href=\"#Circle\"\u003e文字がクルクル回ります。\u003c/textPath\u003e\r\n    \u003c/text\u003e\r\n\u003c/svg\u003e\r\n\r\n```html\r\n\u003csvg style=\"animation: spin 5s linear infinite\" viewBox=\"0 0 100 100\" style=\"width:100%\"\u003e\r\n    \u003cdefs\u003e\r\n        \u003cpath id=\"Circle\"\r\n                d=\"M 25, 50\r\n            a 25,25 0 1,1 50,0\r\n            a 25,25 0 1,1 -50,0\" /\u003e\r\n    \u003c/defs\u003e\r\n    \u003ctext\u003e\r\n        \u003ctextPath href=\"#Circle\"\u003e文字がクルクル回ります。\u003c/textPath\u003e\r\n    \u003c/text\u003e\r\n\u003c/svg\u003e\r\n```\r\n\r\nSVGは大きさ50*50の円とその周囲を沿うようにテキストを記述しています。SVGのスタイルにはクルクル回るCSSを書いてます。  \r\nこれだけでクルクル回ったので楽しかったです。\r\n","tags":["CSS","SVG"],"category":"blog"},{"slug":"articles/react-sound-test","date":"2021-03-14T01:04:03+0900","draft":false,"title":"Reactでホワイトノイズを鳴らす","description":"↓ React + TypeScript でホワイトノイズを鳴らしてみました ※音が鳴ります！パソコンで音を鳴らすのはかんたんなんですけどスマホはガードが固いらしくて、ユーザのなんらかの動作をトリガーとして再生しないと再生されないみたいです。なので今回は useCallback で宣言して onClick から呼びました。…","content":"*/\n\nimport React from 'react';\n\nimport { format } from 'date-fns';\nimport { GetStaticProps } from 'next';\nimport dynamic from 'next/dynamic';\n\nimport { ReactAudioTest } from '../../components/ReactAudioTest';\nimport { Content } from '../../content/Content';\nimport { Meta } from '../../layout/Meta';\nimport { PostPagination } from '../../pagination/PostPagination';\nimport { Main } from '../../templates/Main';\nimport {\n\tgetPrevNextPost,\n\tgetRecentPosts,\n\tgetTags,\n\tPostItems,\n} from '../../utils/Content';\n\ntype ReactSoundTestProps = {\n\trecents: PostItems[];\n\ttags: string[];\n\tprevPost?: PostItems;\n\tnextPost?: PostItems;\n};\n\nconst ReactEmbedGist = dynamic(() =\u003e import('../../utils/CodeBlock'), {\n\tloading: () =\u003e \u003cp\u003eloading...\u003c/p\u003e,\n\tssr: false,\n});\n\nconst ReactSoundTest = (props: ReactSoundTestProps) =\u003e (\n\t\u003cMain\n\t\trecents={props.recents}\n\t\ttags={props.tags}\n\t\tmeta={\n\t\t\t\u003cMeta\n\t\t\t\ttitle=\"Reactでホワイトノイズを鳴らす\"\n\t\t\t\tdescription=\"React + TypeScript でホワイトノイズを鳴らしてみました\"\n\t\t\t/\u003e\n\t\t}\n\t\u003e\n\t\t\u003ch1 className=\"text-center font-bold text-3xl text-gray-900\"\u003e\n\t\t\tReactでホワイトノイズを鳴らす\n\t\t\u003c/h1\u003e\n\t\t\u003cdiv className=\"text-center text-sm mb-8\"\u003e\n\t\t\t{format(new Date('2021-03-14T01:04:03+0900'), 'LLLL d, yyyy')}\n\t\t\u003c/div\u003e\n\n\t\t\u003cContent\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cp\u003e\n\t\t\t\t\t↓ React + TypeScript でホワイトノイズを鳴らしてみました\n\t\t\t\t\t※音が鳴ります！\n\t\t\t\t\u003c/p\u003e\n\t\t\t\t\u003cReactAudioTest /\u003e\n\t\t\t\t\u003cp\u003e\n\t\t\t\t\tパソコンで音を鳴らすのはかんたんなんですけどスマホはガードが固いらしくて、ユーザのなんらかの動作をトリガーとして再生しないと再生されないみたいです。\n\t\t\t\t\u003c/p\u003e\n\t\t\t\t\u003cp\u003eなので今回は useCallback で宣言して onClick から呼びました。\u003c/p\u003e\n\t\t\t\t\u003cp\u003e↓ これが今回のコードです\u003c/p\u003e\n\t\t\t\t\u003cReactEmbedGist gist=\"nishidemasami/133b02b3a02869dea1a2d7d3e15ce3b6\" /\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/Content\u003e\n\n\t\t\u003cPostPagination nextPost={props.nextPost} prevPost={props.prevPost} /\u003e\n\t\u003c/Main\u003e\n);\n\nexport const getStaticProps: GetStaticProps\u003cReactSoundTestProps\u003e = async () =\u003e {\n\tconst recents = getRecentPosts(['title', 'date', 'slug']);\n\n\treturn {\n\t\tprops: {\n\t\t\trecents,\n\t\t\ttags: getTags(),\n\t\t\t...getPrevNextPost(__filename),\n\t\t},\n\t};\n};\n\nexport default ReactSoundTest;\n","tags":["TypeScript","React"],"category":"blog"},{"slug":"articles/blog-remake-with-gatsby","date":"2021-03-06T18:04:03+0900","draft":false,"title":"Gatsbyでブログをリニューアルしてみました","description":"このブログをリニューアルしてみました。このブログのソースはここ ↓ で公開しています。https://github.com/nishidemasami/nishidemasami.github.io/tree/gatsby見てみた感じどうですか？すごくないですか！？…","content":"*/\n\nimport React from 'react';\n\nimport { format } from 'date-fns';\nimport { GetStaticProps } from 'next';\n\nimport ReactHelloWorld from '../../components/ReactHelloWorld/ReactHelloWorld';\nimport { Content } from '../../content/Content';\nimport { Meta } from '../../layout/Meta';\nimport { PostPagination } from '../../pagination/PostPagination';\nimport { Main } from '../../templates/Main';\nimport {\n\tgetPrevNextPost,\n\tgetRecentPosts,\n\tgetTags,\n\tPostItems,\n} from '../../utils/Content';\n\ntype AboutProps = {\n\trecents: PostItems[];\n\ttags: string[];\n\tprevPost?: PostItems;\n\tnextPost?: PostItems;\n};\n\nconst About = (props: AboutProps) =\u003e (\n\t\u003cMain\n\t\trecents={props.recents}\n\t\ttags={props.tags}\n\t\tmeta={\n\t\t\t\u003cMeta\n\t\t\t\ttitle=\"Gatsbyでブログをリニューアルしてみました\"\n\t\t\t\tdescription=\"Gatsbyでブログをリニューアルしてみました\"\n\t\t\t/\u003e\n\t\t}\n\t\u003e\n\t\t\u003ch1 className=\"text-center font-bold text-3xl text-gray-900\"\u003e\n\t\t\tGatsbyでブログをリニューアルしてみました\n\t\t\u003c/h1\u003e\n\t\t\u003cdiv className=\"text-center text-sm mb-8\"\u003e\n\t\t\t{format(new Date('2021-03-06T18:04:03+0900'), 'LLLL d, yyyy')}\n\t\t\u003c/div\u003e\n\n\t\t\u003cContent\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cp\u003e\n\t\t\t\t\tこのブログをリニューアルしてみました。\n\t\t\t\t\tちなみにこのブログのソースはここ ↓ で公開しています。\n\t\t\t\t\t\u003ca href=\"https://github.com/nishidemasami/nishidemasami.github.io/tree/gatsby\"\u003e\n\t\t\t\t\t\thttps://github.com/nishidemasami/nishidemasami.github.io/tree/gatsby\n\t\t\t\t\t\u003c/a\u003e\n\t\t\t\t\u003c/p\u003e\n\t\t\t\t\u003cp\u003e作ってみた感じ、すごくいいと思います！\u003c/p\u003e\n\t\t\t\t\u003cul\u003e\n\t\t\t\t\t\u003cli\u003eReact が動いている・生で React が書ける\u003c/li\u003e\n\t\t\t\t\t\u003cli\u003e\n\t\t\t\t\t\tページ間の遷移の速度が速い(React の仮想 DOM 操作に由来している)\n\t\t\t\t\t\u003c/li\u003e\n\t\t\t\t\t\u003cli\u003e\n\t\t\t\t\t\tちょっとがんばれば Typescript でも書ける(使用する Gatsby\n\t\t\t\t\t\tのテンプレートによっては最初から Typescript を使っているらしい)\n\t\t\t\t\t\u003c/li\u003e\n\t\t\t\t\t\u003cli\u003e\n\t\t\t\t\t\tGatsby が静的にページを作ってくれているので Javascript\n\t\t\t\t\t\tをオフにしてても見れる\n\t\t\t\t\t\u003c/li\u003e\n\t\t\t\t\u003c/ul\u003e\n\n\t\t\t\t\u003cReactHelloWorld\u003e\n\t\t\t\t\tこんな感じで普通にReact が\u003cbr /\u003e\n\t\t\t\t\tTypescript で書けて動きます！✨\n\t\t\t\t\u003c/ReactHelloWorld\u003e\n\t\t\t\t\u003cp\u003e\n\t\t\t\t\tGatsby は、HEXO や Hugo、Jekyll\n\t\t\t\t\tみたいに静的ジェネレータなので、こうやって Github Pages\n\t\t\t\t\tにも乗せられるので便利！ AWS S3 とかに乗せればスケールしますし！✨\n\t\t\t\t\u003c/p\u003e\n\t\t\t\t\u003cp\u003e\n\t\t\t\t\tあと、ページを高速化するための細かなテクニックを最初から使ってくれています。\n\t\t\t\t\u003c/p\u003e\n\t\t\t\t\u003cul\u003e\n\t\t\t\t\t\u003cli\u003e静的プレレンダリング・静的プリフェッチ(速い)\u003c/li\u003e\n\t\t\t\t\t\u003cli\u003e\n\t\t\t\t\t\tいわゆる PRPL パターンに準拠する PWA サポート\n\t\t\t\t\t\t\u003cbr /\u003e\n\t\t\t\t\t\t\u003cstrong\u003e\n\t\t\t\t\t\t\t\u003cem\u003ePush \u003c/em\u003e\n\t\t\t\t\t\t\u003c/strong\u003e\n\t\t\t\t\t\tcritical resources for the initial URL route using\n\t\t\t\t\t\t\u003ccode\u003e\u0026lt;link preload\u0026gt;\u003c/code\u003e and HTTP/2.\n\t\t\t\t\t\t\u003cbr /\u003e\n\t\t\t\t\t\t\u003cstrong\u003e\n\t\t\t\t\t\t\t\u003cem\u003eRender \u003c/em\u003e\n\t\t\t\t\t\t\u003c/strong\u003e\n\t\t\t\t\t\tinitial route.\n\t\t\t\t\t\t\u003cbr /\u003e\n\t\t\t\t\t\t\u003cstrong\u003e\n\t\t\t\t\t\t\t\u003cem\u003ePre-cache \u003c/em\u003e\n\t\t\t\t\t\t\u003c/strong\u003e\n\t\t\t\t\t\tremaining routes.\n\t\t\t\t\t\t\u003cbr /\u003e\n\t\t\t\t\t\t\u003cstrong\u003e\n\t\t\t\t\t\t\t\u003cem\u003eLazy-load \u003c/em\u003e\n\t\t\t\t\t\t\u003c/strong\u003e\n\t\t\t\t\t\tand create remaining routes on demand.\n\t\t\t\t\t\t\u003cbr /\u003e\n\t\t\t\t\t\t\u003ca href=\"https://www.gatsbyjs.com/docs/prpl-pattern/\"\u003e\n\t\t\t\t\t\t\thttps://www.gatsbyjs.com/docs/prpl-pattern/\n\t\t\t\t\t\t\u003c/a\u003e\n\t\t\t\t\t\u003c/li\u003e\n\t\t\t\t\t\u003cli\u003e\n\t\t\t\t\t\tGraphQL(ビルド時には json\n\t\t\t\t\t\tになっている)によるデータアクセスや画面遷移(これまた速い)\n\t\t\t\t\t\u003c/li\u003e\n\t\t\t\t\u003c/ul\u003e\n\t\t\t\t\u003cp\u003e\n\t\t\t\t\tGatsby で Markdown ファイルとかいい感じにしてくれますし、普通に React\n\t\t\t\t\tの仮想 DOM による高速化の恩恵も受けることできてます！\n\t\t\t\t\tかなりいい感じになってると思います！✨\n\t\t\t\t\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/Content\u003e\n\n\t\t\u003cPostPagination nextPost={props.nextPost} prevPost={props.prevPost} /\u003e\n\t\u003c/Main\u003e\n);\n\nexport const getStaticProps: GetStaticProps\u003cAboutProps\u003e = async () =\u003e ({\n\tprops: {\n\t\trecents: getRecentPosts(['title', 'date', 'slug']),\n\t\ttags: getTags(),\n\t\t...getPrevNextPost(__filename),\n\t},\n});\n\nexport default About;\n","tags":["JavaScript","TypeScript","React","Gatsby"],"category":"blog"},{"slug":"posts/network-specialist-examination","date":"2016-12-18T18:04:03+0900","draft":false,"title":"ネットワークスペシャリスト合格体験記","description":"念願のネットワークスペシャリストに合格しました！本当に念願で、というのも情報セキュリティスペシャリスト合格から今回で丸 2 年経っていて、今回合格できなければ午前 I 免除が終わってしまうところだったんです。…","content":"\r\n念願のネットワークスペシャリストに合格しました！\r\n本当に念願で、というのも情報セキュリティスペシャリスト合格から今回で丸 2 年経っていて、今回合格できなければ午前 I 免除が終わってしまうところだったんです。\r\n\r\nこちらが成績です。\r\n\r\n![ネットワークスペシャリスト成績](https://lh3.googleusercontent.com/pw/ACtC-3cJJG24p8M5wNBDBcGb4Bmc0njr2p2GzTuXB3z_7vwnC0FyW8ChvDTKkOH5SFB1fqS6jiFCkysXD53sSs5OOZ_67KRgHwIJ-vH_Pg6XSFM2JSZmDplgXH-WgtqPZRQ9qG9D7g59rYN7efbAoiJILXnnmA=w563-h351-no?authuser=0)\r\n60 点が合格ラインなので、ゆとりを持った合格となりました！\r\n\r\n2 年前の情報セキュリティスペシャリストの時は午前 I 免除、午前 II が 84 点、午後 I が 71 点、午後 II が 62 点と午後 II がギリギリでした。\r\nしかし今回は、午前 I が同じく免除で、午前 II が 72 点、午後 I が 70 点、午後 II が 72 点でした。いずれも 7 割超です！\r\nでは今回のネットワークスペシャリストが余裕だったかと言うとそうではなく、今回も非常に厳しい戦いとなりました。\r\n\r\n今後ネットワークスペシャリストに挑戦するみなさんの助けになるよう、自分の今回の勉強法を書いていきたいと思います。\r\n\r\n### 良い教本に出会う\r\n\r\n僕はネットワークスペシャリストに合格するのに 2 年かかりました。\r\n長い間お付き合いする本ですから、教本選びは大切です。\r\n僕は、定番のポケットスタディで勉強しました。「ポケットスタディ ネットワークスペシャリスト」で検索すれば出てくると思います。\r\nコンパクトなのでいつでも持ち歩けますし、外出先でも気軽に読めて便利です。\r\nポケットスタディだけで基礎を完璧にはできないかもしれませんが、必要知識のリストアップとして効果的です。\r\n不足知識や理解しきれない部分はネットで調べました。\r\nネットとポケットスタディで、常に勉強ができる状態を維持するところがポイントです。\r\n\r\nまた、過去問の解答の解説にはネスペの剣なども読みました。\r\n問題・解答は無料で公式サイトからダウンロードできますが、解説は別に必要です。\r\nただ、解説本に手を出すのもおそらく基礎を身に付けてからの話だと思います。\r\nそれに、基礎を身につける間にネットでわからないところを検索していると、いつの間にか解説なしでも問題を読めるようになっているものです。\r\nちなみに僕は BGP や OSPF などがピンと来ないのでそこらへんは本に頼りました。\r\n\r\nそれから、これまた定番の「3 Minutes Networking([http://www5e.biglobe.ne.jp/aji/3min/](http://www5e.biglobe.ne.jp/aji/3min/))」もオススメです。\r\nネットワーク技術をある程度体系的にまとめて教えてくれる貴重なサイトです。しかも 1 講座 3 分で読めるのだそうです(※読めません！)。\r\nぜひ読破に挑戦してみましょう！\r\n\r\n### 新しい技術を学ぶ\r\n\r\nデータベーススペシャリストは、新しい技術はあまり出てきません。出てきて NoSQL くらいです。データベーススペシャリストは話のわかるヤツです。\r\nけどネットワークスペシャリストはそんなの気にしません。\r\n今回、午後 II では STUN や WebRTC が問題に登場しました。\r\nWebSocket や、過去には OpenFlow も出ています。\r\n2013 年なんて午後 II の問 2 が丸々 OpenFlow だったので、OpenFlow をノーチェックだった人は問 1 しか選択肢が無く非常に不利な戦いとなったはずです。\r\n今こうしている間にも新しい技術はどんどん出現していますので、後学のためにも話題の新技術は怯まずぜひチェックしてゆきましょう。\r\n\r\n### 確実に基礎を固める\r\n\r\n上に書いたことと関連するのですが、新技術を学ぶことは、当然基礎を固めることから始まります。\r\n新技術もおおむね基礎の上に成り立っています。既存の技術をパッケージした AJAX のような例もありますし、また問題によっては、わからない技術がちょこっとあったとしても基礎ができていれば解ける問題もあります。\r\nネットワークスペシャリスト試験はネットワーク技術に絞った試験…と言われる範囲は狭いと思われがちですが、実際の所、ネットワーク技術がクライアントからサーバ、バックボーン、セキュリティまでも出るので範囲は広いです。ホントに途方もない範囲です。\r\nしかし、だいたいのネットワークは TCP/IP の上で動いているので TCP/IP さえ理解すれば問題文から解ける時もあります。\r\n試験問題は意外にも親切丁寧に書かれていたりします。基礎を固めておくだけで、チャンスはぐっと広がります。\r\n例えば今回受験した平成 28 年度から以下の問題です。\r\n\r\n\u003e 迷惑メールの送信を防止する対策として、OP25B(Outbound Port 25\r\n\u003e Blocking)のポリシでメールシステムを運用している。具体的には、自社が動的に割り当てた\r\n\u003e IP\r\n\u003e アドレスのホストから、自社のサービスネットワーク外のホストへの宛先ポート番号\r\n\u003e 25 の SMTP 通信を許可しないという運用上のルールを適用している。 (中略)B\r\n\u003e 社の PC から A 社のメールサーバへ SMTP\r\n\u003e によるメール送信ができたとしても、そのメールサーバは A\r\n\u003e 社のドメイン以外への宛先へはメールを転送しない設定となっている。\r\n\u003e この設定がないことによって生じる情報セキュリティ上のリスクを、25\r\n\u003e 字以内で答えよ (※平成 28 年度 ネットワークスペシャリスト試験午後 I\r\n\u003e 試験問題より引用・要約)\r\n\r\nこれは「第三者中継」に関する問題です。今時当たり前すぎて見逃しがちな「第三者中継」、だからなのか随分親切な問題文です。\r\n「第三者中継」という概念を知らなくとも、これだけ丁寧に説明されていれば、基礎をわかっていれば答えられるはずです。\r\n※もちろんこれは問題文から必要な箇所だけ抜きだしたものなので簡単そうに見えますが実際は何ページもある問題文からヒントを見つけなければいけません！\r\n\r\nちなみに解答は以下の通りです。\r\n\r\n\u003e 不正メールの踏み台にされてしまうリスク (※平成 28 年度\r\n\u003e ネットワークスペシャリスト試験午後 I 試験解答例より引用)\r\n\r\nこのように、基礎さえわかっていれば自力で解ける問題もあります。\r\nそれに基礎は実務では必須です。ぜひ幅広く身につけましょう。\r\niptables でルータを作ってみたり、Wireshark などで通信を覗いてみたりすると楽しいくて勉強にもなるのでおすすめです！\r\n\r\n### 過去問の解答例を学ぶ\r\n\r\n記述式の問題にはしばしば、なんて答えればいいか悩む問題があります。例えば同じく平成 28 年度から以下の問題です。\r\n\r\n\u003e ロードバランサは、通信の行きと戻りを同じ ISP\r\n\u003e 経由にするが、通信の行きと戻りが同じ ISP でない場合の問題を、社外から Web\r\n\u003e サーバへのアクセスを例に、IP アドレスという用語を用いて 40\r\n\u003e 文字以内で述べよ。 (※平成 28 年度 ネットワークスペシャリスト試験午後 II\r\n\u003e 試験問題より引用・要約)\r\n\r\nさて、困りました。こんなこと聞かれては。\r\n通信の行きと戻りで違う ISP でを使うと言われても、そんなことすればブラウザからホームページへアクセスしても、問い合わせしたところと全然違うところからレスポンスが横殴りで返ってくるわけです。\r\nESTABLISHED してないんですから、今時 NAPT やファイアーウォールでガチガチに守られている我々のブラウザには、戻りの通信は届きすらしなさそうです。\r\nなんと答えればいいでしょうか？\r\n「戻りの IP アドレスの通信がファイアーウォールで弾かれてしまう」でしょうか？\r\nそもそも「戻りの通信の IP アドレスが ESTABLISHED していない」でしょうか？\r\n\r\n解答を見てみましょう。\r\n\r\n\u003e 応答が行きの宛先 IP アドレスとは異なる送信元 IP アドレスから戻る。 (※平成\r\n\u003e 28 年度 ネットワークスペシャリスト試験午後 II 試験解答例より引用)\r\n\r\n根本的！\r\nそうなんです。解答に困ったら「で、実際のところなにが言いたいの？」というところを突き詰めてゆくと、自ずとシンプルな答えが出てくるはずです。\r\nこの問題は TCP/IP の知識があれば答えられますが、後半の問題は STUN も絡んできます。STUN ですよ！ワクワクしますよね？\r\nですがワクワクするからといって、例えば変に Skype 黎明期の苦労話などを知っていると「そもそも NAT 超えというのは〜〜」などと長々と講釈を書いてしまいそうになりますが、\r\nそれは心の中にそっと閉まっておくのが試験合格のため（そして普段の円滑な業務遂行のため）の秘訣です。\r\n◯◯ 文字以内という解答に求められているレベル感を掴むためにも、過去問はぜひ 1 度解いてみましょう。なんていったって過去問は公式サイトからダウンロード無料です。\r\n\r\n### 心を強く持つ\r\n\r\n最後になりましたが！\r\n諦めてはそこで試験終了です！\r\n僕は過去に何度も試験中諦めそうになった問題を気合で解いてきました！そしてそのうち半分くらいは合格してました！\r\n心を強く持って、挫けずにトライすることが大切です！\r\nがんばりましょう！僕もがんばります！次は春はデータベーススペシャリスト、秋はシステムアーキテクトかもしくは IT ストラテジストを受ける予定です！\r\n\r\nネットワークスペシャリストに合格したという話でした！\r\n","tags":["情報処理技術者試験","ネットワークスペシャリスト"],"category":"blog"},{"slug":"posts/hexo-themes-error","date":"2016-12-11T23:04:03+0900","draft":false,"title":"hexoのテーマを変更した時に、テーマだけデプロイされない","description":"このブログはHexoにて構築し、GitHub Pagesにて公開しています。先日、テーマを変更した際にテーマが正しく反映されず困ったので、今どうやって動いているかを覚え書きしておきます。…","content":"\r\nこのブログは[Hexo](https://hexo.io/)にて構築し、[GitHub Pages](https://pages.github.com/)にて公開しています。\r\n\r\n先日、テーマを変更した際にテーマが正しく反映されず困ったので、今どうやって動いているかを覚え書きしておきます。\r\n\r\n今回、ingenuous というテーマを利用したのですが、「hexo server」では正しく表示されるのに、確認後「hexo deploy -g」で GitHub Pages へデプロイするとレイアウトが崩れるという現象に見舞われました。\r\n\r\n```bash\r\n$ tree -L 2\r\n.\r\n├── _config.yml\r\n├── node_modules\r\n│   └── (省略)\r\n├── package.json\r\n├── public\r\n│   ├── 2016\r\n│   ├── about-me\r\n│   ├── archives\r\n│   ├── atom.xml\r\n│   ├── css\r\n│   ├── fancybox\r\n│   ├── index.html\r\n│   ├── js\r\n│   └── tags\r\n├── scaffolds\r\n│   └── (省略)\r\n├── source\r\n│   └── _posts\r\n└── themes\r\n    ├── ingenuous\r\n    └── landscape\r\n```\r\n\r\nこの、css らへんがブラウザから取得できておらず、どうやら記事ファイルだけ書き換わってデプロイされ、css はデプロイされず放置されている現象が置きてるっぽかったです。\r\nhexo deploy が public 内の更新を取得できていないのなら、全部消してしまえばいいじゃないということで、\r\n\r\n```bash\r\nhexo clean\r\nhexo deploy -g\r\n```\r\n\r\nで無事にレイアウトも含めてデプロイすることができました。\r\nちょっとネットで検索しても出てこなかったのでみなさまの助けになればという意味も含め覚え書きでした。\r\n","tags":["hexo"],"category":"blog"},{"slug":"posts/vim-crypt","date":"2016-12-04T09:04:03+0900","draft":false,"title":"Vimで暗号化","description":"Vim で暗号化を行うには、次の方法が用意されています。:set cryptmethod=blowfishこの blowfish の他に zip や、環境によっては blowfish2 が用意されています。使えるならばセキュリティの面から考えて blowfish2 を使うべきでしょう。…","content":"\r\nVim で暗号化を行うには、次の方法が用意されています。\r\n\r\n```vim\r\n:set cryptmethod=blowfish\r\n```\r\n\r\nこの blowfish の他に zip や、環境によっては blowfish2 が用意されています。使えるならばセキュリティの面から考えて blowfish2 を使うべきでしょう。\r\nしかしです。本当にセキュリティの面から考えると、blowfish の発展型である Twofish[※注：blowfish2 は Twofish ではありません](http://vim.1045645.n5.nabble.com/Blowfish2-td5726043.html)や AES 等の方がより良い選択肢なはずです。\r\n今回、Vim の暗号化機能に頼らず、自前で openssl を用いて AES にて暗号化・復号をしてみたいと思います。\r\n\r\n通常 vim で文章を保存するのには\r\n\r\n```vim\r\n:w\r\n```\r\n\r\nを行いますが、出力先を標準入力としてコマンドを実行することもできます。\r\nすなわち、openssl へ以下のように渡せば良いわけです。\r\n\r\n```vim\r\n:w !openssl aes-256-cbc -out ~/vim_enc_test_file\r\n```\r\n\r\n2 回パスワードを聞かれるため、それを入力すれば指定した場所(この場合は~/vim_enc_test_file)へ書き込まれます。\r\n\r\n復号する際は、Vim から\r\n\r\n```vim\r\n:r !openssl aes-256-cbc -d -in ~/vim_enc_test_file\r\n```\r\n\r\nとするか、もしくはコマンドラインから\r\n\r\n```bash\r\n$ cat ~/vim_enc_test_file | openssl aes-256-cbc -d | vim -\r\n```\r\n\r\nとします。\r\n\r\nただ、非常にイケてないことにこの書き込まれたファイルを text して見てみると、\r\n\r\n```text\r\n00000000  53 61 6c 74 65 64 5f 5f  04 12 0d 0c 9e e8 74 aa  |Salted__......t.|\r\n00000010  f6 60 00 e7 d1 60 7b 64  19 23 a5 ad 7f 4d 62 19  |.`...`{d.#...Mb.|\r\n\r\n```\r\n\r\nこのように、ファイルの頭に「Salted\\_\\_」の文字列が入るため、openssl にて暗号化したことはわかる人にはバレバレです。\r\nもっとも、Vim の暗号化機能でも以下のように、\r\n\r\n```text\r\n00000000  56 69 6d 43 72 79 70 74  7e 30 32 21 de 8b b9 db  |VimCrypt~02!....|\r\n00000010  03 c7 6b 23 86 e1 25 79  e7 ee 6c 5e 27 9d eb 58  |..k#..%y..l^'..X|\r\n00000020  f8                                                |.|\r\n```\r\n\r\n「VimCrypt~02!」という文字列が入るのでバレバレなのですが。\r\n\r\nこのバレバレなのをどうにかしたい時も、openssl でやる場合は簡単です。\r\n以下のように dd で 8 バイトスキップすれば「Salted\\_\\_」の文字列を消すことができます。\r\n\r\n```vim\r\n:w !openssl aes-256-cbc | dd ibs=8 skip=1 of=~/vim_enc_test_file\r\n```\r\n\r\nそうすると、以下のようなファイルが出力されます。\r\n\r\n```text\r\n00000000  92 3a 22 ce 3e 26 5a cf  26 6c da e5 3c ec e9 c6  |.:\".\u003e\u0026Z.\u0026l..\u003c...|\r\n00000010  ad 3b c1 47 13 d6 e9 d2                           |.;.G....|\r\n```\r\n\r\n当然、一見ランダムですから、ただの乱数ファイルにも見えますし、たとえ暗号化されたファイルだとわかったとしてもいったいなんのソフトで暗号化されたのかもわかりません。\r\n\r\n読み込みは以下のように行います。\r\n\r\n```vim\r\n:r !cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d\r\n```\r\n\r\n```bash\r\n$ cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d | vim -\r\n```\r\n\r\nちなみに圧縮もしてみましょう。書き込みは以下の通りです。\r\n\r\n```vim\r\n:w !bzip2 | openssl aes-256-cbc | dd ibs=8 skip=1 of=~/vim_enc_test_file\r\n```\r\n\r\n読み込みは以下の通りです。\r\n\r\n```vim\r\n:r !cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d | bzcat\r\n```\r\n\r\n```bash\r\n$ cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d | bzcat | vim -\r\n```\r\n\r\nさて、最後にあとひと押しです。\r\n「aes-256-cbc」はパスワードが間違っている場合にエラーを出します。CentOS6.8 の場合は以下のエラーとなります。\r\n\r\n```text\r\ndigital envelope routines:EVP_DecryptFinal_ex:wrong final block length\r\n```\r\n\r\nこれは、総当りで復号化を試みるクラッカーにとっては助けにもなってしまいます。なぜなら、パスワードが間違っていることがわかるためです。\r\nMac 等では使えませんが、「aes-256-cbc」の代わりに「aes-256-ofb」を使うことで解決されます。\r\n「aes-256-ofb」なら、パスワードが合っているのか間違っているのすらわかりません。\r\n書き込みは以下の通りです。\r\n\r\n```vim\r\n:w !bzip2 | openssl aes-256-ofb | dd ibs=8 skip=1 of=~/vim_enc_test_file\r\n```\r\n\r\n読み込みは以下の通りです。\r\n\r\n```vim\r\n:r !cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-ofb -d | bzcat\r\n```\r\n\r\n```bash\r\n$ cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-ofb -d | bzcat | vim -\r\n```\r\n\r\nパスワードが合っているのか間違っているのすらわからないというのは、つまりあなたのパスワードを突破しようとしても、パスワード 1 つ 1 つを確認しなければならないということです。\r\n人間には不可能ですし、機械的に判定しようにも非常に手をこまねくはずです。\r\n環境が許せばぜひやってみて下さい。\r\n\r\nVim と openssl で暗号化・復号をしようというお話でした。\r\nみなさんもぜひやってみて下さい。\r\n","tags":["Vim","OpenSSL"],"category":"blog"}],"tags":["Java","Ruby"],"prevPost":{"slug":"posts/vim-crypt","date":"2016-12-04T09:04:03+0900","draft":false,"title":"Vimで暗号化","description":"Vim で暗号化を行うには、次の方法が用意されています。:set cryptmethod=blowfishこの blowfish の他に zip や、環境によっては blowfish2 が用意されています。使えるならばセキュリティの面から考えて blowfish2 を使うべきでしょう。…","content":"\r\nVim で暗号化を行うには、次の方法が用意されています。\r\n\r\n```vim\r\n:set cryptmethod=blowfish\r\n```\r\n\r\nこの blowfish の他に zip や、環境によっては blowfish2 が用意されています。使えるならばセキュリティの面から考えて blowfish2 を使うべきでしょう。\r\nしかしです。本当にセキュリティの面から考えると、blowfish の発展型である Twofish[※注：blowfish2 は Twofish ではありません](http://vim.1045645.n5.nabble.com/Blowfish2-td5726043.html)や AES 等の方がより良い選択肢なはずです。\r\n今回、Vim の暗号化機能に頼らず、自前で openssl を用いて AES にて暗号化・復号をしてみたいと思います。\r\n\r\n通常 vim で文章を保存するのには\r\n\r\n```vim\r\n:w\r\n```\r\n\r\nを行いますが、出力先を標準入力としてコマンドを実行することもできます。\r\nすなわち、openssl へ以下のように渡せば良いわけです。\r\n\r\n```vim\r\n:w !openssl aes-256-cbc -out ~/vim_enc_test_file\r\n```\r\n\r\n2 回パスワードを聞かれるため、それを入力すれば指定した場所(この場合は~/vim_enc_test_file)へ書き込まれます。\r\n\r\n復号する際は、Vim から\r\n\r\n```vim\r\n:r !openssl aes-256-cbc -d -in ~/vim_enc_test_file\r\n```\r\n\r\nとするか、もしくはコマンドラインから\r\n\r\n```bash\r\n$ cat ~/vim_enc_test_file | openssl aes-256-cbc -d | vim -\r\n```\r\n\r\nとします。\r\n\r\nただ、非常にイケてないことにこの書き込まれたファイルを text して見てみると、\r\n\r\n```text\r\n00000000  53 61 6c 74 65 64 5f 5f  04 12 0d 0c 9e e8 74 aa  |Salted__......t.|\r\n00000010  f6 60 00 e7 d1 60 7b 64  19 23 a5 ad 7f 4d 62 19  |.`...`{d.#...Mb.|\r\n\r\n```\r\n\r\nこのように、ファイルの頭に「Salted\\_\\_」の文字列が入るため、openssl にて暗号化したことはわかる人にはバレバレです。\r\nもっとも、Vim の暗号化機能でも以下のように、\r\n\r\n```text\r\n00000000  56 69 6d 43 72 79 70 74  7e 30 32 21 de 8b b9 db  |VimCrypt~02!....|\r\n00000010  03 c7 6b 23 86 e1 25 79  e7 ee 6c 5e 27 9d eb 58  |..k#..%y..l^'..X|\r\n00000020  f8                                                |.|\r\n```\r\n\r\n「VimCrypt~02!」という文字列が入るのでバレバレなのですが。\r\n\r\nこのバレバレなのをどうにかしたい時も、openssl でやる場合は簡単です。\r\n以下のように dd で 8 バイトスキップすれば「Salted\\_\\_」の文字列を消すことができます。\r\n\r\n```vim\r\n:w !openssl aes-256-cbc | dd ibs=8 skip=1 of=~/vim_enc_test_file\r\n```\r\n\r\nそうすると、以下のようなファイルが出力されます。\r\n\r\n```text\r\n00000000  92 3a 22 ce 3e 26 5a cf  26 6c da e5 3c ec e9 c6  |.:\".\u003e\u0026Z.\u0026l..\u003c...|\r\n00000010  ad 3b c1 47 13 d6 e9 d2                           |.;.G....|\r\n```\r\n\r\n当然、一見ランダムですから、ただの乱数ファイルにも見えますし、たとえ暗号化されたファイルだとわかったとしてもいったいなんのソフトで暗号化されたのかもわかりません。\r\n\r\n読み込みは以下のように行います。\r\n\r\n```vim\r\n:r !cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d\r\n```\r\n\r\n```bash\r\n$ cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d | vim -\r\n```\r\n\r\nちなみに圧縮もしてみましょう。書き込みは以下の通りです。\r\n\r\n```vim\r\n:w !bzip2 | openssl aes-256-cbc | dd ibs=8 skip=1 of=~/vim_enc_test_file\r\n```\r\n\r\n読み込みは以下の通りです。\r\n\r\n```vim\r\n:r !cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d | bzcat\r\n```\r\n\r\n```bash\r\n$ cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-cbc -d | bzcat | vim -\r\n```\r\n\r\nさて、最後にあとひと押しです。\r\n「aes-256-cbc」はパスワードが間違っている場合にエラーを出します。CentOS6.8 の場合は以下のエラーとなります。\r\n\r\n```text\r\ndigital envelope routines:EVP_DecryptFinal_ex:wrong final block length\r\n```\r\n\r\nこれは、総当りで復号化を試みるクラッカーにとっては助けにもなってしまいます。なぜなら、パスワードが間違っていることがわかるためです。\r\nMac 等では使えませんが、「aes-256-cbc」の代わりに「aes-256-ofb」を使うことで解決されます。\r\n「aes-256-ofb」なら、パスワードが合っているのか間違っているのすらわかりません。\r\n書き込みは以下の通りです。\r\n\r\n```vim\r\n:w !bzip2 | openssl aes-256-ofb | dd ibs=8 skip=1 of=~/vim_enc_test_file\r\n```\r\n\r\n読み込みは以下の通りです。\r\n\r\n```vim\r\n:r !cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-ofb -d | bzcat\r\n```\r\n\r\n```bash\r\n$ cat \u003c(echo -ne Salted__) ~/vim_enc_test_file | openssl aes-256-ofb -d | bzcat | vim -\r\n```\r\n\r\nパスワードが合っているのか間違っているのすらわからないというのは、つまりあなたのパスワードを突破しようとしても、パスワード 1 つ 1 つを確認しなければならないということです。\r\n人間には不可能ですし、機械的に判定しようにも非常に手をこまねくはずです。\r\n環境が許せばぜひやってみて下さい。\r\n\r\nVim と openssl で暗号化・復号をしようというお話でした。\r\nみなさんもぜひやってみて下さい。\r\n","tags":["Vim","OpenSSL"],"category":"blog"},"nextPost":{"slug":"posts/hello-world","date":"2016-07-01T04:58:43+0900","draft":false,"title":"はじめまして","description":"はじめての投稿です。","content":"\r\nはじめての投稿です。\r\nこれから、なにか有益なことや無益なことを書いてゆこうと思います。\r\nよろしくお願いします。\r\n","tags":null,"category":"blog"},"mainTags":["SSH","AWS","GitHub","CSS","SVG","hexo","Java","Ruby","情報処理技術者試験","ネットワークスペシャリスト","Vim","OpenSSL","JavaScript","TypeScript","React","Gatsby","TypeScript","React"]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"java-combination"},"buildId":"lYCGLW7qHJv6NY91XbHKV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>