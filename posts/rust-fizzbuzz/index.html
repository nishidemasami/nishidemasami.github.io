<!DOCTYPE html><html lang="ja"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="manifest" href="/manifest.json"/><link rel="alternate" type="application/rss+xml" title="NISHIDEMASAMI.GITHUB.IO" href="/rss.xml"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="icon" href="/favicon.ico"/><title>RustでFizzBuzzを書く | NISHIDEMASAMI.GITHUB.IO</title><meta name="description" content="RustでFizzBuzzを書いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。"/><meta name="author" content="NISHIDE, Masami"/><meta property="og:title" content="RustでFizzBuzzを書く | NISHIDEMASAMI.GITHUB.IO"/><meta property="og:description" content="RustでFizzBuzzを書いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。"/><meta property="og:locale" content="ja"/><meta property="og:site_name" content="NISHIDEMASAMI.GITHUB.IO"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerPolicy="no-referrer"/><meta property="og:type" content="article"/><meta property="og:image" content="https://nishidemasami.github.io/assets/images/author.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta property="article:published_time" content="2022-12-30T19:58:43.000Z"/><script type="application/ld+json">
{
	"description": "RustでFizzBuzzを書いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。",
	"author": {
		"@type": "Person",
		"name": "NISHIDE, Masami"
	},
	"@type": "BlogPosting",
	"url": "https://nishidemasami.github.io/posts/rust-fizzbuzz/",
	"publisher": {
		"@type": "Organization",
		"logo": {
			"@type": "ImageObject",
			"url": "https://nishidemasami.github.io/assets/images/logo.png"
		},
		"name": "NISHIDE, Masami"
	},
	"headline": "RustでFizzBuzzを書く | NISHIDEMASAMI.GITHUB.IO",
	"image": ["https://nishidemasami.github.ionull"],
	"datePublished": "2022-12-30T19:58:43.000Z",
	"dateModified": "null",
	"mainEntityOfPage": {
		"@type": "WebPage",
		"@id": "https://nishidemasami.github.io/posts/rust-fizzbuzz/"
	},
	"@context": "http://schema.org"
}</script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/5c255d7bd8d406fd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5c255d7bd8d406fd.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-36d12a75f0098f30.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-b338f50018fba703.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d001a0c916934527.js" defer=""></script><script src="/_next/static/chunks/814-f83b2571d190bfbd.js" defer=""></script><script src="/_next/static/chunks/167-dc4bcc2fb801564d.js" defer=""></script><script src="/_next/static/chunks/857-b47e4468e46433a5.js" defer=""></script><script src="/_next/static/chunks/185-80027419834563f4.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-f3f6fcf1b72779fe.js" defer=""></script><script src="/_next/static/ILu97a9SvA9pE4iTx-rWu/_buildManifest.js" defer=""></script><script src="/_next/static/ILu97a9SvA9pE4iTx-rWu/_ssgManifest.js" defer=""></script><style id="__jsx-9545ae223766f4e1">.content.jsx-9545ae223766f4e1 h2{font-size:1.6em;border-bottom:1px solid#ddd;padding-bottom:.1em}.content.jsx-9545ae223766f4e1 li{list-style:circle}.content.jsx-9545ae223766f4e1 ul{-webkit-padding-start:40px;-moz-padding-start:40px;padding-inline-start:40px}.content.jsx-9545ae223766f4e1 blockquote{font-style:italic;padding:0;text-align:center;font-size:smaller}.content.jsx-9545ae223766f4e1 p code{background-color:#fafafa;font-style:italic;border-width:1px;border-color:#dedede;padding:.1rem}.content.jsx-9545ae223766f4e1 .shiki{-webkit-border-radius:.375rem;-moz-border-radius:.375rem;border-radius:.375rem;padding:0px 4px;margin:0px 4px;-webkit-box-shadow:0 4px 6px -1px rgb(0 0 0/.1),0 2px 4px -2px rgb(0 0 0/.1);-moz-box-shadow:0 4px 6px -1px rgb(0 0 0/.1),0 2px 4px -2px rgb(0 0 0/.1);box-shadow:0 4px 6px -1px rgb(0 0 0/.1),0 2px 4px -2px rgb(0 0 0/.1);overflow-x:auto;font-size:smaller;border-color:#d0d7de;border-width:1px;border-style:solid}.content.jsx-9545ae223766f4e1 code{counter-reset:code-step-counter}.content.jsx-9545ae223766f4e1 code .line::before{display:inline-block;content:counter(code-step-counter);counter-increment:code-step-counter;width:2.5rem;margin-right:1rem;text-align:right;font-variant-numeric:slashed-zero;color:#6e7781;padding-right:.5rem}.content.jsx-9545ae223766f4e1 .note.warn{background:#fdf9e2;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:16px;margin:24px 0}.content.jsx-9545ae223766f4e1 .note.alert{background:#feebee;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:16px;margin:24px 0}.content.jsx-9545ae223766f4e1 .note.warn .shiki{border-color:#f7a535}.content.jsx-9545ae223766f4e1 .note.alert .shiki{border-color:#d60a34}</style></head><body><div id="__next"><div class="antialiased w-full text-gray-700 md:px-0 sm:flex min-h-screen"><div class="mx-auto float-left px-3 w-full sm:w-3/4 lg:w-[calc(100vw-256px)] bg-slate-100 min-h-fit sm:min-h-screen"><div class="border-b border-gray-300 break-all text-center text-zinc-900 font-semibold block sm:hidden"><div class="pt-4 pb-8"><div class="font-semibold text-2xl text-gray-900"><a href="/">NISHIDEMASAMI.GITHUB.IO</a></div><div class="text-sm">個人のブログです。有益なことや無益なことなどいろいろ書いています。</div></div><div><ul class="navbar flex flex-wrap text-xl"><li class="mr-6"><a href="/">Home</a></li><li class="mr-6"><a href="/about/">About</a></li></ul></div></div><div class="text-base py-5"><h1 class="text-center font-bold text-3xl text-gray-900">RustでFizzBuzzを書く</h1><div class="text-center text-sm mb-4">December 31, 2022</div><ul class="flex flex-row flex-wrap list-none p-0 m-2 justify-start"><li class="px-2 py-1 m-1 rounded-full overflow-hidden shadow-md border-0 bg-white w-fit break-all"><a href="/tag/Rust/">#<!-- -->Rust</a></li><li class="px-2 py-1 m-1 rounded-full overflow-hidden shadow-md border-0 bg-white w-fit break-all"><a href="/tag/FizzBuzz/">#<!-- -->FizzBuzz</a></li></ul><div class="jsx-9545ae223766f4e1 content p-4 m-2 rounded-lg overflow-hidden shadow-md border-0 bg-white [&amp;_p]:my-6 [&amp;_ul]:my-6 [&amp;_*]:break-words [&amp;_h1]:text-3xl [&amp;_h1]:font-semibold [&amp;_h1]:text-gray-700 [&amp;_h1]:my-4 [&amp;_h2]:border-b [&amp;_h2]:text-2xl [&amp;_h2]:font-semibold [&amp;_h2]:text-gray-700 [&amp;_h2]:my-4 [&amp;_h3]:text-xl [&amp;_h3]:font-semibold [&amp;_h3]:text-gray-700 [&amp;_h3]:my-4"><div><p>RustでFizzBuzzを書いてみたいと思うこと、ありますよね。<br>
僕はあるので自分用にメモです。</p>
<p>なお、この記事を書くにあたって<a target="_blank" href="https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0Rust-%E7%AC%AC2%E7%89%88-Jim-Blandy/dp/4873119782?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&crid=16SB3SPXD9LVL&keywords=rust&qid=1672662058&sprefix=rust+%2Caps%2C261&sr=8-4&linkCode=ll1&tag=nishidemasami-22&linkId=5f2948f4e335959907e6a8b8e22b859d&language=ja_JP&ref_=as_li_ss_tl" rel="noreferrer" >プログラミングRust 第2版</a>を参考にしました。</p>
<p>とりあえず最初に結論を書いておきます。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">num</span><span style="color: #CF222E">::</span><span style="color: #953800">Zero</span><span style="color: #24292F">;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #24292F">fmt;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #953800">ops</span><span style="color: #CF222E">::</span><span style="color: #953800">Rem</span><span style="color: #24292F">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">pub</span><span style="color: #24292F"> </span><span style="color: #CF222E">enum</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">String</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Display</span><span style="color: #24292F"> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">fmt</span><span style="color: #24292F">(</span><span style="color: #CF222E">&#x26;</span><span style="color: #0550AE">self</span><span style="color: #24292F">, f</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;mut</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Formatter</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Result</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> </span><span style="color: #0550AE">self</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">for</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>以上のようになると思います。</p>
<p>以下、解説です。</p>
<p>まず、何も考えずにRustでFizzBuzzを書くと以下のようになると思います。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">main</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">for_each</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #0550AE">3</span><span style="color: #24292F">) </span><span style="color: #CF222E">==</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">, (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #0550AE">5</span><span style="color: #24292F">) </span><span style="color: #CF222E">==</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    })</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>ここからスタートしてゆきます。</p>
<p>最終的に、以下のようにすることをゴールとします。</p>
<ul>
<li>テスト可能</li>
<li>汎用的</li>
<li>ゼロコスト抽象化</li>
</ul>
<p>まずメソッドに分けてからテストを書きます。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">fizzbuzz</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">u32</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">String</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #0550AE">3</span><span style="color: #24292F">) </span><span style="color: #CF222E">==</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">, (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #0550AE">5</span><span style="color: #24292F">) </span><span style="color: #CF222E">==</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">) {</span></span>
<span class="line"><span style="color: #24292F">        (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">        (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #0A3069">"Fizz"</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">        (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #0A3069">"Buzz"</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">        _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">main</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(fizzbuzz)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">for_each</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">))</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">#[test]</span></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">test</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">let</span><span style="color: #24292F"> test_target</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Vec</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">String</span><span style="color: #24292F">> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(fizzbuzz)</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">collect</span><span style="color: #24292F">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">assert_eq!</span><span style="color: #24292F">(</span></span>
<span class="line"><span style="color: #24292F">        test_target,</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #8250DF">vec!</span><span style="color: #24292F">[</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"1"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"2"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"4"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"7"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"8"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"11"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"13"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"14"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">        ]</span></span>
<span class="line"><span style="color: #24292F">    );</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>次はこれをRustらしく、<code>enum</code>に<a href="https://doc.rust-lang.org/std/convert/trait.From.html"><code>std::convert::From</code></a>トレイトと<a href="https://doc.rust-lang.org/std/fmt/trait.Display.html"><code>fmt::Display</code></a>トレイトを実装した書き方にします。<br>
<a href="https://doc.rust-lang.org/std/convert/trait.From.html"><code>std::convert::From</code></a>トレイトの<a href="https://doc.rust-lang.org/std/convert/trait.From.html#tymethod.from"><code>from()</code></a>メソッドを実装すれば<a href="https://doc.rust-lang.org/std/convert/trait.Into.html"><code>std::convert::Into</code></a>トレイトの<a href="https://doc.rust-lang.org/std/convert/trait.Into.html#tymethod.into"><code>into()</code></a>メソッドが自動で実装され、<a href="https://doc.rust-lang.org/std/fmt/trait.Display.html"><code>fmt::Display</code></a>トレイトの<a href="https://doc.rust-lang.org/std/fmt/trait.Display.html#tymethod.fmt"><code>fmt()</code></a>メソッドを実装すれば<a href="https://doc.rust-lang.org/std/string/trait.ToString.html"><code>std::string::ToString</code></a>トレイトの<a href="https://doc.rust-lang.org/std/string/trait.ToString.html#tymethod.to_string"><code>to_string()</code></a>メソッドが自動で実装されます。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #24292F">fmt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">enum</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">String</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u32</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">u32</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #0550AE">3</span><span style="color: #24292F">) </span><span style="color: #CF222E">==</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">, (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #0550AE">5</span><span style="color: #24292F">) </span><span style="color: #CF222E">==</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Display</span><span style="color: #24292F"> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">fmt</span><span style="color: #24292F">(</span><span style="color: #CF222E">&#x26;</span><span style="color: #0550AE">self</span><span style="color: #24292F">, f</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;mut</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Formatter</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Result</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> </span><span style="color: #0550AE">self</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6E7781">// 以下はmain・テスト用</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">main</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">into</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">    } )</span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">String</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">    } )</span><span style="color: #CF222E">.</span><span style="color: #8250DF">for_each</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">))</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">#[test]</span></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">test</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">let</span><span style="color: #24292F"> test_target</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Vec</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">String</span><span style="color: #24292F">> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">into</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">        } )</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">String</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">        } )</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">collect</span><span style="color: #24292F">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">assert_eq!</span><span style="color: #24292F">(</span></span>
<span class="line"><span style="color: #24292F">        test_target,</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #8250DF">vec!</span><span style="color: #24292F">[</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"1"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"2"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"4"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"7"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"8"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"11"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"13"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"14"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">        ]</span></span>
<span class="line"><span style="color: #24292F">    );</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>ここで、<code>u32</code>では<code>4294967295</code>が最大値なのは心もとないので拡張可能にしたいと考えると思います。<br>
たとえば<code>u32</code>を<code>u128</code>にしたところで<code>340282366920938463463374607431768211455</code>が最大値です。<br>
これでは十分ではないので、もっと「抽象的な数値」を扱えるようにします。</p>
<p>fizzbuzz関数<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>を定義してみます。</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>FizzBuzz</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>3</mn><mo>=</mo><mn>0</mn><mo>∧</mo><mi>x</mi><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>5</mn><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Fizz</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>3</mn><mo>=</mo><mn>0</mn><mo>∧</mo><mi>x</mi><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>5</mn><mo mathvariant="normal">≠</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Buzz</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>3</mn><mo mathvariant="normal">≠</mo><mn>0</mn><mo>∧</mo><mi>x</mi><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>5</mn><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mtext>otherwize</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">f(x) =
\begin{cases}
  \text{FizzBuzz} &#x26; (x \bmod 3 = 0 \land x \bmod 5 = 0)\\
  \text{Fizz} &#x26; (x \bmod 3 = 0 \land x \bmod 5 \neq 0)\\
  \text{Buzz} &#x26; (x \bmod 3 \neq 0 \land x \bmod 5 = 0)\\
  x &#x26; (\text{otherwize})\\
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:5.76em;vertical-align:-2.63em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-1.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-1.592em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.916em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.916em" style="width:0.8889em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.916em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.916em" style="width:0.8889em" viewBox="0 0 888.89 916" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V916 H384z M384 0 H504 V916 H384z"></path></svg></span></span><span style="top:-5.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.13em;"><span style="top:-5.13em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">FizzBuzz</span></span></span></span><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">Fizz</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">Buzz</span></span></span></span><span style="top:-0.81em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.63em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.13em;"><span style="top:-5.13em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span><span style="top:-0.81em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mopen">(</span><span class="mord text"><span class="mord">otherwize</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.63em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>定義を冷静になって見てみると、<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span>に対する操作は「3で割る」「5で割る」「割った結果を0と比較する」「文字列に変換する」しかしていないことしかわかります。<br>
型で表すと以下のようなものです。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span></code></pre>
<p>つまり、<code>u8</code>で割ることができて0と比較できて文字列に変換できる値なら、どんな値でもFizzBuzzをすることができるのです。<br>
Cloneも合わせて先述の<code>from</code>は以下のように書けるのです。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">Clone</span><span style="color: #24292F"> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">clone</span><span style="color: #24292F">() </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">clone</span><span style="color: #24292F">() </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p><code>.clone()</code>を何度もするのはパフォーマンス上の観点から躊躇われますし、処理上特に所有権も必要としておらず借用で十分なので借用に修正すると、以下のようになります。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">, </span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<div class="note alert">
<p><i class="fontawesome fa fa-times-circle" style="color:#d60a34;font-size:20px;" aria-hidden="true"></i>もしここで以下のようにライフタイム<code>'a</code>の記述を書かないと…</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">, </span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>以下のようなエラーメッセージが出てしまいます。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292f">error[E0637]: `&#x26;` without an explicit lifetime name cannot be used here</span></span>
<span class="line"><span style="color: #24292f">  --> src\main.rs:42:5</span></span>
<span class="line"><span style="color: #24292f">   |</span></span>
<span class="line"><span style="color: #24292f">42 |     &#x26;T: Rem&#x3C;T, Output = U> + ToString,</span></span>
<span class="line"><span style="color: #24292f">   |     ^ explicit lifetime name needed here</span></span></code></pre>
<p>where句で<code>&#x26;</code>を使う必要があるならライフタイムを明示的に示さないといけないのです。</p>
</div>
<p>シンプルに書くのなら、ライフタイム<code>'a</code>は高階トレイト境界を用いて以下のような書き方をすることができます。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">for</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>これで完成です。</p>
<p><code>num::BigUint</code>などもこの<code>T</code>を満たすので、これで<code>u128</code>でも扱えないような大きな数字も以下のような感じで扱うことができるようになりました。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">num</span><span style="color: #CF222E">::</span><span style="color: #953800">Zero</span><span style="color: #24292F">;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #24292F">fmt;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #953800">ops</span><span style="color: #CF222E">::</span><span style="color: #953800">Rem</span><span style="color: #24292F">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">enum</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">String</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Display</span><span style="color: #24292F"> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">fmt</span><span style="color: #24292F">(</span><span style="color: #CF222E">&#x26;</span><span style="color: #0550AE">self</span><span style="color: #24292F">, f</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;mut</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Formatter</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Result</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> </span><span style="color: #0550AE">self</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">for</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;</span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6E7781">// 以下はmain・テスト用</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">num</span><span style="color: #CF222E">::</span><span style="color: #24292F">{</span><span style="color: #953800">BigUint</span><span style="color: #24292F">, </span><span style="color: #953800">Num</span><span style="color: #24292F">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">main</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">num_iter</span><span style="color: #CF222E">::</span><span style="color: #8250DF">range_inclusive</span><span style="color: #24292F">(</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #953800">BigUint</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from_str_radix</span><span style="color: #24292F">(</span><span style="color: #0A3069">"340282366920938463463374607431768211471"</span><span style="color: #24292F">, </span><span style="color: #0550AE">10</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">unwrap</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #953800">BigUint</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from_str_radix</span><span style="color: #24292F">(</span><span style="color: #0A3069">"340282366920938463463374607431768211485"</span><span style="color: #24292F">, </span><span style="color: #0550AE">10</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">unwrap</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">    )</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">BigUint</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">String</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">let</span><span style="color: #24292F"> fizzbuzz</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> (</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">into</span><span style="color: #24292F">();</span></span>
<span class="line"><span style="color: #24292F">        fizzbuzz</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">    })</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">.</span><span style="color: #8250DF">for_each</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">));</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">#[test]</span></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">test_bigint</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">let</span><span style="color: #24292F"> test_target</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Vec</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">String</span><span style="color: #24292F">> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">num_iter</span><span style="color: #CF222E">::</span><span style="color: #8250DF">range_inclusive</span><span style="color: #24292F">(</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #953800">BigUint</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from_str_radix</span><span style="color: #24292F">(</span><span style="color: #0A3069">"340282366920938463463374607431768211471"</span><span style="color: #24292F">, </span><span style="color: #0550AE">10</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">unwrap</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #953800">BigUint</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from_str_radix</span><span style="color: #24292F">(</span><span style="color: #0A3069">"340282366920938463463374607431768211485"</span><span style="color: #24292F">, </span><span style="color: #0550AE">10</span><span style="color: #24292F">)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">unwrap</span><span style="color: #24292F">(),</span></span>
<span class="line"><span style="color: #24292F">    )</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">let</span><span style="color: #24292F"> buffer</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> (</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">into</span><span style="color: #24292F">();</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">let</span><span style="color: #24292F"> buffer</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">String</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> buffer</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">();</span></span>
<span class="line"><span style="color: #24292F">        buffer</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">    })</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">.</span><span style="color: #8250DF">collect</span><span style="color: #24292F">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">assert_eq!</span><span style="color: #24292F">(</span></span>
<span class="line"><span style="color: #24292F">        test_target,</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #8250DF">vec!</span><span style="color: #24292F">[</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211471"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211472"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211474"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211477"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211478"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211481"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211483"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"340282366920938463463374607431768211484"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">        ]</span></span>
<span class="line"><span style="color: #24292F">    );</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">#[test]</span></span>
<span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">test</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">let</span><span style="color: #24292F"> test_target</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Vec</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">String</span><span style="color: #24292F">> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #CF222E">let</span><span style="color: #24292F"> buffer</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> (</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">into</span><span style="color: #24292F">();</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #CF222E">let</span><span style="color: #24292F"> buffer</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">String</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> buffer</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">();</span></span>
<span class="line"><span style="color: #24292F">            buffer</span><span style="color: #CF222E">.</span><span style="color: #8250DF">to_string</span><span style="color: #24292F">()</span></span>
<span class="line"><span style="color: #24292F">        })</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">collect</span><span style="color: #24292F">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">assert_eq!</span><span style="color: #24292F">(</span></span>
<span class="line"><span style="color: #24292F">        test_target,</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #8250DF">vec!</span><span style="color: #24292F">[</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"1"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"2"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"4"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"7"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"8"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"11"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"13"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #0A3069">"14"</span><span style="color: #24292F">, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">        ]</span></span>
<span class="line"><span style="color: #24292F">    );</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<div class="note warn">
<p><i class="fontawesome fa fa-exclamation-circle" style="color:#f7a535;font-size:20px;" aria-hidden="true"></i> ここで「そうだ！FizzBuzzのenumにString型ではなく<code>Box&#x3C;dyn 'a + ToString></code>型で動的な型の値を持たせればゼロコスト抽象化の恩恵も得られながらよりコンパイル時に最適化されるのでは？」と思うかもしれませんが…</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">num</span><span style="color: #CF222E">::</span><span style="color: #953800">Zero</span><span style="color: #24292F">;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #24292F">fmt;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #953800">ops</span><span style="color: #CF222E">::</span><span style="color: #953800">Rem</span><span style="color: #24292F">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">pub</span><span style="color: #24292F"> </span><span style="color: #CF222E">enum</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">Box</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">dyn</span><span style="color: #24292F"> '</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">>),</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Display</span><span style="color: #24292F"> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">fmt</span><span style="color: #24292F">(</span><span style="color: #CF222E">&#x26;</span><span style="color: #0550AE">self</span><span style="color: #24292F">, f</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;mut</span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Formatter</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #953800">Result</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> </span><span style="color: #0550AE">self</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">, </span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">></span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> '</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">ToString</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">let</span><span style="color: #24292F"> three </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">);</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> three)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">Box</span><span style="color: #CF222E">::</span><span style="color: #8250DF">new</span><span style="color: #24292F">(x)),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>しかし、実際にはBoxによるメモリ操作や動的ディスパッチによるオーバーヘッドもありますし、最終的に<code>to_string()</code>で文字列を生成しているのには変わりありませんから、メリットはあまりありません。</p>
<p>また、これを以下のような利用をしようとすると…</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">main</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">map</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> (</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x)</span><span style="color: #CF222E">.</span><span style="color: #8250DF">into</span><span style="color: #24292F">())</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">for_each</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"{}"</span><span style="color: #24292F">, x));</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>以下のようなエラーメッセージが出てしまいます。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292f">error[E0515]: cannot return value referencing function parameter `x`</span></span>
<span class="line"><span style="color: #24292f"> --> src\main.rs:7:18</span></span>
<span class="line"><span style="color: #24292f">  |</span></span>
<span class="line"><span style="color: #24292f">7 |         .map(|x| (&#x26;x).into())</span></span>
<span class="line"><span style="color: #24292f">  |                  ----^^^^^^^</span></span>
<span class="line"><span style="color: #24292f">  |                  |</span></span>
<span class="line"><span style="color: #24292f">  |                  returns a value referencing data owned by the current function</span></span>
<span class="line"><span style="color: #24292f">  |                  `x` is borrowed here</span></span></code></pre>
<p>クロージャ外から出た後までライフタイムを必要とするような処理はできないということです。<br>
これは、以下のようにクロージャ内で変数のライフタイムが尽きた後に参照しないように修正しなければなりません。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">main</span><span style="color: #24292F">() {</span></span>
<span class="line"><span style="color: #24292F">    (</span><span style="color: #0550AE">1</span><span style="color: #CF222E">..=</span><span style="color: #0550AE">15</span><span style="color: #24292F">)</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">.</span><span style="color: #8250DF">for_each</span><span style="color: #24292F">(</span><span style="color: #CF222E">|</span><span style="color: #24292F">x</span><span style="color: #CF222E">|</span><span style="color: #24292F"> </span><span style="color: #8250DF">println!</span><span style="color: #24292F">(</span><span style="color: #0A3069">"{}"</span><span style="color: #24292F">, </span><span style="color: #953800">Into</span><span style="color: #CF222E">::</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">></span><span style="color: #CF222E">::</span><span style="color: #8250DF">into</span><span style="color: #24292F">(</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x)));</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>もしくは所有権を要求してしまうという手もあります。所有権を得た後はライフタイムが伸びるのでこれは問題ありません。</p>
<pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">num</span><span style="color: #CF222E">::</span><span style="color: #953800">Zero</span><span style="color: #24292F">;</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #953800">fmt</span><span style="color: #CF222E">::</span><span style="color: #24292F">{</span><span style="color: #953800">Display</span><span style="color: #24292F">, </span><span style="color: #953800">Formatter</span><span style="color: #24292F">, </span><span style="color: #953800">Result</span><span style="color: #24292F">};</span></span>
<span class="line"><span style="color: #CF222E">use</span><span style="color: #24292F"> </span><span style="color: #953800">std</span><span style="color: #CF222E">::</span><span style="color: #953800">ops</span><span style="color: #CF222E">::</span><span style="color: #953800">Rem</span><span style="color: #24292F">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">enum</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">Box</span><span style="color: #24292F">&#x3C;</span><span style="color: #CF222E">dyn</span><span style="color: #24292F"> </span><span style="color: #953800">Display</span><span style="color: #24292F">>),</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F"> </span><span style="color: #953800">Display</span><span style="color: #24292F"> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">fmt</span><span style="color: #24292F">(</span><span style="color: #CF222E">&#x26;</span><span style="color: #0550AE">self</span><span style="color: #24292F">, f</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">&#x26;mut</span><span style="color: #24292F"> </span><span style="color: #953800">Formatter</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">Result</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> </span><span style="color: #0550AE">self</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Fizz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"Buzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"FizzBuzz"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">            </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(x) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #8250DF">write!</span><span style="color: #24292F">(f, </span><span style="color: #0A3069">"{x}"</span><span style="color: #24292F">),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CF222E">impl</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">U</span><span style="color: #24292F">> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">> </span><span style="color: #CF222E">for</span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span></span>
<span class="line"><span style="color: #CF222E">where</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">for</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> '</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">Display</span><span style="color: #24292F"> </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #953800">From</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">u8</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">for</span><span style="color: #24292F">&#x3C;'</span><span style="color: #953800">a</span><span style="color: #24292F">> </span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">'</span><span style="color: #953800">a</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Rem</span><span style="color: #24292F">&#x3C;</span><span style="color: #953800">T</span><span style="color: #24292F">, </span><span style="color: #953800">Output</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #953800">U</span><span style="color: #24292F">>,</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #953800">U</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">Zero</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">{</span></span>
<span class="line"><span style="color: #24292F">    </span><span style="color: #CF222E">fn</span><span style="color: #24292F"> </span><span style="color: #8250DF">from</span><span style="color: #24292F">(x</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #24292F">) </span><span style="color: #CF222E">-></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F"> {</span></span>
<span class="line"><span style="color: #24292F">        </span><span style="color: #CF222E">match</span><span style="color: #24292F"> ((</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">3</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">(), (</span><span style="color: #CF222E">&#x26;</span><span style="color: #24292F">x </span><span style="color: #CF222E">%</span><span style="color: #24292F"> </span><span style="color: #953800">T</span><span style="color: #CF222E">::</span><span style="color: #8250DF">from</span><span style="color: #24292F">(</span><span style="color: #0550AE">5</span><span style="color: #24292F">))</span><span style="color: #CF222E">.</span><span style="color: #8250DF">is_zero</span><span style="color: #24292F">()) {</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">FizzBuzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (</span><span style="color: #0550AE">true</span><span style="color: #24292F">, _) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Fizz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            (_, </span><span style="color: #0550AE">true</span><span style="color: #24292F">) </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #953800">Buzz</span><span style="color: #24292F">,</span></span>
<span class="line"><span style="color: #24292F">            _ </span><span style="color: #CF222E">=></span><span style="color: #24292F"> </span><span style="color: #953800">FizzBuzz</span><span style="color: #CF222E">::</span><span style="color: #8250DF">Number</span><span style="color: #24292F">(</span><span style="color: #953800">Box</span><span style="color: #CF222E">::</span><span style="color: #8250DF">new</span><span style="color: #24292F">(x)),</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre>
<p>以上のように書けますが、どちらにせよBoxによるメモリ操作や動的ディスパッチによるオーバーヘッドがあることには変わりありません。</p>
<p>このように、長いライフタイムを要求すると、後々取り扱いに苦労してしまうので、パフォーマンスや汎用性を天秤にかけて判断するようにしましょう。</p>
</div>
<p>RustでFizzBuzzを実装してみましたという話でした。</p></div></div><div class="text-sm flex justify-between"><div class="text-right ml-auto w-1/2">過去の記事 →<br/><a href="/articles/typescript-bitcoin/">Typescriptでビットコインアドレスを生成する</a></div></div></div><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&amp;p=288&amp;l=ur1&amp;category=amazonfresh&amp;banner=1BJRY423M3VZNDGD6QR2&amp;f=ifr&amp;linkID=a397c9c3ef85b520249e0b949c3458f8&amp;t=nishidemasami-22&amp;tracking_id=nishidemasami-22" width="320" height="50" scrolling="no" marginWidth="0" class="border-none border-0 m-auto" frameBorder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"></iframe></div><div class="w-full sm:w-1/4 lg:w-[256px] float-right sm:sticky shadow-md sm:h-full sm:flex sm:top-auto sm:self-end sm:bottom-0 min-h-fit sm:min-h-screen"><div class="relative p-4"><a class="break-all" href="/">NISHIDEMASAMI.GITHUB.IO</a><div><p class="text-zinc-800 text-xs my-2">個人のブログです。有益なことや無益なことなどいろいろ書いています。</p><a href="/about/"><img src="/assets/images/author.jpg" class="inline-block m-0 rounded-full bg-clip-padding object-cover" width="75" height="75" alt="NISHIDE, Masami"/></a></div><nav class="my-6"><ul class="list-none p-0 m-0 "><li class="p-0 mx-0 my-2"><a href="/about/">このサイトについて</a></li></ul></nav><nav class="my-6 border-t border-t-slate-200 relative">おすすめの記事<ul class="m-0 p-0 border-0 list-[circle] ml-5"><li class="m-0 text-sm"><a href="/posts/nextjs-mermaid/">Next.jsでSSG時にRemarkでMermaidをSVGとして出力する</a></li><li class="m-0 text-sm"><a href="/posts/svg-prayer-wheel/">SVGとCSSだけでマニ車をクルクル回して自動で徳を積む</a></li><li class="m-0 text-sm"><a href="/articles/react-sound-test/">Reactでホワイトノイズを鳴らす</a></li></ul></nav><nav class="my-6 border-t border-t-slate-200 relative">最新の記事<ul class="m-0 p-0 border-0 list-[circle] ml-5"><li class="m-0 text-sm"><a href="/posts/rust-fizzbuzz/">RustでFizzBuzzを書く</a></li><li class="m-0 text-sm"><a href="/articles/typescript-bitcoin/">Typescriptでビットコインアドレスを生成する</a></li><li class="m-0 text-sm"><a href="/posts/nextjs-mermaid/">Next.jsでSSG時にRemarkでMermaidをSVGとして出力する</a></li><li class="m-0 text-sm"><a href="/posts/svg-prayer-wheel/">SVGだけで作ったSVGマニ車をCSSでクルクル回して自動で徳を積む</a></li><li class="m-0 text-sm"><a href="/posts/google-colab-github/">Google ColaboratoryでGitHubのipynbファイルを開く</a></li><li class="m-0 text-sm"><a href="/posts/nextjs-latex/">Next.jsで数式を書く</a></li><li class="m-0 text-sm"><a href="/posts/gen_ed25519_key/">ED25519の鍵を生成する</a></li><li class="m-0 text-sm"><a href="/posts/check_github_repository_size/">GitHubのレポジトリサイズを確認する</a></li><li class="m-0 text-sm"><a href="/posts/nextjs-website-renewal/">Next.jsでこのウェブサイトをリニューアルしました！✨</a></li><li class="m-0 text-sm"><a href="/posts/css-svg-rotate-text/">SVGとCSSだけで文字をクルクル回す</a></li></ul></nav><nav class="my-6 border-t border-t-slate-200 relative">タグ<ul class="m-0 p-0 border-0 list-[circle] ml-5"><li class="m-0 text-sm"><a href="/tag/AWS/">AWS<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Bitcoin/">Bitcoin<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/CSS/">CSS<!-- -->(<!-- -->2<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/ED25519/">ED25519<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/FizzBuzz/">FizzBuzz<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Gatsby/">Gatsby<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/GitHub/">GitHub<!-- -->(<!-- -->2<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/GitHub%20Actions/">GitHub Actions<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Google%20Colaboratory/">Google Colaboratory<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Java/">Java<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/JavaScript/">JavaScript<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/KaTeX/">KaTeX<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/LaTeX/">LaTeX<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Markdown/">Markdown<!-- -->(<!-- -->2<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Mermaid/">Mermaid<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Next.js">Next.js<!-- -->(<!-- -->3<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/OpenSSL/">OpenSSL<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/React/">React<!-- -->(<!-- -->3<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Remark/">Remark<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Ruby/">Ruby<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Rust/">Rust<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/SSG/">SSG<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/SSH/">SSH<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/SVG/">SVG<!-- -->(<!-- -->3<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/TypeScript/">TypeScript<!-- -->(<!-- -->3<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/Vim/">Vim<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/hexo/">hexo<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/remark-mermaidjs/">remark-mermaidjs<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%B9%E3%83%9A%E3%82%B7%E3%83%A3%E3%83%AA%E3%82%B9%E3%83%88/">ネットワークスペシャリスト<!-- -->(<!-- -->1<!-- -->)</a></li><li class="m-0 text-sm"><a href="/tag/%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93/">情報処理技術者試験<!-- -->(<!-- -->1<!-- -->)</a></li></ul></nav><iframe sandbox="allow-popups allow-scripts allow-modals allow-forms allow-same-origin" class="w-[120px] h-[240px]" marginWidth="0" marginHeight="0" scrolling="no" frameBorder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=nishidemasami-22&amp;language=ja_JP&amp;o=9&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=4873119049&amp;linkId=bde5cca3913d36adf925bdcbb0553b61"></iframe><div class="my-6 border-t border-[#dedede]"><ul class="flex flex-row flex-wrap grow-0 shrink-0 list-none p-0 mx-[-3px] my-2 justify-start"><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="mailto:nishidemasami@gmail.com" rel="noopener noreferrer" target="_blank"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 28 28"><title>email</title><path d="M26 23.5v-12c-0.328 0.375-0.688 0.719-1.078 1.031-2.234 1.719-4.484 3.469-6.656 5.281-1.172 0.984-2.625 2.188-4.25 2.188h-0.031c-1.625 0-3.078-1.203-4.25-2.188-2.172-1.813-4.422-3.563-6.656-5.281-0.391-0.313-0.75-0.656-1.078-1.031v12c0 0.266 0.234 0.5 0.5 0.5h23c0.266 0 0.5-0.234 0.5-0.5zM26 7.078c0-0.391 0.094-1.078-0.5-1.078h-23c-0.266 0-0.5 0.234-0.5 0.5 0 1.781 0.891 3.328 2.297 4.438 2.094 1.641 4.188 3.297 6.266 4.953 0.828 0.672 2.328 2.109 3.422 2.109h0.031c1.094 0 2.594-1.437 3.422-2.109 2.078-1.656 4.172-3.313 6.266-4.953 1.016-0.797 2.297-2.531 2.297-3.859zM28 6.5v17c0 1.375-1.125 2.5-2.5 2.5h-23c-1.375 0-2.5-1.125-2.5-2.5v-17c0-1.375 1.125-2.5 2.5-2.5h23c1.375 0 2.5 1.125 2.5 2.5z"></path></svg></a></li><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.facebook.com/masaminish" rel="noopener noreferrer" target="_blank"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 16 28"><title>facebook</title><path d="M14.984 0.187v4.125h-2.453c-1.922 0-2.281 0.922-2.281 2.25v2.953h4.578l-0.609 4.625h-3.969v11.859h-4.781v-11.859h-3.984v-4.625h3.984v-3.406c0-3.953 2.422-6.109 5.953-6.109 1.687 0 3.141 0.125 3.563 0.187z"></path></svg></a></li><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.twitter.com/nishidemasami" rel="noopener noreferrer" target="_blank"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 26 28"><title>twitter</title><path d="M25.312 6.375c-0.688 1-1.547 1.891-2.531 2.609 0.016 0.219 0.016 0.438 0.016 0.656 0 6.672-5.078 14.359-14.359 14.359-2.859 0-5.516-0.828-7.75-2.266 0.406 0.047 0.797 0.063 1.219 0.063 2.359 0 4.531-0.797 6.266-2.156-2.219-0.047-4.078-1.5-4.719-3.5 0.313 0.047 0.625 0.078 0.953 0.078 0.453 0 0.906-0.063 1.328-0.172-2.312-0.469-4.047-2.5-4.047-4.953v-0.063c0.672 0.375 1.453 0.609 2.281 0.641-1.359-0.906-2.25-2.453-2.25-4.203 0-0.938 0.25-1.797 0.688-2.547 2.484 3.062 6.219 5.063 10.406 5.281-0.078-0.375-0.125-0.766-0.125-1.156 0-2.781 2.25-5.047 5.047-5.047 1.453 0 2.766 0.609 3.687 1.594 1.141-0.219 2.234-0.641 3.203-1.219-0.375 1.172-1.172 2.156-2.219 2.781 1.016-0.109 2-0.391 2.906-0.781z"></path></svg></a></li><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://github.com/nishidemasami" rel="noopener noreferrer" target="_blank"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 26 28"><title>github</title><path d="M10 19c0 1.141-0.594 3-2 3s-2-1.859-2-3 0.594-3 2-3 2 1.859 2 3zM20 19c0 1.141-0.594 3-2 3s-2-1.859-2-3 0.594-3 2-3 2 1.859 2 3zM22.5 19c0-2.391-1.453-4.5-4-4.5-1.031 0-2.016 0.187-3.047 0.328-0.812 0.125-1.625 0.172-2.453 0.172s-1.641-0.047-2.453-0.172c-1.016-0.141-2.016-0.328-3.047-0.328-2.547 0-4 2.109-4 4.5 0 4.781 4.375 5.516 8.188 5.516h2.625c3.813 0 8.188-0.734 8.188-5.516zM26 16.25c0 1.734-0.172 3.578-0.953 5.172-2.063 4.172-7.734 4.578-11.797 4.578-4.125 0-10.141-0.359-12.281-4.578-0.797-1.578-0.969-3.437-0.969-5.172 0-2.281 0.625-4.438 2.125-6.188-0.281-0.859-0.422-1.766-0.422-2.656 0-1.172 0.266-2.344 0.797-3.406 2.469 0 4.047 1.078 5.922 2.547 1.578-0.375 3.203-0.547 4.828-0.547 1.469 0 2.953 0.156 4.375 0.5 1.859-1.453 3.437-2.5 5.875-2.5 0.531 1.062 0.797 2.234 0.797 3.406 0 0.891-0.141 1.781-0.422 2.625 1.5 1.766 2.125 3.938 2.125 6.219z"></path></svg></a></li><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.linkedin.com/in/masami-nishide-66820bb2" rel="noopener noreferrer" target="_blank"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 24 24"><title>linkedin</title><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></a></li><li class="h-8 w-8 flex p-0 m-1 items-center content-center justify-center leading-8 rounded-full text-center border border-gray-400"><a class="border-0 flex text-gray-800 hover:text-gray-600" href="https://www.instagram.com/nishidemasami" rel="noopener noreferrer" target="_blank"><svg class="inline-block w-4 h-4 stroke-0 stroke-current fill-current not-italic font-normal mx-[0.2em] text-center normal-nums normal-case text-xs antialiased" viewBox="0 0 24 24"><title>instagram</title><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a></li></ul></div><div class="text-xs text-[#b6b6b6]">©NISHIDE, Masami All rights reserved.</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"RustでFizzBuzzを書く","description":"RustでFizzBuzzを書いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。","date":"2022-12-31T04:58:43+0900","modified_date":null,"image":null,"content":"\u003cp\u003eRustでFizzBuzzを書いてみたいと思うこと、ありますよね。\u003cbr\u003e\n僕はあるので自分用にメモです。\u003c/p\u003e\n\u003cp\u003eなお、この記事を書くにあたって\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0Rust-%E7%AC%AC2%E7%89%88-Jim-Blandy/dp/4873119782?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A\u0026crid=16SB3SPXD9LVL\u0026keywords=rust\u0026qid=1672662058\u0026sprefix=rust+%2Caps%2C261\u0026sr=8-4\u0026linkCode=ll1\u0026tag=nishidemasami-22\u0026linkId=5f2948f4e335959907e6a8b8e22b859d\u0026language=ja_JP\u0026ref_=as_li_ss_tl\" rel=\"noreferrer\" \u003eプログラミングRust 第2版\u003c/a\u003eを参考にしました。\u003c/p\u003e\n\u003cp\u003eとりあえず最初に結論を書いておきます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003efmt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eops\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003epub\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003eenum\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, f\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFormatter\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eResult\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e以上のようになると思います。\u003c/p\u003e\n\u003cp\u003e以下、解説です。\u003c/p\u003e\n\u003cp\u003eまず、何も考えずにRustでFizzBuzzを書くと以下のようになると思います。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efor_each\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eここからスタートしてゆきます。\u003c/p\u003e\n\u003cp\u003e最終的に、以下のようにすることをゴールとします。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eテスト可能\u003c/li\u003e\n\u003cli\u003e汎用的\u003c/li\u003e\n\u003cli\u003eゼロコスト抽象化\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eまずメソッドに分けてからテストを書きます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efizzbuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu32\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(fizzbuzz)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efor_each\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e#[test]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e test_target\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eVec\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(fizzbuzz)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ecollect\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eassert_eq!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        test_target,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003evec!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e[\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"1\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"2\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"4\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"7\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"8\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"11\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"13\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"14\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e次はこれをRustらしく、\u003ccode\u003eenum\u003c/code\u003eに\u003ca href=\"https://doc.rust-lang.org/std/convert/trait.From.html\"\u003e\u003ccode\u003estd::convert::From\u003c/code\u003e\u003c/a\u003eトレイトと\u003ca href=\"https://doc.rust-lang.org/std/fmt/trait.Display.html\"\u003e\u003ccode\u003efmt::Display\u003c/code\u003e\u003c/a\u003eトレイトを実装した書き方にします。\u003cbr\u003e\n\u003ca href=\"https://doc.rust-lang.org/std/convert/trait.From.html\"\u003e\u003ccode\u003estd::convert::From\u003c/code\u003e\u003c/a\u003eトレイトの\u003ca href=\"https://doc.rust-lang.org/std/convert/trait.From.html#tymethod.from\"\u003e\u003ccode\u003efrom()\u003c/code\u003e\u003c/a\u003eメソッドを実装すれば\u003ca href=\"https://doc.rust-lang.org/std/convert/trait.Into.html\"\u003e\u003ccode\u003estd::convert::Into\u003c/code\u003e\u003c/a\u003eトレイトの\u003ca href=\"https://doc.rust-lang.org/std/convert/trait.Into.html#tymethod.into\"\u003e\u003ccode\u003einto()\u003c/code\u003e\u003c/a\u003eメソッドが自動で実装され、\u003ca href=\"https://doc.rust-lang.org/std/fmt/trait.Display.html\"\u003e\u003ccode\u003efmt::Display\u003c/code\u003e\u003c/a\u003eトレイトの\u003ca href=\"https://doc.rust-lang.org/std/fmt/trait.Display.html#tymethod.fmt\"\u003e\u003ccode\u003efmt()\u003c/code\u003e\u003c/a\u003eメソッドを実装すれば\u003ca href=\"https://doc.rust-lang.org/std/string/trait.ToString.html\"\u003e\u003ccode\u003estd::string::ToString\u003c/code\u003e\u003c/a\u003eトレイトの\u003ca href=\"https://doc.rust-lang.org/std/string/trait.ToString.html#tymethod.to_string\"\u003e\u003ccode\u003eto_string()\u003c/code\u003e\u003c/a\u003eメソッドが自動で実装されます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003efmt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eenum\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu32\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu32\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e==\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, f\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFormatter\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eResult\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6E7781\"\u003e// 以下はmain・テスト用\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    } )\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    } )\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efor_each\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e#[test]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e test_target\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eVec\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        } )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        } )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ecollect\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eassert_eq!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        test_target,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003evec!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e[\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"1\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"2\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"4\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"7\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"8\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"11\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"13\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"14\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eここで、\u003ccode\u003eu32\u003c/code\u003eでは\u003ccode\u003e4294967295\u003c/code\u003eが最大値なのは心もとないので拡張可能にしたいと考えると思います。\u003cbr\u003e\nたとえば\u003ccode\u003eu32\u003c/code\u003eを\u003ccode\u003eu128\u003c/code\u003eにしたところで\u003ccode\u003e340282366920938463463374607431768211455\u003c/code\u003eが最大値です。\u003cbr\u003e\nこれでは十分ではないので、もっと「抽象的な数値」を扱えるようにします。\u003c/p\u003e\n\u003cp\u003efizzbuzz関数\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ef(x)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eを定義してみます。\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ef\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmrow\u003e\u003cmo fence=\"true\"\u003e{\u003c/mo\u003e\u003cmtable rowspacing=\"0.36em\" columnalign=\"left left\" columnspacing=\"1em\"\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmtext\u003eFizzBuzz\u003c/mtext\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo lspace=\"0.22em\" rspace=\"0.22em\"\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003em\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003eo\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmn\u003e3\u003c/mn\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo\u003e∧\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo lspace=\"0.22em\" rspace=\"0.22em\"\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003em\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003eo\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmn\u003e5\u003c/mn\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmtext\u003eFizz\u003c/mtext\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo lspace=\"0.22em\" rspace=\"0.22em\"\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003em\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003eo\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmn\u003e3\u003c/mn\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo\u003e∧\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo lspace=\"0.22em\" rspace=\"0.22em\"\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003em\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003eo\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmn\u003e5\u003c/mn\u003e\u003cmo mathvariant=\"normal\"\u003e≠\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmtext\u003eBuzz\u003c/mtext\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo lspace=\"0.22em\" rspace=\"0.22em\"\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003em\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003eo\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmn\u003e3\u003c/mn\u003e\u003cmo mathvariant=\"normal\"\u003e≠\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo\u003e∧\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo lspace=\"0.22em\" rspace=\"0.22em\"\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003em\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003eo\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmn\u003e5\u003c/mn\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"false\"\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmtext\u003eotherwize\u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003c/mtable\u003e\u003c/mrow\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ef(x) =\n\\begin{cases}\n  \\text{FizzBuzz} \u0026#x26; (x \\bmod 3 = 0 \\land x \\bmod 5 = 0)\\\\\n  \\text{Fizz} \u0026#x26; (x \\bmod 3 = 0 \\land x \\bmod 5 \\neq 0)\\\\\n  \\text{Buzz} \u0026#x26; (x \\bmod 3 \\neq 0 \\land x \\bmod 5 = 0)\\\\\n  x \u0026#x26; (\\text{otherwize})\\\\\n\\end{cases}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10764em;\"\u003ef\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:5.76em;vertical-align:-2.63em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e\u003cspan class=\"mopen\"\u003e\u003cspan class=\"delimsizing mult\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:2.95em;\"\u003e\u003cspan style=\"top:-1.6em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎩\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-1.592em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.15em;\"\u003e\u003c/span\u003e\u003cspan style=\"height:0.916em;width:0.8889em;\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.8889em\" height=\"0.916em\" style=\"width:0.8889em\" viewBox=\"0 0 888.89 916\" preserveAspectRatio=\"xMinYMin\"\u003e\u003cpath d=\"M384 0 H504 V916 H384z M384 0 H504 V916 H384z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.15em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎨\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-4.292em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.15em;\"\u003e\u003c/span\u003e\u003cspan style=\"height:0.916em;width:0.8889em;\"\u003e\u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"0.8889em\" height=\"0.916em\" style=\"width:0.8889em\" viewBox=\"0 0 888.89 916\" preserveAspectRatio=\"xMinYMin\"\u003e\u003cpath d=\"M384 0 H504 V916 H384z M384 0 H504 V916 H384z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-5.2em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎧\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:2.45em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mtable\"\u003e\u003cspan class=\"col-align-l\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:3.13em;\"\u003e\u003cspan style=\"top:-5.13em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.69em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eFizz\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.25em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eBuzz\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-0.81em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:2.63em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"arraycolsep\" style=\"width:1em;\"\u003e\u003c/span\u003e\u003cspan class=\"col-align-l\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:3.13em;\"\u003e\u003cspan style=\"top:-5.13em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathrm\"\u003emod\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e3\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∧\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathrm\"\u003emod\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e5\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.69em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathrm\"\u003emod\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e3\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∧\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathrm\"\u003emod\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e5\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u003cspan class=\"mrel\"\u003e\u003cspan class=\"mord vbox\"\u003e\u003cspan class=\"thinbox\"\u003e\u003cspan class=\"rlap\"\u003e\u003cspan class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"inner\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mrel\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"fix\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.25em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathrm\"\u003emod\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e3\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u003cspan class=\"mrel\"\u003e\u003cspan class=\"mord vbox\"\u003e\u003cspan class=\"thinbox\"\u003e\u003cspan class=\"rlap\"\u003e\u003cspan class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"inner\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mrel\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"fix\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e∧\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathrm\"\u003emod\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.0556em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e5\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-0.81em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.008em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eotherwize\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:2.63em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e定義を冷静になって見てみると、\u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.4306em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003eに対する操作は「3で割る」「5で割る」「割った結果を0と比較する」「文字列に変換する」しかしていないことしかわかります。\u003cbr\u003e\n型で表すと以下のようなものです。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eつまり、\u003ccode\u003eu8\u003c/code\u003eで割ることができて0と比較できて文字列に変換できる値なら、どんな値でもFizzBuzzをすることができるのです。\u003cbr\u003e\nCloneも合わせて先述の\u003ccode\u003efrom\u003c/code\u003eは以下のように書けるのです。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eClone\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eclone\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eclone\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e.clone()\u003c/code\u003eを何度もするのはパフォーマンス上の観点から躊躇われますし、処理上特に所有権も必要としておらず借用で十分なので借用に修正すると、以下のようになります。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"note alert\"\u003e\n\u003cp\u003e\u003ci class=\"fontawesome fa fa-times-circle\" style=\"color:#d60a34;font-size:20px;\" aria-hidden=\"true\"\u003e\u003c/i\u003eもしここで以下のようにライフタイム\u003ccode\u003e'a\u003c/code\u003eの記述を書かないと…\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e以下のようなエラーメッセージが出てしまいます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003eerror[E0637]: `\u0026#x26;` without an explicit lifetime name cannot be used here\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e  --\u003e src\\main.rs:42:5\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e   |\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e42 |     \u0026#x26;T: Rem\u0026#x3C;T, Output = U\u003e + ToString,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e   |     ^ explicit lifetime name needed here\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewhere句で\u003ccode\u003e\u0026#x26;\u003c/code\u003eを使う必要があるならライフタイムを明示的に示さないといけないのです。\u003c/p\u003e\n\u003c/div\u003e\n\u003cp\u003eシンプルに書くのなら、ライフタイム\u003ccode\u003e'a\u003c/code\u003eは高階トレイト境界を用いて以下のような書き方をすることができます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれで完成です。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003enum::BigUint\u003c/code\u003eなどもこの\u003ccode\u003eT\u003c/code\u003eを満たすので、これで\u003ccode\u003eu128\u003c/code\u003eでも扱えないような大きな数字も以下のような感じで扱うことができるようになりました。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003efmt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eops\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eenum\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, f\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFormatter\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eResult\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6E7781\"\u003e// 以下はmain・テスト用\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBigUint\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eNum\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum_iter\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003erange_inclusive\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBigUint\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom_str_radix\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211471\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eunwrap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBigUint\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom_str_radix\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211485\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eunwrap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBigUint\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e fizzbuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        fizzbuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efor_each\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e));\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e#[test]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003etest_bigint\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e test_target\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eVec\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum_iter\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003erange_inclusive\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBigUint\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom_str_radix\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211471\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eunwrap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBigUint\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom_str_radix\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211485\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e10\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eunwrap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ecollect\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eassert_eq!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        test_target,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003evec!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e[\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211471\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211472\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211474\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211477\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211478\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211481\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211483\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"340282366920938463463374607431768211484\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e#[test]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003etest\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e test_target\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eVec\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            buffer\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eto_string\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ecollect\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eassert_eq!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        test_target,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003evec!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e[\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"1\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"2\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"4\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"7\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"8\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"11\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"13\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"14\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"note warn\"\u003e\n\u003cp\u003e\u003ci class=\"fontawesome fa fa-exclamation-circle\" style=\"color:#f7a535;font-size:20px;\" aria-hidden=\"true\"\u003e\u003c/i\u003e ここで「そうだ！FizzBuzzのenumにString型ではなく\u003ccode\u003eBox\u0026#x3C;dyn 'a + ToString\u003e\u003c/code\u003e型で動的な型の値を持たせればゼロコスト抽象化の恩恵も得られながらよりコンパイル時に最適化されるのでは？」と思うかもしれませんが…\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003efmt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eops\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003epub\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003eenum\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBox\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003edyn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e '\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, f\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFormatter\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eResult\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e '\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eToString\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003elet\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e three \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e three)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (x \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBox\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x)),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eしかし、実際にはBoxによるメモリ操作や動的ディスパッチによるオーバーヘッドもありますし、最終的に\u003ccode\u003eto_string()\u003c/code\u003eで文字列を生成しているのには変わりありませんから、メリットはあまりありません。\u003c/p\u003e\n\u003cp\u003eまた、これを以下のような利用をしようとすると…\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emap\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex)\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efor_each\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, x));\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e以下のようなエラーメッセージが出てしまいます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003eerror[E0515]: cannot return value referencing function parameter `x`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e --\u003e src\\main.rs:7:18\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e  |\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e7 |         .map(|x| (\u0026#x26;x).into())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e  |                  ----^^^^^^^\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e  |                  |\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e  |                  returns a value referencing data owned by the current function\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292f\"\u003e  |                  `x` is borrowed here\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eクロージャ外から出た後までライフタイムを必要とするような処理はできないということです。\u003cbr\u003e\nこれは、以下のようにクロージャ内で変数のライフタイムが尽きた後に参照しないように修正しなければなりません。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e..=\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e15\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efor_each\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eprintln!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eInto\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003einto\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex)));\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eもしくは所有権を要求してしまうという手もあります。所有権を得た後はライフタイムが伸びるのでこれは問題ありません。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #ffffff\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003enum\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFormatter\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eResult\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003estd\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eops\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eenum\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBox\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003edyn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efmt\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, f\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;mut\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFormatter\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eResult\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003eself\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Fizz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"Buzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"FizzBuzz\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003ewrite!\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(f, \u003c/span\u003e\u003cspan style=\"color: #0A3069\"\u003e\"{x}\"\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003eimpl\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CF222E\"\u003ewhere\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e '\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eDisplay\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e+\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eu8\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e'\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eRem\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eOutput\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eU\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eZero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003efn\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003ematch\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e ((\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(), (\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003ex \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e%\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eT\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003e5\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e))\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eis_zero\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (\u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e, _) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            (_, \u003c/span\u003e\u003cspan style=\"color: #0550AE\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBuzz\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e            _ \u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e \u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eFizzBuzz\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003eNumber\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #953800\"\u003eBox\u003c/span\u003e\u003cspan style=\"color: #CF222E\"\u003e::\u003c/span\u003e\u003cspan style=\"color: #8250DF\"\u003enew\u003c/span\u003e\u003cspan style=\"color: #24292F\"\u003e(x)),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292F\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e以上のように書けますが、どちらにせよBoxによるメモリ操作や動的ディスパッチによるオーバーヘッドがあることには変わりありません。\u003c/p\u003e\n\u003cp\u003eこのように、長いライフタイムを要求すると、後々取り扱いに苦労してしまうので、パフォーマンスや汎用性を天秤にかけて判断するようにしましょう。\u003c/p\u003e\n\u003c/div\u003e\n\u003cp\u003eRustでFizzBuzzを実装してみましたという話でした。\u003c/p\u003e","recents":[{"slug":"posts/rust-fizzbuzz","date":"2022-12-31T04:58:43+0900","draft":false,"title":"RustでFizzBuzzを書く","description":"RustでFizzBuzzを書いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。","content":"\nRustでFizzBuzzを書いてみたいと思うこと、ありますよね。  \n僕はあるので自分用にメモです。\n\nなお、この記事を書くにあたって\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0Rust-%E7%AC%AC2%E7%89%88-Jim-Blandy/dp/4873119782?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A\u0026crid=16SB3SPXD9LVL\u0026keywords=rust\u0026qid=1672662058\u0026sprefix=rust+%2Caps%2C261\u0026sr=8-4\u0026linkCode=ll1\u0026tag=nishidemasami-22\u0026linkId=5f2948f4e335959907e6a8b8e22b859d\u0026language=ja_JP\u0026ref_=as_li_ss_tl\" rel=\"noreferrer\" \u003eプログラミングRust 第2版\u003c/a\u003eを参考にしました。\n\nとりあえず最初に結論を書いておきます。\n\n```rust\nuse num::Zero;\nuse std::fmt;\nuse std::ops::Rem;\n\npub enum FizzBuzz {\n    Fizz,\n    Buzz,\n    FizzBuzz,\n    Number(String),\n}\n\nimpl fmt::Display for FizzBuzz {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            FizzBuzz::Fizz =\u003e write!(f, \"Fizz\"),\n            FizzBuzz::Buzz =\u003e write!(f, \"Buzz\"),\n            FizzBuzz::FizzBuzz =\u003e write!(f, \"FizzBuzz\"),\n            FizzBuzz::Number(x) =\u003e write!(f, \"{x}\"),\n        }\n    }\n}\n\nimpl\u003cT, U\u003e From\u003c\u0026T\u003e for FizzBuzz\nwhere\n    T: From\u003cu8\u003e,\n    for\u003c'a\u003e \u0026'a T: Rem\u003cT, Output = U\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: \u0026T) -\u003e FizzBuzz {\n        match ((x % T::from(3)).is_zero(), (x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n```\n\n以上のようになると思います。\n\n以下、解説です。\n\nまず、何も考えずにRustでFizzBuzzを書くと以下のようになると思います。\n\n```rust\nfn main() {\n    (1..=15).for_each(|x| {\n        match ((x % 3) == 0, (x % 5) == 0) {\n            (true, true) =\u003e println!(\"FizzBuzz\"),\n            (true, _) =\u003e println!(\"Fizz\"),\n            (_, true) =\u003e println!(\"Buzz\"),\n            _ =\u003e println!(\"{x}\"),\n        }\n    })\n}\n```\n\nここからスタートしてゆきます。\n\n最終的に、以下のようにすることをゴールとします。\n\n* テスト可能\n* 汎用的\n* ゼロコスト抽象化\n\nまずメソッドに分けてからテストを書きます。\n\n```rust\nfn fizzbuzz(x: u32) -\u003e String {\n    match ((x % 3) == 0, (x % 5) == 0) {\n        (true, true) =\u003e \"FizzBuzz\".to_string(),\n        (true, _) =\u003e \"Fizz\".to_string(),\n        (_, true) =\u003e \"Buzz\".to_string(),\n        _ =\u003e x.to_string(),\n    }\n}\n\nfn main() {\n    (1..=15).map(fizzbuzz).for_each(|x| println!(\"{x}\"))\n}\n\n#[test]\nfn test() {\n    let test_target: Vec\u003cString\u003e = (1..=15)\n        .map(fizzbuzz)\n        .collect();\n\n    assert_eq!(\n        test_target,\n        vec![\n            \"1\", \"2\", \"Fizz\", \"4\", \"Buzz\", \"Fizz\", \"7\", \"8\", \"Fizz\", \"Buzz\", \"11\", \"Fizz\", \"13\",\n            \"14\", \"FizzBuzz\",\n        ]\n    );\n}\n```\n\n次はこれをRustらしく、`enum`に[`std::convert::From`](https://doc.rust-lang.org/std/convert/trait.From.html)トレイトと[`fmt::Display`](https://doc.rust-lang.org/std/fmt/trait.Display.html)トレイトを実装した書き方にします。  \n[`std::convert::From`](https://doc.rust-lang.org/std/convert/trait.From.html)トレイトの[`from()`](https://doc.rust-lang.org/std/convert/trait.From.html#tymethod.from)メソッドを実装すれば[`std::convert::Into`](https://doc.rust-lang.org/std/convert/trait.Into.html)トレイトの[`into()`](https://doc.rust-lang.org/std/convert/trait.Into.html#tymethod.into)メソッドが自動で実装され、[`fmt::Display`](https://doc.rust-lang.org/std/fmt/trait.Display.html)トレイトの[`fmt()`](https://doc.rust-lang.org/std/fmt/trait.Display.html#tymethod.fmt)メソッドを実装すれば[`std::string::ToString`](https://doc.rust-lang.org/std/string/trait.ToString.html)トレイトの[`to_string()`](https://doc.rust-lang.org/std/string/trait.ToString.html#tymethod.to_string)メソッドが自動で実装されます。\n\n```rust\nuse std::fmt;\n\nenum FizzBuzz {\n    Fizz,\n    Buzz,\n    FizzBuzz,\n    Number(String),\n}\n\nimpl From\u003cu32\u003e for FizzBuzz {\n    fn from(x: u32) -\u003e FizzBuzz {\n        match ((x % 3) == 0, (x % 5) == 0) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n\nimpl fmt::Display for FizzBuzz {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            FizzBuzz::Fizz =\u003e write!(f, \"Fizz\"),\n            FizzBuzz::Buzz =\u003e write!(f, \"Buzz\"),\n            FizzBuzz::FizzBuzz =\u003e write!(f, \"FizzBuzz\"),\n            FizzBuzz::Number(x) =\u003e write!(f, \"{x}\"),\n        }\n    }\n}\n\n// 以下はmain・テスト用\n\nfn main() {\n    (1..=15).map(|x| -\u003e FizzBuzz {\n        x.into()\n    } ).map(|x| -\u003e String {\n        x.to_string()\n    } ).for_each(|x| println!(\"{x}\"))\n}\n\n#[test]\nfn test() {\n    let test_target: Vec\u003cString\u003e = (1..=15)\n        .map(|x| -\u003e FizzBuzz {\n            x.into()\n        } )\n        .map(|x| -\u003e String {\n            x.to_string()\n        } )\n        .collect();\n\n    assert_eq!(\n        test_target,\n        vec![\n            \"1\", \"2\", \"Fizz\", \"4\", \"Buzz\", \"Fizz\", \"7\", \"8\", \"Fizz\", \"Buzz\", \"11\", \"Fizz\", \"13\",\n            \"14\", \"FizzBuzz\",\n        ]\n    );\n}\n```\n\nここで、`u32`では`4294967295`が最大値なのは心もとないので拡張可能にしたいと考えると思います。  \nたとえば`u32`を`u128`にしたところで`340282366920938463463374607431768211455`が最大値です。  \nこれでは十分ではないので、もっと「抽象的な数値」を扱えるようにします。\n\nfizzbuzz関数$f(x)$を定義してみます。\n\n$\nf(x) =\n\\begin{cases}\n  \\text{FizzBuzz} \u0026 (x \\bmod 3 = 0 \\land x \\bmod 5 = 0)\\\\\n  \\text{Fizz} \u0026 (x \\bmod 3 = 0 \\land x \\bmod 5 \\neq 0)\\\\\n  \\text{Buzz} \u0026 (x \\bmod 3 \\neq 0 \\land x \\bmod 5 = 0)\\\\\n  x \u0026 (\\text{otherwize})\\\\\n\\end{cases}\n$\n\n定義を冷静になって見てみると、$x$に対する操作は「3で割る」「5で割る」「割った結果を0と比較する」「文字列に変換する」しかしていないことしかわかります。  \n型で表すと以下のようなものです。\n\n```rust\nT: Rem\u003cT, Output = U\u003e + From\u003cu8\u003e + ToString,\nU: Zero,\n```\n\nつまり、`u8`で割ることができて0と比較できて文字列に変換できる値なら、どんな値でもFizzBuzzをすることができるのです。  \nCloneも合わせて先述の`from`は以下のように書けるのです。\n\n```rust\nimpl\u003cT, U\u003e From\u003cT\u003e for FizzBuzz\nwhere\n    T: Rem\u003cT, Output = U\u003e + Clone + From\u003cu8\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: T) -\u003e FizzBuzz {\n        match ((x.clone() % T::from(3)).is_zero(), (x.clone() % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n```\n\n`.clone()`を何度もするのはパフォーマンス上の観点から躊躇われますし、処理上特に所有権も必要としておらず借用で十分なので借用に修正すると、以下のようになります。\n\n```rust\nimpl\u003c'a, T, U\u003e From\u003c\u0026'a T\u003e for FizzBuzz\nwhere\n    T: From\u003cu8\u003e,\n    \u0026'a T: Rem\u003cT, Output = U\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: \u0026'a T) -\u003e FizzBuzz {\n        match ((x % T::from(3)).is_zero(), (x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n```\n\n\u003cdiv class=\"note alert\"\u003e\n\n\u003ci class=\"fontawesome fa fa-times-circle\" style=\"color:#d60a34;font-size:20px;\" aria-hidden=\"true\"\u003e\u003c/i\u003eもしここで以下のようにライフタイム`'a`の記述を書かないと…\n\n```rust example-bad\nimpl\u003c'a, T, U\u003e From\u003c\u0026'a T\u003e for FizzBuzz\nwhere\n    T: From\u003cu8\u003e,\n    \u0026T: Rem\u003cT, Output = U\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: \u0026'a T) -\u003e FizzBuzz {\n        match ((x % T::from(3)).is_zero(), (x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n```\n\n以下のようなエラーメッセージが出てしまいます。\n\n```text example-bad\nerror[E0637]: `\u0026` without an explicit lifetime name cannot be used here\n  --\u003e src\\main.rs:42:5\n   |\n42 |     \u0026T: Rem\u003cT, Output = U\u003e + ToString,\n   |     ^ explicit lifetime name needed here\n```\n\nwhere句で`\u0026`を使う必要があるならライフタイムを明示的に示さないといけないのです。\n\n\u003c/div\u003e\n\nシンプルに書くのなら、ライフタイム`'a`は高階トレイト境界を用いて以下のような書き方をすることができます。\n\n```rust\nimpl\u003cT, U\u003e From\u003c\u0026T\u003e for FizzBuzz\nwhere\n    T: From\u003cu8\u003e,\n    for\u003c'a\u003e \u0026'a T: Rem\u003cT, Output = U\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: \u0026T) -\u003e FizzBuzz {\n        match ((x % T::from(3)).is_zero(), (x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n```\n\nこれで完成です。\n\n`num::BigUint`などもこの`T`を満たすので、これで`u128`でも扱えないような大きな数字も以下のような感じで扱うことができるようになりました。\n\n```rust\nuse num::Zero;\nuse std::fmt;\nuse std::ops::Rem;\n\nenum FizzBuzz {\n    Fizz,\n    Buzz,\n    FizzBuzz,\n    Number(String),\n}\n\nimpl fmt::Display for FizzBuzz {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            FizzBuzz::Fizz =\u003e write!(f, \"Fizz\"),\n            FizzBuzz::Buzz =\u003e write!(f, \"Buzz\"),\n            FizzBuzz::FizzBuzz =\u003e write!(f, \"FizzBuzz\"),\n            FizzBuzz::Number(x) =\u003e write!(f, \"{x}\"),\n        }\n    }\n}\n\nimpl\u003cT, U\u003e From\u003c\u0026T\u003e for FizzBuzz\nwhere\n    T: From\u003cu8\u003e,\n    for\u003c'a\u003e \u0026'a T: Rem\u003cT, Output = U\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: \u0026T) -\u003e FizzBuzz {\n        match ((x % T::from(3)).is_zero(), (x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(x.to_string()),\n        }\n    }\n}\n\n// 以下はmain・テスト用\n\nuse num::{BigUint, Num};\n\nfn main() {\n    num_iter::range_inclusive(\n        BigUint::from_str_radix(\"340282366920938463463374607431768211471\", 10).unwrap(),\n        BigUint::from_str_radix(\"340282366920938463463374607431768211485\", 10).unwrap(),\n    )\n    .map(|x: BigUint| -\u003e String {\n        let fizzbuzz: FizzBuzz = (\u0026x).into();\n        fizzbuzz.to_string()\n    })\n    .for_each(|x| println!(\"{x}\"));\n}\n\n#[test]\nfn test_bigint() {\n    let test_target: Vec\u003cString\u003e = num_iter::range_inclusive(\n        BigUint::from_str_radix(\"340282366920938463463374607431768211471\", 10).unwrap(),\n        BigUint::from_str_radix(\"340282366920938463463374607431768211485\", 10).unwrap(),\n    )\n    .map(|x| {\n        let buffer: FizzBuzz = (\u0026x).into();\n        let buffer: String = buffer.to_string();\n        buffer.to_string()\n    })\n    .collect();\n\n    assert_eq!(\n        test_target,\n        vec![\n            \"340282366920938463463374607431768211471\",\n            \"340282366920938463463374607431768211472\",\n            \"Fizz\",\n            \"340282366920938463463374607431768211474\",\n            \"Buzz\",\n            \"Fizz\",\n            \"340282366920938463463374607431768211477\",\n            \"340282366920938463463374607431768211478\",\n            \"Fizz\",\n            \"Buzz\",\n            \"340282366920938463463374607431768211481\",\n            \"Fizz\",\n            \"340282366920938463463374607431768211483\",\n            \"340282366920938463463374607431768211484\",\n            \"FizzBuzz\",\n        ]\n    );\n}\n\n#[test]\nfn test() {\n    let test_target: Vec\u003cString\u003e = (1..=15)\n        .map(|x| {\n            let buffer: FizzBuzz = (\u0026x).into();\n            let buffer: String = buffer.to_string();\n            buffer.to_string()\n        })\n        .collect();\n\n    assert_eq!(\n        test_target,\n        vec![\n            \"1\", \"2\", \"Fizz\", \"4\", \"Buzz\", \"Fizz\", \"7\", \"8\", \"Fizz\", \"Buzz\", \"11\", \"Fizz\", \"13\",\n            \"14\", \"FizzBuzz\",\n        ]\n    );\n}\n```\n\n\u003cdiv class=\"note warn\"\u003e\n\n\u003ci class=\"fontawesome fa fa-exclamation-circle\" style=\"color:#f7a535;font-size:20px;\" aria-hidden=\"true\"\u003e\u003c/i\u003e ここで「そうだ！FizzBuzzのenumにString型ではなく`Box\u003cdyn 'a + ToString\u003e`型で動的な型の値を持たせればゼロコスト抽象化の恩恵も得られながらよりコンパイル時に最適化されるのでは？」と思うかもしれませんが…\n\n```rust example-bad\nuse num::Zero;\nuse std::fmt;\nuse std::ops::Rem;\n\npub enum FizzBuzz\u003c'a\u003e {\n    Fizz,\n    Buzz,\n    FizzBuzz,\n    Number(Box\u003cdyn 'a + ToString\u003e),\n}\n\nimpl\u003c'a\u003e fmt::Display for FizzBuzz\u003c'a\u003e {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            FizzBuzz::Fizz =\u003e write!(f, \"Fizz\"),\n            FizzBuzz::Buzz =\u003e write!(f, \"Buzz\"),\n            FizzBuzz::FizzBuzz =\u003e write!(f, \"FizzBuzz\"),\n            FizzBuzz::Number(x) =\u003e write!(f, \"{x}\"),\n        }\n    }\n}\n\nimpl\u003c'a, T, U\u003e From\u003c\u0026'a T\u003e for FizzBuzz\u003c'a\u003e\nwhere\n    T: 'a + From\u003cu8\u003e,\n    \u0026'a T: Rem\u003cT, Output = U\u003e + ToString,\n    U: Zero,\n{\n    fn from(x: \u0026'a T) -\u003e FizzBuzz\u003c'a\u003e {\n        let three = T::from(3);\n        match ((x % three).is_zero(), (x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(Box::new(x)),\n        }\n    }\n}\n```\n\nしかし、実際にはBoxによるメモリ操作や動的ディスパッチによるオーバーヘッドもありますし、最終的に`to_string()`で文字列を生成しているのには変わりありませんから、メリットはあまりありません。\n\nまた、これを以下のような利用をしようとすると…\n\n```rust example-bad\nfn main() {\n    (1..=15)\n        .map(|x| (\u0026x).into())\n        .for_each(|x: FizzBuzz| println!(\"{}\", x));\n}\n```\n\n以下のようなエラーメッセージが出てしまいます。\n\n```text example-bad\nerror[E0515]: cannot return value referencing function parameter `x`\n --\u003e src\\main.rs:7:18\n  |\n7 |         .map(|x| (\u0026x).into())\n  |                  ----^^^^^^^\n  |                  |\n  |                  returns a value referencing data owned by the current function\n  |                  `x` is borrowed here\n```\n\nクロージャ外から出た後までライフタイムを必要とするような処理はできないということです。  \nこれは、以下のようにクロージャ内で変数のライフタイムが尽きた後に参照しないように修正しなければなりません。\n\n```rust\nfn main() {\n    (1..=15)\n        .for_each(|x| println!(\"{}\", Into::\u003cFizzBuzz\u003e::into(\u0026x)));\n}\n```\n\nもしくは所有権を要求してしまうという手もあります。所有権を得た後はライフタイムが伸びるのでこれは問題ありません。\n\n```rust\nuse num::Zero;\nuse std::fmt::{Display, Formatter, Result};\nuse std::ops::Rem;\n\nenum FizzBuzz {\n    Fizz,\n    Buzz,\n    FizzBuzz,\n    Number(Box\u003cdyn Display\u003e),\n}\n\nimpl Display for FizzBuzz {\n    fn fmt(\u0026self, f: \u0026mut Formatter) -\u003e Result {\n        match self {\n            FizzBuzz::Fizz =\u003e write!(f, \"Fizz\"),\n            FizzBuzz::Buzz =\u003e write!(f, \"Buzz\"),\n            FizzBuzz::FizzBuzz =\u003e write!(f, \"FizzBuzz\"),\n            FizzBuzz::Number(x) =\u003e write!(f, \"{x}\"),\n        }\n    }\n}\n\nimpl\u003cT, U\u003e From\u003cT\u003e for FizzBuzz\nwhere\n    for\u003c'a\u003e T: 'a + Display + From\u003cu8\u003e,\n    for\u003c'a\u003e \u0026'a T: Rem\u003cT, Output = U\u003e,\n    U: Zero,\n{\n    fn from(x: T) -\u003e FizzBuzz {\n        match ((\u0026x % T::from(3)).is_zero(), (\u0026x % T::from(5)).is_zero()) {\n            (true, true) =\u003e FizzBuzz::FizzBuzz,\n            (true, _) =\u003e FizzBuzz::Fizz,\n            (_, true) =\u003e FizzBuzz::Buzz,\n            _ =\u003e FizzBuzz::Number(Box::new(x)),\n        }\n    }\n}\n```\n\n以上のように書けますが、どちらにせよBoxによるメモリ操作や動的ディスパッチによるオーバーヘッドがあることには変わりありません。\n\nこのように、長いライフタイムを要求すると、後々取り扱いに苦労してしまうので、パフォーマンスや汎用性を天秤にかけて判断するようにしましょう。\n\n\u003c/div\u003e\n\nRustでFizzBuzzを実装してみましたという話でした。\n","tags":["Rust","FizzBuzz"],"category":"blog"},{"slug":"articles/typescript-bitcoin","date":"2022-12-24T01:04:03+0900","draft":false,"title":"Typescriptでビットコインアドレスを生成する","description":"Typescriptでビットコインアドレスを生成したいこと、ありますよね。僕はあるので自分用にメモです。","content":"*/\n\nimport React from 'react';\n\nimport { format } from 'date-fns';\nimport { GetStaticProps } from 'next';\n\nimport { TypescriptBitcoin } from '../../components/TypescriptBitcoin';\nimport { Content } from '../../content/Content';\nimport { Meta } from '../../layout/Meta';\nimport { PostPagination } from '../../pagination/PostPagination';\nimport { Main } from '../../templates/Main';\nimport {\n\tgetPrevNextPost,\n\tgetRecentPosts,\n\tgetTags,\n\tPostItems,\n} from '../../utils/Content';\nimport { markdownToHtml } from '../../utils/Markdown';\n\ntype ReactSoundTestProps = {\n\trecents: PostItems[];\n\ttags: string[];\n\tfirstArticle: string;\n\tsecondArticle: string;\n\tprevPost?: PostItems;\n\tnextPost?: PostItems;\n};\n\nconst firstArticle = `\nTypescriptでビットコインアドレスを生成したいこと、ありますよね。  \n僕はあるので自分用にメモです。\u003csup\u003e[\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%83%81%E3%82%A7%E3%83%BC%E3%83%B3%E5%AE%9F%E8%B7%B5%E5%85%A5%E9%96%80-%E3%83%93%E3%83%83%E3%83%88%E3%82%B3%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89%E3%82%A4%E3%83%BC%E3%82%B5%E3%83%AA%E3%82%A2%E3%83%A0%E3%80%81DApp%E9%96%8B%E7%99%BA%E3%81%BE%E3%81%A7-Bikramaditya-Singhal/dp/4274225372?_encoding=UTF8\u0026qid=1671896601\u0026sr=8-1\u0026linkCode=ll1\u0026tag=nishidemasami-22\u0026linkId=b026b2c2bd3729a8fe4c35dda528a7bb\u0026language=ja_JP\u0026ref_=as_li_ss_tl\" rel=\"noreferrer\" \u003e参考文献\u003c/a\u003e]\u003c/sup\u003e\n\n👇このボタンをクリックするとビットコインアドレスを生成します。\n`;\n\nconst secondArticle = `\nビットコインのアドレスは、32バイトの秘密鍵を以下のようにしてビットコインアドレスに変換します。\n\n\\`\\`\\`mermaid\nflowchart TD\n\nA[32バイトの秘密鍵] --\u003e|secp256k1| B(公開鍵)\nA --\u003e|base58変換とチェックサム付与| F[WIF形式秘密鍵]\nB --\u003e C{ビットコインアドレス形式}\nC --\u003e|BASE58変換とチェックサム付与| D[P2PKH形式ビットコインアドレス]\nC --\u003e|BASE32変換とチェックサム付与| E[Bech32形式ビットコインアドレス]\n\\`\\`\\`\n\nこれはTypescriptでも簡単に計算できます。\n\nそれを実際に書いてみたのが ↓ この今回のコードです\n\\`\\`\\`tsx\nimport { randomBytes, createHash, BinaryLike } from 'crypto';\n\nimport { useState, FC, useMemo, useCallback } from 'react';\n\nimport { Button, TextField } from '@mui/material';\nimport { bech32 } from 'bech32';\nimport { encode } from 'bs58';\nimport RIPEMD160 from 'ripemd160';\nimport { publicKeyCreate, privateKeyVerify } from 'secp256k1';\n\n/** 16進数の文字列かどうかチェックする正規表現 */\nconst check32BytesHex = /^[0-9a-fA-F]{64}$/;\n\n/** 16進数の文字列をUint8Arrayに変換する */\nconst hexToUint8Array = (hex: string): Uint8Array =\u003e Buffer.from(hex, 'hex');\n\n/** Bufferを16進数の文字列に変換する */\nconst bufferToHex = (data: Buffer): string =\u003e data.toString('hex');\n\n/** sha256でハッシュする */\nconst sha256 = (data: BinaryLike): Buffer =\u003e\n  createHash('sha256').update(data).digest();\n\n/** ripemd160でハッシュする */\nconst ripemd160 = (data: BinaryLike): Buffer =\u003e\n  new RIPEMD160().update(data).digest();\n\n/** BASE58チェックサム生成 */\nconst calcBase58Checksum = (data: BinaryLike): Buffer =\u003e\n  sha256(sha256(data)).subarray(0, 4);\n\n/** BASE58変換＋チェックサム */\nconst base58WithChecksum = (data: Uint8Array): string =\u003e\n  encode([...data, ...calcBase58Checksum(data)]);\n\n/** ビットコインアドレス(BASE58(P2PKH)形式)生成 */\nconst genBitcoinAddressP2PKH = (publicKey: Uint8Array): string =\u003e\n  base58WithChecksum(Uint8Array.from([0x00, ...ripemd160(sha256(publicKey))]));\n\n/** BASE32変換＋チェックサム */\nconst bech32WithChecksum = (data: Uint8Array) =\u003e\n  bech32.encode('bc', [0x00, ...bech32.toWords(data)]);\n\n/** ビットコインアドレス(BASE32(Bech32)形式)生成 */\nconst genBitcoinAddressBECH32 = (publicKey: Uint8Array): string =\u003e\n  bech32WithChecksum(ripemd160(sha256(publicKey)));\n\n/** 秘密鍵(WIF形式)生成 */\nconst genWif = (privateKey: Uint8Array): string =\u003e\n  base58WithChecksum(Uint8Array.from([0x80, ...privateKey]));\n\nconst TypescriptBitcoin: FC = () =\u003e {\n  // 秘密鍵(32バイトの16進数)\n  const [hexPrivateKey, setHexPrivateKey] = useState(\n    bufferToHex(randomBytes(32))\n  );\n\n  /** 秘密鍵(32バイト) */\n  const privateKey: Uint8Array | string = useMemo(() =\u003e {\n    if (!check32BytesHex.test(hexPrivateKey))\n      return '秘密鍵が32バイトの16進数ではない';\n    return hexToUint8Array(hexPrivateKey);\n  }, [hexPrivateKey]);\n\n  /** 公開鍵 */\n  const publicKey: Uint8Array | string = useMemo(() =\u003e {\n    if (typeof privateKey === 'string') return privateKey;\n    if (!privateKeyVerify(privateKey)) return '秘密鍵が不適切';\n    return publicKeyCreate(privateKey, false);\n  }, [privateKey]);\n\n  /** ビットコインアドレス(BASE32(Bech32)形式) */\n  const bitcoinAddressBECH32 = useMemo(() =\u003e {\n    if (typeof privateKey === 'string') return privateKey;\n    if (typeof publicKey === 'string') return publicKey;\n    return genBitcoinAddressBECH32(publicKey);\n  }, [privateKey, publicKey]);\n\n  /** ビットコインアドレス(BASE58(P2PKH)形式) */\n  const bitcoinAddressP2PKH = useMemo(() =\u003e {\n    if (typeof privateKey === 'string') return privateKey;\n    if (typeof publicKey === 'string') return publicKey;\n    return genBitcoinAddressP2PKH(publicKey);\n  }, [privateKey, publicKey]);\n\n  /** 秘密鍵をランダムに生成 */\n  const genRamdamKey = useCallback(\n    () =\u003e setHexPrivateKey(bufferToHex(randomBytes(32))),\n    []\n  );\n\n  /** 秘密鍵(WIF形式) */\n  const wif = useMemo(\n    () =\u003e genWif(hexToUint8Array(hexPrivateKey)),\n    [hexPrivateKey]\n  );\n\n  return (\n    \u003c\u003e\n      \u003cButton onClick={genRamdamKey} variant=\"outlined\"\u003e\n        秘密鍵をランダムに生成\n      \u003c/Button\u003e\n      \u003cTextField\n        error={!check32BytesHex.test(hexPrivateKey)}\n        fullWidth\n        label=\"秘密鍵(32バイトの16進数)\"\n        margin=\"dense\"\n        value={hexPrivateKey}\n        onChange={(e) =\u003e {\n          setHexPrivateKey(e.currentTarget.value);\n        }}\n      /\u003e\n      \u003cTextField\n        fullWidth\n        label=\"秘密鍵(WIF形式)\"\n        margin=\"dense\"\n        value={wif}\n        InputProps={{\n          readOnly: true,\n        }}\n      /\u003e\n      \u003cTextField\n        fullWidth\n        label=\"ビットコインアドレス(BASE58(P2PKH)形式)\"\n        margin=\"dense\"\n        InputProps={{\n          readOnly: true,\n        }}\n        value={bitcoinAddressP2PKH}\n      /\u003e\n      \u003cTextField\n        fullWidth\n        label=\"ビットコインアドレス(BASE32(Bech32)形式)\"\n        margin=\"dense\"\n        InputProps={{\n          readOnly: true,\n        }}\n        value={bitcoinAddressBECH32}\n      /\u003e\n    \u003c/\u003e\n  );\n};\n\nexport { TypescriptBitcoin };\n\\`\\`\\`\n`;\n\nconst ReactSoundTest = (props: ReactSoundTestProps) =\u003e (\n\t\u003cMain\n\t\trecents={props.recents}\n\t\ttags={props.tags}\n\t\tmeta={\n\t\t\t\u003cMeta\n\t\t\t\ttitle=\"Typescriptでビットコインアドレスを生成する\"\n\t\t\t\tdescription=\"Typescriptでビットコインアドレスを生成したいこと、ありますよね。僕はあるので自分用にメモです。\"\n\t\t\t/\u003e\n\t\t}\n\t\u003e\n\t\t\u003ch1 className=\"text-center font-bold text-3xl text-gray-900\"\u003e\n\t\t\tTypescriptでビットコインアドレスを生成する\n\t\t\u003c/h1\u003e\n\t\t\u003cdiv className=\"text-center text-sm mb-4\"\u003e\n\t\t\t{format(new Date('2022-12-10T01:04:03+0900'), 'LLLL d, yyyy')}\n\t\t\u003c/div\u003e\n\n\t\t\u003cContent\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cdiv dangerouslySetInnerHTML={{ __html: props.firstArticle }} /\u003e\n\t\t\t\t\u003cTypescriptBitcoin /\u003e\n\t\t\t\t\u003cdiv dangerouslySetInnerHTML={{ __html: props.secondArticle }} /\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/Content\u003e\n\n\t\t\u003cPostPagination nextPost={props.nextPost} prevPost={props.prevPost} /\u003e\n\t\u003c/Main\u003e\n);\n\nexport const getStaticProps: GetStaticProps\u003cReactSoundTestProps\u003e = async () =\u003e {\n\tconst recents = getRecentPosts(['title', 'date', 'slug']);\n\n\treturn {\n\t\tprops: {\n\t\t\trecents,\n\t\t\ttags: getTags(),\n\t\t\tfirstArticle: await markdownToHtml(firstArticle),\n\t\t\tsecondArticle: await markdownToHtml(secondArticle),\n\t\t\t...getPrevNextPost(__filename),\n\t\t},\n\t};\n};\n\nexport default ReactSoundTest;\n","tags":["TypeScript","React","Bitcoin"],"category":"blog"},{"slug":"posts/nextjs-mermaid","date":"2022-12-18T23:04:03+0900","draft":false,"title":"Next.jsでSSG時にRemarkでMermaidをSVGとして出力する","description":"Next.jsでSSG時にRemarkでMermaidをSVGにして出力してみたいと思うこと、ありますよね。僕はあるのですがネット上にあまり情報が無かったので自分用にメモです。","content":"\r\nNext.jsでSSG時にRemarkでMermaidをSVGにして出力してみたいと思うこと、ありますよね。  \r\n僕はあるのですがネット上にあまり情報が無かったので自分用にメモです。\r\n\r\n今回は`remark-mermaidjs`を使って実装しました。\r\n\r\nこのサイトではMarkdownを`unified`で扱っているので`remark-mermaidjs`を`use`します。  \r\n`remark-mermaidjs`はGoogle Chromeを使ってMermaidをSVGにしているらしく`executablePath`でGoogle Chromeのパスを指定しなければならないようです。  \r\nこのサイトはGitHub Actionsでビルドしているので、ubuntuのために`/opt/google/chrome/google-chrome`を指定しました。なお、ローカル環境でも自由に動かせるように`.env`にもGoogle Chromeへのパスを書くことにしました。\r\n\r\n```typescript\r\n// @ts-ignore\r\nimport rehypePrism from '@mapbox/rehype-prism';\r\nimport rehypeKatex from 'rehype-katex';\r\nimport rehypeStringify from 'rehype-stringify';\r\nimport remarkGfm from 'remark-gfm';\r\nimport remarkMath from 'remark-math';\r\nimport remarkMermaid from 'remark-mermaidjs';\r\nimport remarkParse from 'remark-parse';\r\nimport remarkRehype from 'remark-rehype';\r\nimport { unified } from 'unified';\r\n\r\nexport const markdownToHtml = async (markdown: string) =\u003e\r\n  (\r\n    await unified()\r\n      .use(remarkParse)\r\n      .use(remarkMath)\r\n      .use(remarkGfm)\r\n      .use(remarkMermaid, {\r\n        launchOptions: {\r\n          executablePath:\r\n            process.env.GoogleChromeExecutablePath ?? // .env\r\n            '/opt/google/chrome/google-chrome', // for GitHub Actions Ubuntu\r\n        },\r\n        svgo: false,\r\n      })\r\n      .use(remarkRehype, { allowDangerousHtml: true, footnoteLabel: '脚注' })\r\n      .use(rehypePrism)\r\n      .use(rehypeKatex)\r\n      .use(rehypeStringify, { allowDangerousHtml: true })\r\n      .process(markdown)\r\n  )\r\n    .toString()\r\n    .replace(/@@baseUrl@@/g, process.env.baseUrl || '');\r\n```\r\n\r\n以下にサンプルを置いておきます。図がSVGになっていることがわかると思います。\r\n\r\n## Flowchart\r\n\r\n````markdown\r\n```mermaid\r\nflowchart LR\r\n\r\nA[Hard] --\u003e|Text| B(Round)\r\nB --\u003e C{Decision}\r\nC --\u003e|One| D[Result 1]\r\nC --\u003e|Two| E[Result 2]\r\n```\r\n````\r\n\r\n```mermaid\r\nflowchart LR\r\n\r\nA[Hard] --\u003e|Text| B(Round)\r\nB --\u003e C{Decision}\r\nC --\u003e|One| D[Result 1]\r\nC --\u003e|Two| E[Result 2]\r\n```\r\n\r\n## Sequence diagram\r\n\r\n````markdown\r\n```mermaid\r\nsequenceDiagram\r\nAlice-\u003e\u003eJohn: Hello John, how are you?\r\nloop Healthcheck\r\n    John-\u003e\u003eJohn: Fight against hypochondria\r\nend\r\nNote right of John: Rational thoughts!\r\nJohn--\u003e\u003eAlice: Great!\r\nJohn-\u003e\u003eBob: How about you?\r\nBob--\u003e\u003eJohn: Jolly good!\r\n```\r\n````\r\n\r\n```mermaid\r\nsequenceDiagram\r\nAlice-\u003e\u003eJohn: Hello John, how are you?\r\nloop Healthcheck\r\n    John-\u003e\u003eJohn: Fight against hypochondria\r\nend\r\nNote right of John: Rational thoughts!\r\nJohn--\u003e\u003eAlice: Great!\r\nJohn-\u003e\u003eBob: How about you?\r\nBob--\u003e\u003eJohn: Jolly good!\r\n```\r\n\r\n## Gantt chart\r\n\r\n````markdown\r\n```mermaid\r\ngantt\r\n    section Section\r\n    Completed :done,    des1, 2014-01-06,2014-01-08\r\n    Active        :active,  des2, 2014-01-07, 3d\r\n    Parallel 1   :         des3, after des1, 1d\r\n    Parallel 2   :         des4, after des1, 1d\r\n    Parallel 3   :         des5, after des3, 1d\r\n    Parallel 4   :         des6, after des4, 1d\r\n```\r\n````\r\n\r\n```mermaid\r\ngantt\r\n    section Section\r\n    Completed :done,    des1, 2014-01-06,2014-01-08\r\n    Active        :active,  des2, 2014-01-07, 3d\r\n    Parallel 1   :         des3, after des1, 1d\r\n    Parallel 2   :         des4, after des1, 1d\r\n    Parallel 3   :         des5, after des3, 1d\r\n    Parallel 4   :         des6, after des4, 1d\r\n```\r\n\r\n## Class diagram\r\n\r\n````markdown\r\n```mermaid\r\nclassDiagram\r\nClass01 \u003c|-- AveryLongClass : Cool\r\n\u003c\u003cInterface\u003e\u003e Class01\r\nClass09 --\u003e C2 : Where am I?\r\nClass09 --* C3\r\nClass09 --|\u003e Class07\r\nClass07 : equals()\r\nClass07 : Object[] elementData\r\nClass01 : size()\r\nClass01 : int chimp\r\nClass01 : int gorilla\r\nclass Class10 {\r\n  \u003c\u003cservice\u003e\u003e\r\n  int id\r\n  size()\r\n}\r\n```\r\n````\r\n\r\n```mermaid\r\nclassDiagram\r\nClass01 \u003c|-- AveryLongClass : Cool\r\n\u003c\u003cInterface\u003e\u003e Class01\r\nClass09 --\u003e C2 : Where am I?\r\nClass09 --* C3\r\nClass09 --|\u003e Class07\r\nClass07 : equals()\r\nClass07 : Object[] elementData\r\nClass01 : size()\r\nClass01 : int chimp\r\nClass01 : int gorilla\r\nclass Class10 {\r\n  \u003c\u003cservice\u003e\u003e\r\n  int id\r\n  size()\r\n}\r\n```\r\n\r\n## Git graph\r\n\r\n````markdown\r\n```mermaid\r\ngitGraph\r\n    commit\r\n    commit\r\n    branch develop\r\n    commit\r\n    commit\r\n    commit\r\n    checkout main\r\n    commit\r\n    commit\r\n```\r\n````\r\n\r\n```mermaid\r\ngitGraph\r\n    commit\r\n    commit\r\n    branch develop\r\n    commit\r\n    commit\r\n    commit\r\n    checkout main\r\n    commit\r\n    commit\r\n```\r\n\r\n## State diagram\r\n\r\n````markdown\r\n```mermaid\r\nstateDiagram-v2\r\n[*] --\u003e Still\r\nStill --\u003e [*]\r\nStill --\u003e Moving\r\nMoving --\u003e Still\r\nMoving --\u003e Crash\r\nCrash --\u003e [*]\r\n```\r\n````\r\n\r\n```mermaid\r\nstateDiagram-v2\r\n[*] --\u003e Still\r\nStill --\u003e [*]\r\nStill --\u003e Moving\r\nMoving --\u003e Still\r\nMoving --\u003e Crash\r\nCrash --\u003e [*]\r\n```\r\n\r\n## Pie chart\r\n\r\n````markdown\r\n```mermaid\r\npie\r\n\"Dogs\" : 386\r\n\"Cats\" : 85.9\r\n\"Rats\" : 15\r\n```\r\n````\r\n\r\n```mermaid\r\npie\r\n\"Dogs\" : 386\r\n\"Cats\" : 85.9\r\n\"Rats\" : 15\r\n```\r\n\r\n## Entity Relationship Diagram\r\n\r\n````markdown\r\n```mermaid\r\nerDiagram\r\n    CUSTOMER ||--o{ ORDER : places\r\n    ORDER ||--|{ LINE-ITEM : contains\r\n    CUSTOMER }|..|{ DELIVERY-ADDRESS : uses\r\n```\r\n````\r\n\r\n```mermaid\r\nerDiagram\r\n    CUSTOMER ||--o{ ORDER : places\r\n    ORDER ||--|{ LINE-ITEM : contains\r\n    CUSTOMER }|..|{ DELIVERY-ADDRESS : uses\r\n```\r\n\r\n## User Journey diagram\r\n\r\n````markdown\r\n```mermaid\r\njourney\r\n  title My working day\r\n  section Go to work\r\n    Make tea: 5: Me\r\n    Go upstairs: 3: Me\r\n    Do work: 1: Me, Cat\r\n  section Go home\r\n    Go downstairs: 5: Me\r\n    Sit down: 3: Me\r\n```\r\n````\r\n\r\n```mermaid\r\njourney\r\n  title My working day\r\n  section Go to work\r\n    Make tea: 5: Me\r\n    Go upstairs: 3: Me\r\n    Do work: 1: Me, Cat\r\n  section Go home\r\n    Go downstairs: 5: Me\r\n    Sit down: 3: Me\r\n```\r\n\r\n## C4 diagram\r\n\r\n````markdown\r\n```mermaid\r\nC4Context\r\ntitle System Context diagram for Internet Banking System\r\n\r\nPerson(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\")\r\nPerson(customerB, \"Banking Customer B\")\r\nPerson_Ext(customerC, \"Banking Customer C\")\r\nSystem(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\")\r\n\r\nPerson(customerD, \"Banking Customer D\", \"A customer of the bank, \u003cbr/\u003e with personal bank accounts.\")\r\n\r\nEnterprise_Boundary(b1, \"BankBoundary\") {\r\n\r\n  SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\")\r\n\r\n  System_Boundary(b2, \"BankBoundary2\") {\r\n    System(SystemA, \"Banking System A\")\r\n    System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts.\")\r\n  }\r\n\r\n  System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\")\r\n  SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\")\r\n\r\n  Boundary(b3, \"BankBoundary3\", \"boundary\") {\r\n    SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank, with personal bank accounts.\")\r\n    SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\")\r\n  }\r\n}\r\n\r\nBiRel(customerA, SystemAA, \"Uses\")\r\nBiRel(SystemAA, SystemE, \"Uses\")\r\nRel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\")\r\nRel(SystemC, customerA, \"Sends e-mails to\")\r\n```\r\n````\r\n\r\n````mermaid\r\nC4Context\r\ntitle System Context diagram for Internet Banking System\r\n\r\nPerson(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\")\r\nPerson(customerB, \"Banking Customer B\")\r\nPerson_Ext(customerC, \"Banking Customer C\")\r\nSystem(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\")\r\n\r\nPerson(customerD, \"Banking Customer D\", \"A customer of the bank, \u003cbr/\u003e with personal bank accounts.\")\r\n\r\nEnterprise_Boundary(b1, \"BankBoundary\") {\r\n\r\n  SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\")\r\n\r\n  System_Boundary(b2, \"BankBoundary2\") {\r\n    System(SystemA, \"Banking System A\")\r\n    System(SystemB, \"Banking System B\", \"A system of the bank, with personal bank accounts.\")\r\n  }\r\n\r\n  System_Ext(SystemC, \"E-mail system\", \"The internal Microsoft Exchange e-mail system.\")\r\n  SystemDb(SystemD, \"Banking System D Database\", \"A system of the bank, with personal bank accounts.\")\r\n\r\n  Boundary(b3, \"BankBoundary3\", \"boundary\") {\r\n    SystemQueue(SystemF, \"Banking System F Queue\", \"A system of the bank, with personal bank accounts.\")\r\n    SystemQueue_Ext(SystemG, \"Banking System G Queue\", \"A system of the bank, with personal bank accounts.\")\r\n  }\r\n}\r\n\r\nBiRel(customerA, SystemAA, \"Uses\")\r\nBiRel(SystemAA, SystemE, \"Uses\")\r\nRel(SystemAA, SystemC, \"Sends e-mails\", \"SMTP\")\r\nRel(SystemC, customerA, \"Sends e-mails to\")\r\n````\r\n\r\nMermaid記法なら簡単にグラフを書けて便利なので、どんどん使っていきたいと思います。\r\n","tags":["Mermaid","Markdown","Next.js","SSG","SVG","Remark","remark-mermaidjs","GitHub Actions"],"category":"blog"},{"slug":"posts/svg-prayer-wheel","date":"2022-12-17T01:04:03+0900","draft":false,"title":"SVGだけで作ったSVGマニ車をCSSでクルクル回して自動で徳を積む","description":"徳、積みたいですよね。JavaScriptを使わずにSVGとCSSだけでマニ車をクルクル回して自動で徳を積みたいこと、ありますよね。僕はあるので自分用にメモです。","content":"\r\n\u003cstyle\u003e\r\n  #Text1{animation: spin 11s linear infinite; transform-origin: center;}\r\n  #Text2{animation: spin 10s linear infinite; transform-origin: center;}\r\n  #Text3{animation: spin 9s linear infinite; transform-origin: center;}\r\n  #Text4{animation: spin 8s linear infinite; transform-origin: center;}\r\n  #Text5{animation: spin 7s linear infinite; transform-origin: center;}\r\n  #Text6{animation: spin 6s linear infinite; transform-origin: center;}\r\n  #Text7{animation: spin 5s linear infinite; transform-origin: center;}\r\n  #Text8{animation: spin 4s linear infinite; transform-origin: center;}\r\n  #Text9{animation: spin 3s linear infinite; transform-origin: center;}\r\n\u003c/style\u003e\r\n\u003csvg style=\"max-width:400px\" viewBox=\"0 0 400 400\" \u003e\r\n  \u003cdefs\u003e\r\n    \u003cpath id=\"Circle1\" d=\"M 25, 200 a 175,175 0 1,1 350,0 a 175,175 0 1,1 -350,0\" /\u003e\r\n    \u003cpath id=\"Circle2\" d=\"M 50, 200 a 150,150 0 1,1 300,0 a 150,150 0 1,1 -300,0\" /\u003e\r\n    \u003cpath id=\"Circle3\" d=\"M 75, 200 a 125,125 0 1,1 250,0 a 125,125 0 1,1 -250,0\" /\u003e\r\n    \u003cpath id=\"Circle4\" d=\"M 100, 200 a 100,100 0 1,1 200,0 a 100,100 0 1,1 -200,0\" /\u003e\r\n    \u003cpath id=\"Circle5\" d=\"M 125, 200 a 75,75 0 1,1 150,0 a 75,75 0 1,1 -150,0\" /\u003e\r\n    \u003cpath id=\"Circle6\" d=\"M 150, 200 a 50,50 0 1,1 100,0 a 50,50 0 1,1 -100,0\" /\u003e\r\n    \u003cpath id=\"Circle7\" d=\"M 175, 200 a 25,25 0 1,1 50,0 a 25,25 0 1,1 -50,0\" /\u003e\r\n  \u003c/defs\u003e\r\n  \u003ctext id=\"Text1\"\u003e\r\n    \u003ctextPath href=\"#Circle1\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text2\"\u003e\r\n    \u003ctextPath href=\"#Circle2\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text3\"\u003e\r\n    \u003ctextPath href=\"#Circle3\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text4\"\u003e\r\n    \u003ctextPath href=\"#Circle4\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text5\"\u003e\r\n    \u003ctextPath href=\"#Circle5\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text6\"\u003e\r\n    \u003ctextPath href=\"#Circle6\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text7\"\u003e\r\n    \u003ctextPath href=\"#Circle7\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text8\"\u003e\r\n    \u003ctextPath href=\"#Circle8\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text9\"\u003e\r\n    \u003ctextPath href=\"#Circle9\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n\u003c/svg\u003e\r\n\r\n徳、積みたいですよね。\r\n\r\nご存知マニ車。お寺とかにたまにある、周囲にマントラが書いてあって手で回すと1回転毎に1回お経を読んだのと同じ徳を積めるスピリチュアルグッズです。\u003csup\u003e[\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/gp/search?ie=UTF8\u0026tag=nishidemasami-22\u0026linkCode=ur2\u0026linkId=d1ba0bb31ef3d317b4a5c8ad6af3095d\u0026camp=247\u0026creative=1211\u0026index=aps\u0026keywords=マニ車\"\u003e参考\u003c/a\u003e]\u003c/sup\u003e  \r\nチベット仏教が国教であるブータンでは、水力マニ車や風力マニ車、ソーラーマニ車\u003csup\u003e[\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/gp/search?ie=UTF8\u0026tag=nishidemasami-22\u0026linkCode=ur2\u0026linkId=d1ba0bb31ef3d317b4a5c8ad6af3095d\u0026camp=247\u0026creative=1211\u0026index=aps\u0026keywords=ソーラーマニ車\"\u003e参考\u003c/a\u003e]\u003c/sup\u003eなどもあり、マニ車も進化しているということがわかります。[^1]\r\n\r\n[^1]: 日本風力エネルギー学会誌 Vol.44, No.4\r\n\r\nならば、SVGとCSSでマントラを回しても徳が積めるのでは…？  \r\nそう思ったので自分用にメモです。\r\n\r\n```html\r\n\u003cstyle\u003e\r\n  #Text1{animation: spin 11s linear infinite; transform-origin: center;}\r\n  #Text2{animation: spin 10s linear infinite; transform-origin: center;}\r\n  #Text3{animation: spin 9s linear infinite; transform-origin: center;}\r\n  #Text4{animation: spin 8s linear infinite; transform-origin: center;}\r\n  #Text5{animation: spin 7s linear infinite; transform-origin: center;}\r\n  #Text6{animation: spin 6s linear infinite; transform-origin: center;}\r\n  #Text7{animation: spin 5s linear infinite; transform-origin: center;}\r\n  #Text8{animation: spin 4s linear infinite; transform-origin: center;}\r\n  #Text9{animation: spin 3s linear infinite; transform-origin: center;}\r\n\u003c/style\u003e\r\n\u003csvg style=\"max-width:400px\" viewBox=\"0 0 400 400\" \u003e\r\n  \u003cdefs\u003e\r\n    \u003cpath id=\"Circle1\" d=\"M 25, 200 a 175,175 0 1,1 350,0 a 175,175 0 1,1 -350,0\" /\u003e\r\n    \u003cpath id=\"Circle2\" d=\"M 50, 200 a 150,150 0 1,1 300,0 a 150,150 0 1,1 -300,0\" /\u003e\r\n    \u003cpath id=\"Circle3\" d=\"M 75, 200 a 125,125 0 1,1 250,0 a 125,125 0 1,1 -250,0\" /\u003e\r\n    \u003cpath id=\"Circle4\" d=\"M 100, 200 a 100,100 0 1,1 200,0 a 100,100 0 1,1 -200,0\" /\u003e\r\n    \u003cpath id=\"Circle5\" d=\"M 125, 200 a 75,75 0 1,1 150,0 a 75,75 0 1,1 -150,0\" /\u003e\r\n    \u003cpath id=\"Circle6\" d=\"M 150, 200 a 50,50 0 1,1 100,0 a 50,50 0 1,1 -100,0\" /\u003e\r\n    \u003cpath id=\"Circle7\" d=\"M 175, 200 a 25,25 0 1,1 50,0 a 25,25 0 1,1 -50,0\" /\u003e\r\n  \u003c/defs\u003e\r\n  \u003ctext id=\"Text1\"\u003e\r\n    \u003ctextPath href=\"#Circle1\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text2\"\u003e\r\n    \u003ctextPath href=\"#Circle2\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text3\"\u003e\r\n    \u003ctextPath href=\"#Circle3\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text4\"\u003e\r\n    \u003ctextPath href=\"#Circle4\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text5\"\u003e\r\n    \u003ctextPath href=\"#Circle5\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text6\"\u003e\r\n    \u003ctextPath href=\"#Circle6\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text7\"\u003e\r\n    \u003ctextPath href=\"#Circle7\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text8\"\u003e\r\n    \u003ctextPath href=\"#Circle8\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext id=\"Text9\"\u003e\r\n    \u003ctextPath href=\"#Circle9\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n  \u003c/text\u003e\r\n\u003c/svg\u003e\r\n```\r\n\r\nこのような感じで円のパスを複数個作って、それぞれを違う速さで回しています。\r\n\r\nなお、以下のようにSVGのanimateTransformで回転させることもできます。  \r\nしかし、CPUレンダリングになってしまうのでちょっとカクカクするので今回はこの方法は使いませんでした。\r\n\r\n\r\n\u003csvg style=\"max-width:400px\" viewBox=\"0 0 400 400\" \u003e\r\n  \u003cdefs\u003e\r\n    \u003cpath id=\"Circle1\" d=\"M 25, 200 a 175,175 0 1,1 350,0 a 175,175 0 1,1 -350,0\" /\u003e\r\n    \u003cpath id=\"Circle2\" d=\"M 50, 200 a 150,150 0 1,1 300,0 a 150,150 0 1,1 -300,0\" /\u003e\r\n    \u003cpath id=\"Circle3\" d=\"M 75, 200 a 125,125 0 1,1 250,0 a 125,125 0 1,1 -250,0\" /\u003e\r\n    \u003cpath id=\"Circle4\" d=\"M 100, 200 a 100,100 0 1,1 200,0 a 100,100 0 1,1 -200,0\" /\u003e\r\n    \u003cpath id=\"Circle5\" d=\"M 125, 200 a 75,75 0 1,1 150,0 a 75,75 0 1,1 -150,0\" /\u003e\r\n    \u003cpath id=\"Circle6\" d=\"M 150, 200 a 50,50 0 1,1 100,0 a 50,50 0 1,1 -100,0\" /\u003e\r\n    \u003cpath id=\"Circle7\" d=\"M 175, 200 a 25,25 0 1,1 50,0 a 25,25 0 1,1 -50,0\" /\u003e\r\n  \u003c/defs\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle1\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"11s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle2\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"10s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle3\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"9s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle4\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"8s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle5\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"7s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle6\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"6s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle7\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"5s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle8\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"4s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle9\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"3s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n\u003c/svg\u003e\r\n\r\n```xml\r\n\u003csvg style=\"max-width:400px\" viewBox=\"0 0 400 400\" \u003e\r\n  \u003cdefs\u003e\r\n    \u003cpath id=\"Circle1\" d=\"M 25, 200 a 175,175 0 1,1 350,0 a 175,175 0 1,1 -350,0\" /\u003e\r\n    \u003cpath id=\"Circle2\" d=\"M 50, 200 a 150,150 0 1,1 300,0 a 150,150 0 1,1 -300,0\" /\u003e\r\n    \u003cpath id=\"Circle3\" d=\"M 75, 200 a 125,125 0 1,1 250,0 a 125,125 0 1,1 -250,0\" /\u003e\r\n    \u003cpath id=\"Circle4\" d=\"M 100, 200 a 100,100 0 1,1 200,0 a 100,100 0 1,1 -200,0\" /\u003e\r\n    \u003cpath id=\"Circle5\" d=\"M 125, 200 a 75,75 0 1,1 150,0 a 75,75 0 1,1 -150,0\" /\u003e\r\n    \u003cpath id=\"Circle6\" d=\"M 150, 200 a 50,50 0 1,1 100,0 a 50,50 0 1,1 -100,0\" /\u003e\r\n    \u003cpath id=\"Circle7\" d=\"M 175, 200 a 25,25 0 1,1 50,0 a 25,25 0 1,1 -50,0\" /\u003e\r\n  \u003c/defs\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle1\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"11s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle2\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"10s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle3\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"9s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle4\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"8s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle5\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"7s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle6\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"6s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle7\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"5s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle8\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"4s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n  \u003ctext\u003e\r\n    \u003ctextPath href=\"#Circle9\"\u003eॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ ॐ मणिपद्मे हूँ\u003c/textPath\u003e\r\n    \u003canimateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 200,200\" to=\"360 200,200\" dur=\"3s\" repeatCount=\"indefinite\" /\u003e\r\n  \u003c/text\u003e\r\n\u003c/svg\u003e\r\n```\r\n\r\nSVG単体でanimateTransformを利用してマニ車を回すより、CSSのanimationで回した方がスムーズな動作で回せました。\r\n\r\nこれでパソコンでもスマホでも、いつでもどこでも誰でも自動でスマートに徳を積めますね。  \r\n以上、SVGで徳を積んだという話でした。\r\n","tags":["SVG","CSS"],"category":"blog"},{"slug":"posts/google-colab-github","date":"2022-12-03T05:58:43+0900","draft":false,"title":"Google ColaboratoryでGitHubのipynbファイルを開く","description":"Google ColaboratoryでGitHubのipynbファイルを開いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。","content":"\r\nGoogle ColaboratoryでGitHubのファイルを開いてみたいと思うこと、ありますよね。  \r\n僕はあるので自分用にメモです。\r\n\r\nと言っても簡単で、GitHubでパブリックのリポジトリにファイルをコミットするだけです。\r\n\r\n\u003chttps://github.com/nishidemasami/google-colab-tutorial/blob/main/ubuntu-command/useful_tools.ipynb\u003e\r\n\r\nこのようなパスにコミットしたとしたら、\r\n\r\n\u003chttps://colab.research.google.com/github/nishidemasami/google-colab-tutorial/blob/main/ubuntu-command/useful_tools.ipynb\u003e\r\n\r\nこうやってGoogle Colaboratoryで開くことができます。\r\n\r\n簡単！\r\n","tags":["Google Colaboratory","GitHub"],"category":"blog"},{"slug":"posts/nextjs-latex","date":"2022-11-26T04:58:43+0900","draft":false,"title":"Next.jsで数式を書く","description":"Next.jsで数式を書いてみたいと思うこと、ありますよね。僕はあるので自分用にメモです。","content":"\r\nNext.jsで数式を書いてみたいと思うこと、ありますよね。  \r\n僕はあるので自分用にメモです。\r\n\r\n2次方程式の解の公式、懐かしいですね。\r\n\r\n$\r\nx = \\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}\r\n$\r\n\r\nこれを見ると学生時代を思い出しますね。  \r\nこういう数式を、Next.jsでもMarkdownに$\\LaTeX$で\r\n\r\n```latex\r\nx = \\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}\r\n```\r\n\r\nこんな感じで書けたら便利です。\r\n\r\n今回は$\\LaTeX$をウェブブラウザで表示するためのライブラリである$\\KaTeX$をNext.jsで使ってみました。\u003csup\u003e[\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/React-js%EF%BC%86Next-js%E8%B6%85%E5%85%A5%E9%96%80-%E7%AC%AC2%E7%89%88-%E6%8E%8C%E7%94%B0%E6%B4%A5%E8%80%B6%E4%B9%83-ebook/dp/B08XBNGYVH?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A\u0026crid=1304MCUGBPN1M\u0026keywords=next.js\u0026qid=1670505884\u0026sprefix=next.j%2Caps%2C195\u0026sr=8-6\u0026linkCode=ll1\u0026tag=nishidemasami-22\u0026linkId=1faf1c568d048e662fff7bffcc7794e3\u0026language=ja_JP\u0026ref_=as_li_ss_tl\"\u003e参考文献\u003c/a\u003e]\u003c/sup\u003e\r\n\r\nJavaScriptで動的にブラウザ上で数式を描画するのがよく見る$\\KaTeX$の使い方ですが、Next.jsでSSGしている時にはビルド時に既に数式がHTMLにレンダリング済みだという挙動になるので少し仕組みが違います。  \r\nブラウザとしては$\\LaTeX$形式の数式をHTMLへ変換する必要がなくなり描画が高速だという点がメリットです。ブラウザがJavaScriptを無効化していても見れるのもいいですね。\r\n\r\nまず、必要なパッケージをインストールします。\r\n\r\n```bash\r\nnpm install remark-math rehype-katex\r\n```\r\n\r\nこのウェブサイトではMarkdownを読み込むのに _unified_ を使用しているので、 _remark-math_ と _rehype-katex_ を追加で _use_ します。\r\n\r\n```typescript\r\nimport rehypePrism from '@mapbox/rehype-prism';\r\nimport rehypeKatex from 'rehype-katex';\r\nimport rehypeStringify from 'rehype-stringify';\r\nimport remarkGfm from 'remark-gfm';\r\nimport remarkMath from 'remark-math';\r\nimport remarkParse from 'remark-parse';\r\nimport remarkRehype from 'remark-rehype';\r\nimport { unified } from 'unified';\r\n\r\nexport const markdownToHtml = async (markdown: string) =\u003e\r\n  (\r\n    await unified()\r\n      .use(remarkParse)\r\n      .use(remarkMath)\r\n      .use(remarkGfm)\r\n      .use(remarkRehype, { allowDangerousHtml: true })\r\n      .use(rehypePrism)\r\n      .use(rehypeKatex)\r\n      .use(rehypeStringify, { allowDangerousHtml: true })\r\n      .process(markdown)\r\n  )\r\n    .toString();\r\n```\r\n\r\nあとは$\\KaTeX$のCSSをCDNなどから読み込めば完成です。\r\n\r\n```html\r\n\u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css\" crossOrigin=\"anonymous\" /\u003e\r\n```\r\n\r\nでは、実際に書いてみることにします。  \r\n以下は任意の$x$と$y$の最大公約数を求める$gcd$関数の定義です。\r\n\r\n```latex\r\n\\gcd(x, y) =\r\n\\begin{cases}\r\n  y \u0026 (x = 0)\\\\\r\n  x \u0026 (y = 0)\\\\\r\n  \\gcd(y, x \\bmod y) \u0026 (\\text{otherwize})\r\n\\end{cases}\r\n```\r\n\r\n$\r\n\\gcd(x, y) =\r\n\\begin{cases}\r\n  y \u0026 (x = 0)\\\\\r\n  x \u0026 (y = 0)\\\\\r\n  \\gcd(y, x \\bmod y) \u0026 (\\text{otherwize})\r\n\\end{cases}\r\n$\r\n\r\n上手に書けました！✨\r\n\r\n以上です。  \r\n\u003chttps://github.com/nishidemasami/nishidemasami.github.io\u003e  \r\n実際にNext.jsで動いているコードは👆ここから確認してください。\r\n","tags":["Next.js","LaTeX","KaTeX","Markdown"],"category":"blog"},{"slug":"posts/gen_ed25519_key","date":"2022-11-19T23:02:43+0900","draft":false,"title":"ED25519の鍵を生成する","description":"ED25519の鍵を生成したいこと、ありますよね。僕はあるので自分用にメモです。","content":"\r\nもう1年以上前にAWSでED25519の鍵が使えるようになっていた。  \r\n当然のようにGitHubでも使える。  \r\nどんどんED25519を使えない環境もかなり減ってきていて、ED25519の鍵を作る機会も増えてきた。\r\n\r\nなのに、ED25519の鍵の作り方をいつもググって調べるので自分用にメモ。\r\n\r\n`ssh-keygen -t ed25519`  \r\nで作成できる。  \r\n\r\n```bash\r\n$ ssh -V\r\nOpenSSH_8.9p1 Ubuntu-3, OpenSSL 3.0.2 15 Mar 2022\r\n$ ssh-keygen -t ed25519\r\nGenerating public/private ed25519 key pair.\r\nEnter file in which to save the key (/home/nishidemasami/.ssh/id_ed25519):\r\nEnter passphrase (empty for no passphrase):\r\nEnter same passphrase again:\r\nYour identification has been saved in /home/nishidemasami/.ssh/id_ed25519\r\nYour public key has been saved in /home/nishidemasami/.ssh/id_ed25519.pub\r\nThe key fingerprint is:\r\nSHA256:mObF7QvcCUg1/JQb9aF6hc2R6GCuu7UpYipZ03J6Xtw nishidemasami@desktop-nishidemasami\r\nThe key's randomart image is:\r\n+--[ED25519 256]--+\r\n|       .o  o..o. |\r\n|       ...* .*.o |\r\n|      .  = =o =  |\r\n|     . = .+...   |\r\n|     .= S.o .    |\r\n|    +oo+.= o     |\r\n|   o =. =.E      |\r\n|  o . +.oo +     |\r\n|   ..=...o+      |\r\n+----[SHA256]-----+\r\n```\r\n\r\n参考\r\n\u003chttps://aws.amazon.com/jp/about-aws/whats-new/2021/08/amazon-ec2-customers-ed25519-keys-authentication/\u003e\r\n","tags":["SSH","AWS","ED25519"],"category":"blog"},{"slug":"posts/check_github_repository_size","date":"2022-11-12T23:02:43+0900","draft":false,"title":"GitHubのレポジトリサイズを確認する","description":"GitHubのレポジトリサイズを確認する","content":"\r\nリポジトリのサイズがいつも気になるので自分用にメモ。\r\n\r\n`https://api.github.com/repos/アカウント名/リポジトリ名`  \r\nにアクセスするとjsonで詳細が取得できる。  \r\nその`size`にKB単位でサイズが入っている。\r\n\r\nたとえば`github.com:nishidemasami/nishidemasami.github.io.git`の場合、  \r\n\u003chttps://api.github.com/repos/nishidemasami/nishidemasami.github.io\u003e  \r\nこのURLで取得できる。\r\n","tags":["GitHub"],"category":"blog"},{"slug":"posts/nextjs-website-renewal","date":"2022-11-05T01:04:03+0900","draft":false,"title":"Next.jsでこのウェブサイトをリニューアルしました！✨","description":"Next.jsでこのウェブサイトをリニューアルしました！✨","content":"\r\nNext.jsでこのウェブサイトをリニューアルしました！✨\r\n\r\nT3 Stackの6つの技術のうち、フロントエンド側の以下の3つの技術をフル活用しています。\r\n\r\n* TypeScript\u003csup\u003e[\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0TypeScript-%E2%80%95%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8BJavaScript%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E9%96%8B%E7%99%BA-Boris-Cherny/dp/4873119049?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A\u0026crid=3Q7MI7KXY06BB\u0026keywords=typescript\u0026qid=1670505807\u0026sprefix=typescript+%2Caps%2C224\u0026sr=8-9\u0026linkCode=ll1\u0026tag=nishidemasami-22\u0026linkId=48539012d76c58e8bc3549b5a9dc7a1f\u0026language=ja_JP\u0026ref_=as_li_ss_tl\" rel=\"noreferrer\" \u003e参考文献\u003c/a\u003e]\u003c/sup\u003e  \r\nほぼ全てTypeScriptで書いています。\r\n* Next.js  \r\nSSGフレームワークに使用しています。\r\n* Tailwind CSS  \r\nスタイルを書くのに使用しています。CSSもSCSSもstyled-componentsもどうしても必要な箇所を除けば使っていません。\r\n\r\nまた、リニューアル後も引き続きGitHub ActionsでCI/CDを継続しています。\r\n\r\n今のところこのウェブサイトはNext.jsになる前には、\r\n\r\nHexo  \r\n🔽  \r\nGatsby.js  \r\n🔽  \r\nNext.js\r\n\r\nという偏移を経ています。\r\n\r\nHexoは純粋な時代の古き良きSSGでした。しかしパフォーマンスを追い求めると限界がありました。  \r\nGatsby.jsは _Blazing fast🔥_ ではあったもののちょっとカスタマイズしようとするとすぐgatsby-pluginが必要になりました。  \r\nその点Next.jsは、何もかも自分でコントロールできるような確かな手触りを感じています。  \r\nそれにNext.jsも十分速い。とにかくウェブサイトのなにをクリックしても速いです。普通の使い方をするならGatsby.jsと違いがわからないほど速いです。  \r\n\r\nNext.jsをもっと良く知るためにも、引き続きこのウェブサイトでいろいろなことをやってみようと思っています。\r\n","tags":["Next.js"],"category":"blog"},{"slug":"posts/css-svg-rotate-text","date":"2021-03-17T01:04:03+0900","draft":false,"title":"SVGとCSSだけで文字をクルクル回す","description":"JavaScriptを使わずにSVGとCSSだけで文字をクルクル回したいこと、ありますよね。僕はあるので自分用にメモです。","content":"\nJavaScriptを使わずにSVGとCSSだけで文字をクルクル回したいこと、ありますよね。  \n僕はあるので自分用にメモです。\n\n\u003csvg style=\"animation: spin 5s linear infinite; max-width:300px\" viewBox=\"0 0 100 100\" \u003e\n  \u003cdefs\u003e\n    \u003cpath id=\"Circle\" d=\"M 25, 50 a 25,25 0 1,1 50,0 a 25,25 0 1,1 -50,0\" /\u003e\n  \u003c/defs\u003e\n  \u003ctext\u003e\n    \u003ctextPath href=\"#Circle\"\u003e文字がクルクル回ります。\u003c/textPath\u003e\n  \u003c/text\u003e\n\u003c/svg\u003e\n\n```html\n\u003csvg\n  style=\"animation: spin 5s linear infinite; max-width:300px\"\n  viewBox=\"0 0 100 100\"\n\u003e\n  \u003cdefs\u003e\n    \u003cpath\n      id=\"Circle\"\n      d=\"M 25, 50 a 25,25 0 1,1 50,0 a 25,25 0 1,1 -50,0\"\n    /\u003e\n  \u003c/defs\u003e\n  \u003ctext\u003e\n    \u003ctextPath href=\"#Circle\"\u003e\n      文字がクルクル回ります。\n    \u003c/textPath\u003e\n  \u003c/text\u003e\n\u003c/svg\u003e\n```\n\nSVGは大きさ50*50の円とその周囲を沿うようにテキストを記述しています。SVGのスタイルにはクルクル回るCSSを書いてます。  \nこれだけでクルクル回ったので楽しかったです。\n","tags":["CSS","SVG"],"category":"blog"}],"tags":["Rust","FizzBuzz"],"prevPost":null,"nextPost":{"slug":"articles/typescript-bitcoin","date":"2022-12-24T01:04:03+0900","draft":false,"title":"Typescriptでビットコインアドレスを生成する","description":"Typescriptでビットコインアドレスを生成したいこと、ありますよね。僕はあるので自分用にメモです。","content":"*/\n\nimport React from 'react';\n\nimport { format } from 'date-fns';\nimport { GetStaticProps } from 'next';\n\nimport { TypescriptBitcoin } from '../../components/TypescriptBitcoin';\nimport { Content } from '../../content/Content';\nimport { Meta } from '../../layout/Meta';\nimport { PostPagination } from '../../pagination/PostPagination';\nimport { Main } from '../../templates/Main';\nimport {\n\tgetPrevNextPost,\n\tgetRecentPosts,\n\tgetTags,\n\tPostItems,\n} from '../../utils/Content';\nimport { markdownToHtml } from '../../utils/Markdown';\n\ntype ReactSoundTestProps = {\n\trecents: PostItems[];\n\ttags: string[];\n\tfirstArticle: string;\n\tsecondArticle: string;\n\tprevPost?: PostItems;\n\tnextPost?: PostItems;\n};\n\nconst firstArticle = `\nTypescriptでビットコインアドレスを生成したいこと、ありますよね。  \n僕はあるので自分用にメモです。\u003csup\u003e[\u003ca target=\"_blank\" href=\"https://www.amazon.co.jp/%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%83%81%E3%82%A7%E3%83%BC%E3%83%B3%E5%AE%9F%E8%B7%B5%E5%85%A5%E9%96%80-%E3%83%93%E3%83%83%E3%83%88%E3%82%B3%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89%E3%82%A4%E3%83%BC%E3%82%B5%E3%83%AA%E3%82%A2%E3%83%A0%E3%80%81DApp%E9%96%8B%E7%99%BA%E3%81%BE%E3%81%A7-Bikramaditya-Singhal/dp/4274225372?_encoding=UTF8\u0026qid=1671896601\u0026sr=8-1\u0026linkCode=ll1\u0026tag=nishidemasami-22\u0026linkId=b026b2c2bd3729a8fe4c35dda528a7bb\u0026language=ja_JP\u0026ref_=as_li_ss_tl\" rel=\"noreferrer\" \u003e参考文献\u003c/a\u003e]\u003c/sup\u003e\n\n👇このボタンをクリックするとビットコインアドレスを生成します。\n`;\n\nconst secondArticle = `\nビットコインのアドレスは、32バイトの秘密鍵を以下のようにしてビットコインアドレスに変換します。\n\n\\`\\`\\`mermaid\nflowchart TD\n\nA[32バイトの秘密鍵] --\u003e|secp256k1| B(公開鍵)\nA --\u003e|base58変換とチェックサム付与| F[WIF形式秘密鍵]\nB --\u003e C{ビットコインアドレス形式}\nC --\u003e|BASE58変換とチェックサム付与| D[P2PKH形式ビットコインアドレス]\nC --\u003e|BASE32変換とチェックサム付与| E[Bech32形式ビットコインアドレス]\n\\`\\`\\`\n\nこれはTypescriptでも簡単に計算できます。\n\nそれを実際に書いてみたのが ↓ この今回のコードです\n\\`\\`\\`tsx\nimport { randomBytes, createHash, BinaryLike } from 'crypto';\n\nimport { useState, FC, useMemo, useCallback } from 'react';\n\nimport { Button, TextField } from '@mui/material';\nimport { bech32 } from 'bech32';\nimport { encode } from 'bs58';\nimport RIPEMD160 from 'ripemd160';\nimport { publicKeyCreate, privateKeyVerify } from 'secp256k1';\n\n/** 16進数の文字列かどうかチェックする正規表現 */\nconst check32BytesHex = /^[0-9a-fA-F]{64}$/;\n\n/** 16進数の文字列をUint8Arrayに変換する */\nconst hexToUint8Array = (hex: string): Uint8Array =\u003e Buffer.from(hex, 'hex');\n\n/** Bufferを16進数の文字列に変換する */\nconst bufferToHex = (data: Buffer): string =\u003e data.toString('hex');\n\n/** sha256でハッシュする */\nconst sha256 = (data: BinaryLike): Buffer =\u003e\n  createHash('sha256').update(data).digest();\n\n/** ripemd160でハッシュする */\nconst ripemd160 = (data: BinaryLike): Buffer =\u003e\n  new RIPEMD160().update(data).digest();\n\n/** BASE58チェックサム生成 */\nconst calcBase58Checksum = (data: BinaryLike): Buffer =\u003e\n  sha256(sha256(data)).subarray(0, 4);\n\n/** BASE58変換＋チェックサム */\nconst base58WithChecksum = (data: Uint8Array): string =\u003e\n  encode([...data, ...calcBase58Checksum(data)]);\n\n/** ビットコインアドレス(BASE58(P2PKH)形式)生成 */\nconst genBitcoinAddressP2PKH = (publicKey: Uint8Array): string =\u003e\n  base58WithChecksum(Uint8Array.from([0x00, ...ripemd160(sha256(publicKey))]));\n\n/** BASE32変換＋チェックサム */\nconst bech32WithChecksum = (data: Uint8Array) =\u003e\n  bech32.encode('bc', [0x00, ...bech32.toWords(data)]);\n\n/** ビットコインアドレス(BASE32(Bech32)形式)生成 */\nconst genBitcoinAddressBECH32 = (publicKey: Uint8Array): string =\u003e\n  bech32WithChecksum(ripemd160(sha256(publicKey)));\n\n/** 秘密鍵(WIF形式)生成 */\nconst genWif = (privateKey: Uint8Array): string =\u003e\n  base58WithChecksum(Uint8Array.from([0x80, ...privateKey]));\n\nconst TypescriptBitcoin: FC = () =\u003e {\n  // 秘密鍵(32バイトの16進数)\n  const [hexPrivateKey, setHexPrivateKey] = useState(\n    bufferToHex(randomBytes(32))\n  );\n\n  /** 秘密鍵(32バイト) */\n  const privateKey: Uint8Array | string = useMemo(() =\u003e {\n    if (!check32BytesHex.test(hexPrivateKey))\n      return '秘密鍵が32バイトの16進数ではない';\n    return hexToUint8Array(hexPrivateKey);\n  }, [hexPrivateKey]);\n\n  /** 公開鍵 */\n  const publicKey: Uint8Array | string = useMemo(() =\u003e {\n    if (typeof privateKey === 'string') return privateKey;\n    if (!privateKeyVerify(privateKey)) return '秘密鍵が不適切';\n    return publicKeyCreate(privateKey, false);\n  }, [privateKey]);\n\n  /** ビットコインアドレス(BASE32(Bech32)形式) */\n  const bitcoinAddressBECH32 = useMemo(() =\u003e {\n    if (typeof privateKey === 'string') return privateKey;\n    if (typeof publicKey === 'string') return publicKey;\n    return genBitcoinAddressBECH32(publicKey);\n  }, [privateKey, publicKey]);\n\n  /** ビットコインアドレス(BASE58(P2PKH)形式) */\n  const bitcoinAddressP2PKH = useMemo(() =\u003e {\n    if (typeof privateKey === 'string') return privateKey;\n    if (typeof publicKey === 'string') return publicKey;\n    return genBitcoinAddressP2PKH(publicKey);\n  }, [privateKey, publicKey]);\n\n  /** 秘密鍵をランダムに生成 */\n  const genRamdamKey = useCallback(\n    () =\u003e setHexPrivateKey(bufferToHex(randomBytes(32))),\n    []\n  );\n\n  /** 秘密鍵(WIF形式) */\n  const wif = useMemo(\n    () =\u003e genWif(hexToUint8Array(hexPrivateKey)),\n    [hexPrivateKey]\n  );\n\n  return (\n    \u003c\u003e\n      \u003cButton onClick={genRamdamKey} variant=\"outlined\"\u003e\n        秘密鍵をランダムに生成\n      \u003c/Button\u003e\n      \u003cTextField\n        error={!check32BytesHex.test(hexPrivateKey)}\n        fullWidth\n        label=\"秘密鍵(32バイトの16進数)\"\n        margin=\"dense\"\n        value={hexPrivateKey}\n        onChange={(e) =\u003e {\n          setHexPrivateKey(e.currentTarget.value);\n        }}\n      /\u003e\n      \u003cTextField\n        fullWidth\n        label=\"秘密鍵(WIF形式)\"\n        margin=\"dense\"\n        value={wif}\n        InputProps={{\n          readOnly: true,\n        }}\n      /\u003e\n      \u003cTextField\n        fullWidth\n        label=\"ビットコインアドレス(BASE58(P2PKH)形式)\"\n        margin=\"dense\"\n        InputProps={{\n          readOnly: true,\n        }}\n        value={bitcoinAddressP2PKH}\n      /\u003e\n      \u003cTextField\n        fullWidth\n        label=\"ビットコインアドレス(BASE32(Bech32)形式)\"\n        margin=\"dense\"\n        InputProps={{\n          readOnly: true,\n        }}\n        value={bitcoinAddressBECH32}\n      /\u003e\n    \u003c/\u003e\n  );\n};\n\nexport { TypescriptBitcoin };\n\\`\\`\\`\n`;\n\nconst ReactSoundTest = (props: ReactSoundTestProps) =\u003e (\n\t\u003cMain\n\t\trecents={props.recents}\n\t\ttags={props.tags}\n\t\tmeta={\n\t\t\t\u003cMeta\n\t\t\t\ttitle=\"Typescriptでビットコインアドレスを生成する\"\n\t\t\t\tdescription=\"Typescriptでビットコインアドレスを生成したいこと、ありますよね。僕はあるので自分用にメモです。\"\n\t\t\t/\u003e\n\t\t}\n\t\u003e\n\t\t\u003ch1 className=\"text-center font-bold text-3xl text-gray-900\"\u003e\n\t\t\tTypescriptでビットコインアドレスを生成する\n\t\t\u003c/h1\u003e\n\t\t\u003cdiv className=\"text-center text-sm mb-4\"\u003e\n\t\t\t{format(new Date('2022-12-10T01:04:03+0900'), 'LLLL d, yyyy')}\n\t\t\u003c/div\u003e\n\n\t\t\u003cContent\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cdiv dangerouslySetInnerHTML={{ __html: props.firstArticle }} /\u003e\n\t\t\t\t\u003cTypescriptBitcoin /\u003e\n\t\t\t\t\u003cdiv dangerouslySetInnerHTML={{ __html: props.secondArticle }} /\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/Content\u003e\n\n\t\t\u003cPostPagination nextPost={props.nextPost} prevPost={props.prevPost} /\u003e\n\t\u003c/Main\u003e\n);\n\nexport const getStaticProps: GetStaticProps\u003cReactSoundTestProps\u003e = async () =\u003e {\n\tconst recents = getRecentPosts(['title', 'date', 'slug']);\n\n\treturn {\n\t\tprops: {\n\t\t\trecents,\n\t\t\ttags: getTags(),\n\t\t\tfirstArticle: await markdownToHtml(firstArticle),\n\t\t\tsecondArticle: await markdownToHtml(secondArticle),\n\t\t\t...getPrevNextPost(__filename),\n\t\t},\n\t};\n};\n\nexport default ReactSoundTest;\n","tags":["TypeScript","React","Bitcoin"],"category":"blog"},"mainTags":["GitHub","CSS","SVG","SSH","AWS","ED25519","Google Colaboratory","GitHub","hexo","Java","Ruby","情報処理技術者試験","ネットワークスペシャリスト","Next.js","LaTeX","KaTeX","Markdown","Mermaid","Markdown","Next.js","SSG","SVG","Remark","remark-mermaidjs","GitHub Actions","Next.js","Rust","FizzBuzz","SVG","CSS","Vim","OpenSSL","JavaScript","TypeScript","React","Gatsby","TypeScript","React","TypeScript","React","Bitcoin"]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"rust-fizzbuzz"},"buildId":"ILu97a9SvA9pE4iTx-rWu","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>